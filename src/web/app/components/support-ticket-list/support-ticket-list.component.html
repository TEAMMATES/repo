<div class="table-responsive">
    <table class="table table-bordered table-hover table-striped">
        <thead
            [ngClass]="{'thead-gray': useGrayHeading, 'alert-primary font-weight-bold': !useGrayHeading}"
            [hidden]="isHideTableHead"
        >
            <tr>
                <th class="sortable-header" scope="col" (click)="sortSupportTicketList(SortBy.SUPPORT_REQ_TRACKING_ID)">
                    Ticket #
                    <span class="fa-stack">
                        <i class="fas fa-sort"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_TRACKING_ID && tableSortOrder === SortOrder.DESC" class="fas fa-sort-down"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_TRACKING_ID && tableSortOrder === SortOrder.ASC" class="fas fa-sort-up"></i>
                      </span>
                </th>
                <th class="sortable-header" scope="col" (click)="sortSupportTicketList(SortBy.SUPPORT_REQ_STATUS)">
                    Status
                    <span class="fa-stack">
                        <i class="fas fa-sort"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_STATUS && tableSortOrder === SortOrder.DESC" class="fas fa-sort-down"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_STATUS && tableSortOrder === SortOrder.ASC" class="fas fa-sort-up"></i>
                    </span>
                </th>
                <th class="sortable-header" scope="col" (click)="sortSupportTicketList(SortBy.SUPPORT_REQ_ENQUIRY_TYPE)">
                    Enquiry Type
                    <span class="fa-stack">
                        <i class="fas fa-sort"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_ENQUIRY_TYPE && tableSortOrder === SortOrder.DESC" class="fas fa-sort-down"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_ENQUIRY_TYPE && tableSortOrder === SortOrder.ASC" class="fas fa-sort-up"></i>
                    </span>
                </th>
                <th class="sortable-header" scope="col" (click)="sortSupportTicketList(SortBy.SUPPORT_REQ_TITLE)">
                    Title
                    <span class="fa-stack">
                        <i class="fas fa-sort"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_TITLE && tableSortOrder === SortOrder.DESC" class="fas fa-sort-down"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_TITLE && tableSortOrder === SortOrder.ASC" class="fas fa-sort-up"></i>
                    </span>
                </th>
                <th class="sortable-header" scope="col" (click)="sortSupportTicketList(SortBy.SUPPORT_REQ_EMAIL)">
                    Email
                    <span class="fa-stack">
                        <i class="fas fa-sort"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_EMAIL && tableSortOrder === SortOrder.DESC" class="fas fa-sort-down"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_EMAIL && tableSortOrder === SortOrder.ASC" class="fas fa-sort-up"></i>
                      </span>
                </th>
                <th class="sortable-header" scope="col" (click)="sortSupportTicketList(SortBy.SUPPORT_REQ_NAME)">
                    Name
                    <span class="fa-stack">
                        <i class="fas fa-sort"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_NAME && tableSortOrder === SortOrder.DESC" class="fas fa-sort-down"></i>
                        <i *ngIf="tableSortBy === SortBy.SUPPORT_REQ_NAME && tableSortOrder === SortOrder.ASC" class="fas fa-sort-up"></i>
                      </span>
                </th>
                <th scope="col">
                    Action(s)
                </th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let req of supportRequests">
                <td>{{ req.trackingId }}</td>
                <td>{{ req.status }}</td>
                <td>{{ req.enquiry_type }}</td>
                <td>{{ req.title }}</td>
                <td>{{ req.email }}</td>
                <td>{{ req.name }}</td>
                <td class="no-print align-center">
                    <ng-template #actionButton let-isEnabled="isEnabled" let-tooltip="tooltip" let-name="name" let-id="id"
                        let-tmRouterLink="tmRouterLink" let-queryParams="queryParams">
                        <a class="btn btn-light btn-sm btn-margin-right" target="_blank" rel="noopener noreferrer"
                            [id]="id"
                            [ngClass]="{'disabled mouse-hover-only': !isEnabled}"
                            [ngbTooltip]="isEnabled ? tooltip : 'You do not have the permissions to access this feature'"
                            [tmRouterLink]="tmRouterLink"
                            [queryParams]="queryParams">
                            {{name}}</a>
                    </ng-template>
                    <ng-container *ngTemplateOutlet="actionButton; 
                    context: {
                        id: 'btn-view-records', 
                        isEnabled: isActionButtonsEnabled, 
                        tooltip: 'View message history', 
                        name: 'View',
                        tmRouterLink: '/web/admin/support/:{{ req.trackingId }}'}">
                    </ng-container>
                    <button id="btn-delete" class="btn btn-light btn-sm btn-margin-right"
                        [ngbTooltip]="'Delete this support request'"
                        [disabled]="!isActionButtonsEnabled"
                        (click)="openDeleteModal(req)"> 
                        Delete 
                    </button>
                  </td>
            </tr>
        </tbody>
    </table>
  </div>
  