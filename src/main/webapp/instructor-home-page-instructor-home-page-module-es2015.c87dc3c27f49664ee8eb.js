(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{"du++":function(s,e,o){"use strict";o.r(e),o.d(e,"InstructorHomePageModule",(function(){return G}));var t=o("ofXK"),n=o("3Pt+"),i=o("tyNb"),r=o("1kSV"),c=o("mYbV"),a=o("aSpy"),d=o("RPsU"),u=o("vHwn"),b=o("TOej"),l=o("cp0P"),h=o("nYR2"),S=o("Mdjh"),g=o("p6cw"),v=o("BKNR"),m=o("/Tzu"),p=o("JUCI"),T=o("TQ0J"),f=o("fXoL"),w=o("Uqoa"),E=o("Pvcr"),R=o("MbNv"),C=o("YxrJ"),M=o("iRmZ"),k=o("++8I"),y=o("I8MS"),I=o("eQqG"),O=o("ax2R"),V=o("vKUq"),A=o("Lcal"),F=o("Babz"),W=o("W872"),x=o("zAMY"),B=o("H5dr");function P(s,e){1&s&&(f.Wb(0,"div",4),f.Wb(1,"div",5),f.Qc(2," New to TEAMMATES? You may wish to have a look at our "),f.Wb(3,"a",6),f.Qc(4,"Getting Started Guide"),f.Vb(),f.Qc(5,". A video tour is also available in our "),f.Wb(6,"a",7),f.Qc(7,"home page"),f.Vb(),f.Qc(8,". "),f.Vb(),f.Vb())}function Q(s,e){if(1&s){const s=f.Xb();f.Wb(0,"div",13),f.Wb(1,"div",14),f.Wb(2,"strong",15),f.Qc(3," Sort By: "),f.Vb(),f.Wb(4,"div",16),f.Wb(5,"button",17),f.ic("click",(function(){f.Fc(s);const e=f.kc(2);return e.sortCoursesBy(e.SortBy.COURSE_ID)})),f.Qc(6,"Course ID"),f.Vb(),f.Wb(7,"button",18),f.ic("click",(function(){f.Fc(s);const e=f.kc(2);return e.sortCoursesBy(e.SortBy.COURSE_NAME)})),f.Qc(8,"Course Name"),f.Vb(),f.Wb(9,"button",19),f.ic("click",(function(){f.Fc(s);const e=f.kc(2);return e.sortCoursesBy(e.SortBy.COURSE_CREATION_DATE)})),f.Qc(10,"Creation Date"),f.Vb(),f.Vb(),f.Vb(),f.Vb()}if(2&s){const s=f.kc(2);f.Cb(5),f.sc("disabled",s.isSelectedForSorting(s.SortBy.COURSE_ID)),f.Cb(2),f.sc("disabled",s.isSelectedForSorting(s.SortBy.COURSE_NAME)),f.Cb(2),f.sc("disabled",s.isSelectedForSorting(s.SortBy.COURSE_CREATION_DATE))}}const L=function(){return{isAddNewCourse:!0}};function N(s,e){if(1&s&&(f.Wb(0,"div",8),f.Wb(1,"div",9),f.Wb(2,"a",10),f.Rb(3,"i",11),f.Qc(4," Add New Course "),f.Vb(),f.Vb(),f.Oc(5,Q,11,3,"div",12),f.Vb()),2&s){const s=f.kc();f.Cb(2),f.sc("queryParams",f.vc(2,L)),f.Cb(3),f.sc("ngIf",s.courseTabModels.length>0)}}const _=function(s){return{courseid:s}};function H(s,e){if(1&s&&(f.Ub(0),f.Wb(1,"a",37),f.Qc(2," Enroll "),f.Vb(),f.Tb()),2&s){const s=f.kc(2).$implicit;f.Cb(1),f.sc("queryParams",f.wc(1,_,s.course.courseId))}}function D(s,e){if(1&s){const s=f.Xb();f.Ub(0),f.Wb(1,"a",38),f.ic("click",(function(){f.Fc(s);const e=f.kc(2).$implicit;return f.kc(3).deleteCourse(e.course.courseId)})),f.Qc(2," Delete "),f.Vb(),f.Tb()}}function U(s,e){if(1&s){const s=f.Xb();f.Wb(0,"div",28),f.Wb(1,"span",29),f.Wb(2,"button",30),f.Qc(3," Students "),f.Vb(),f.Wb(4,"div",31),f.ic("click",(function(e){return f.Fc(s),e.stopPropagation()})),f.Oc(5,H,3,3,"ng-container",20),f.Wb(6,"a",32),f.Qc(7," View / Edit "),f.Vb(),f.Vb(),f.Vb(),f.Wb(8,"span",29),f.Wb(9,"button",30),f.Qc(10," Instructors "),f.Vb(),f.Wb(11,"div",31),f.ic("click",(function(e){return f.Fc(s),e.stopPropagation()})),f.Wb(12,"a",33),f.Qc(13," View / Edit "),f.Vb(),f.Vb(),f.Vb(),f.Wb(14,"span",29),f.Wb(15,"button",30),f.Qc(16," Sessions "),f.Vb(),f.Wb(17,"div",31),f.ic("click",(function(e){return f.Fc(s),e.stopPropagation()})),f.Wb(18,"a",34),f.Qc(19," Add "),f.Vb(),f.Vb(),f.Vb(),f.Wb(20,"span",29),f.Wb(21,"button",35),f.Qc(22," Course "),f.Vb(),f.Wb(23,"div",31),f.ic("click",(function(e){return f.Fc(s),e.stopPropagation()})),f.Wb(24,"a",36),f.ic("click",(function(){f.Fc(s);const e=f.kc().$implicit;return f.kc(3).archiveCourse(e.course.courseId)})),f.Qc(25," Archive "),f.Vb(),f.Wb(26,"a",33),f.Qc(27," View / Edit "),f.Vb(),f.Oc(28,D,3,0,"ng-container",20),f.Vb(),f.Vb(),f.Vb()}if(2&s){const s=f.kc().$implicit;f.Cb(5),f.sc("ngIf",s.instructorPrivilege.canModifyStudent),f.Cb(1),f.sc("queryParams",f.wc(6,_,s.course.courseId)),f.Cb(6),f.sc("queryParams",f.wc(8,_,s.course.courseId)),f.Cb(6),f.sc("queryParams",f.wc(10,_,s.course.courseId)),f.Cb(8),f.sc("queryParams",f.wc(12,_,s.course.courseId)),f.Cb(2),f.sc("ngIf",s.instructorPrivilege.canModifyCourse)}}const q=function(s,e){return[s,e]};function $(s,e){if(1&s){const s=f.Xb();f.Wb(0,"tm-sessions-table",41),f.ic("sortSessionsTableRowModelsEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).sortSessionsTableRowModelsEvent(o,e)}))("loadResponseRateEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).loadResponseRateEventHandler(o,e)}))("editSessionEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).editSessionEventHandler(o,e)}))("moveSessionToRecycleBinEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).moveSessionToRecycleBinEventHandler(o,e)}))("copySessionEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).copySessionEventHandler(o,e)}))("submitSessionAsInstructorEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).submitSessionAsInstructorEventHandler(o,e)}))("viewSessionResultEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).viewSessionResultEventHandler(o,e)}))("publishSessionEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).publishSessionEventHandler(o,e)}))("unpublishSessionEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).unpublishSessionEventHandler(o,e)}))("downloadSessionResultsEvent",(function(e){f.Fc(s);const o=f.kc(2).index;return f.kc(3).downloadSessionResultEventHandler(o,e)}))("resendResultsLinkToStudentsEvent",(function(e){f.Fc(s);const o=f.kc(2).$implicit;return f.kc(3).resendResultsLinkToRespondentsEventHandler(o.sessionsTableRowModels[e])}))("sendRemindersToStudentsEvent",(function(e){f.Fc(s);const o=f.kc(2).$implicit;return f.kc(3).sendRemindersToRespondentsEventHandler(o.sessionsTableRowModels[e])})),f.Vb()}if(2&s){const s=f.kc(2).$implicit,e=f.kc(3);f.sc("sessionsTableRowModels",s.sessionsTableRowModels)("sessionsTableRowModelsSortBy",s.sessionsTableRowModelsSortBy)("sessionsTableRowModelsSortOrder",s.sessionsTableRowModelsSortOrder)("courseCandidates",e.courseCandidates)("headerColorScheme",e.SessionsTableHeaderColorScheme.WHITE)("columnsToShow",f.xc(6,q,e.SessionsTableColumn.START_DATE,e.SessionsTableColumn.END_DATE))}}function j(s,e){if(1&s){const s=f.Xb();f.Wb(0,"div",39),f.Wb(1,"tm-loading-retry",2),f.ic("retryEvent",(function(){f.Fc(s);const e=f.kc().index;return f.kc(3).loadFeedbackSessions(e)})),f.Oc(2,$,1,9,"tm-sessions-table",40),f.Vb(),f.Vb()}if(2&s){const s=f.kc().$implicit;f.sc("@collapseAnim",void 0),f.Cb(1),f.sc("shouldShowRetry",s.hasLoadingFailed)("message","Error loading feedback sessions"),f.Cb(1),f.sc("tmIsLoading",!s.hasPopulated)}}function X(s,e){if(1&s){const s=f.Xb();f.Wb(0,"div",22),f.Wb(1,"div",23),f.ic("click",(function(o){f.Fc(s);const t=e.$implicit,n=e.index,i=f.kc(3);return t.isTabExpanded=i.handleClick(o,t),i.loadFeedbackSessions(n)})),f.Wb(2,"b",24),f.Qc(3),f.Vb(),f.Oc(4,U,29,14,"div",25),f.Rb(5,"tm-panel-chevron",26),f.Vb(),f.Oc(6,j,3,4,"div",27),f.Vb()}if(2&s){const s=e.$implicit;f.Cb(3),f.Tc("[",s.course.courseId,"]: ",s.course.courseName,""),f.Cb(1),f.sc("ngIf",s.isAjaxSuccess),f.Cb(1),f.sc("isExpanded",s.isTabExpanded),f.Cb(1),f.sc("ngIf",s.isTabExpanded)}}function Y(s,e){if(1&s&&(f.Wb(0,"div"),f.Oc(1,X,7,5,"div",21),f.Vb()),2&s){const s=f.kc(2);f.Cb(1),f.sc("ngForOf",s.courseTabModels)}}function J(s,e){if(1&s&&(f.Wb(0,"div"),f.Oc(1,Y,2,1,"div",20),f.Vb()),2&s){const s=f.kc();f.Cb(1),f.sc("ngIf",s.courseTabModels.length>0)}}const z=[{path:"",component:(()=>{class s extends T.a{constructor(s,e,o,t,n,i,r,c,a,d,u,b){super(s,c,e,o,t,n,a,i,d,u,r),this.courseService=b,this.SessionsTableColumn=v.a,this.SessionsTableHeaderColorScheme=v.b,this.SortBy=g.a,this.instructorCoursesSortBy=g.a.COURSE_CREATION_DATE,this.courseTabModels=[],this.hasCoursesLoaded=!1,this.hasCoursesLoadingFailed=!1,this.isNewUser=!1}ngOnInit(){this.loadCourses()}get courseCandidates(){return this.courseTabModels.map(s=>s.course)}handleClick(s,e){return s.target&&!s.target.className.includes("dropdown-toggle")?!e.isTabExpanded:e.isTabExpanded}archiveCourse(s){this.simpleModalService.openConfirmationModal(`Archive course <strong>${s}</strong>?`,m.a.INFO,'This action can be reverted by going to the "Courses" tab and unarchiving the desired course(s).').result.then(()=>{this.courseService.changeArchiveStatus(s,{archiveStatus:!0}).subscribe(e=>{this.courseTabModels=this.courseTabModels.filter(e=>e.course.courseId!==s),this.statusMessageService.showSuccessToast(`The course ${e.courseId} has been archived.\n            You can retrieve it from the Courses page.`)},s=>{this.statusMessageService.showErrorToast(s.error.message)})},()=>{})}deleteCourse(s){this.simpleModalService.openConfirmationModal(`Move course <strong>${s}</strong> to Recycle Bin`,m.a.WARNING,'This action can be reverted by going to the "Courses" tab and restoring the desired course(s).').result.then(()=>{this.courseService.binCourse(s).subscribe(e=>{this.courseTabModels=this.courseTabModels.filter(e=>e.course.courseId!==s),this.statusMessageService.showSuccessToast(`The course ${e.courseId} has been deleted. You can restore it from the Recycle Bin manually.`)},s=>{this.statusMessageService.showErrorToast(s.error.message)})},()=>{})}loadCourses(){this.hasCoursesLoaded=!1,this.hasCoursesLoadingFailed=!1,this.courseTabModels=[],this.courseService.getInstructorCoursesThatAreActive().pipe(Object(h.a)(()=>{this.hasCoursesLoaded=!0})).subscribe(s=>{s.courses.forEach(s=>{this.courseTabModels.push({course:s,instructorPrivilege:s.privileges||S.a,sessionsTableRowModels:[],isTabExpanded:!1,isAjaxSuccess:!0,hasPopulated:!1,hasLoadingFailed:!1,sessionsTableRowModelsSortBy:g.a.NONE,sessionsTableRowModelsSortOrder:g.b.ASC})}),this.isNewUser=!s.courses.some(s=>!/-demo\d*$/.test(s.courseId)),this.sortCoursesBy(this.instructorCoursesSortBy)},s=>{this.hasCoursesLoadingFailed=!0,this.statusMessageService.showErrorToast(s.error.message)})}loadFeedbackSessions(s){const e=this.courseTabModels[s];e.hasLoadingFailed=!1,e.hasPopulated||this.feedbackSessionsService.getFeedbackSessionsForInstructor(e.course.courseId).subscribe(s=>{s.feedbackSessions.forEach(s=>{e.sessionsTableRowModels.push({feedbackSession:s,responseRate:"",isLoadingResponseRate:!1,instructorPrivilege:s.privileges||S.a})}),e.hasPopulated=!0,e.isAjaxSuccess||(e.isAjaxSuccess=!0)},s=>{e.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(s.error.message)},()=>this.sortSessionsTableRowModelsEvent(s,g.a.SESSION_END_DATE))}isSelectedForSorting(s){return this.instructorCoursesSortBy===s}sortCoursesBy(s){if(this.instructorCoursesSortBy=s,this.courseTabModels.length>1){const e=JSON.parse(JSON.stringify(this.courseTabModels));e.sort(this.sortPanelsBy(s)),this.courseTabModels=e}this.loadLatestCourses()}loadLatestCourses(){for(let e=0;e<this.courseTabModels.length&&!(e>=s.coursesToLoad);e+=1)this.courseTabModels[e].isTabExpanded=!0,this.loadFeedbackSessions(e)}sortPanelsBy(s){return(e,o)=>{let t,n,i;switch(s){case g.a.COURSE_NAME:t=e.course.courseName,n=o.course.courseName,i=g.b.ASC;break;case g.a.COURSE_ID:t=e.course.courseId,n=o.course.courseId,i=g.b.ASC;break;case g.a.COURSE_CREATION_DATE:t=String(e.course.creationTimestamp),n=String(o.course.creationTimestamp),i=g.b.DESC;break;default:t="",n="",i=g.b.ASC}return this.tableComparatorService.compare(s,i,t,n)}}sortSessionsTableRowModelsEvent(s,e){const o=this.courseTabModels[s];o.sessionsTableRowModelsSortBy=e,o.sessionsTableRowModelsSortOrder=o.sessionsTableRowModelsSortOrder===g.b.DESC?g.b.ASC:g.b.DESC,o.sessionsTableRowModels.sort(this.sortModelsBy(e,o.sessionsTableRowModelsSortOrder))}loadResponseRateEventHandler(s,e){this.loadResponseRate(this.courseTabModels[s].sessionsTableRowModels[e])}editSessionEventHandler(s,e){this.editSession(this.courseTabModels[s].sessionsTableRowModels[e])}moveSessionToRecycleBinEventHandler(s,e){const o=this.courseTabModels[s].sessionsTableRowModels[e];this.feedbackSessionsService.moveSessionToRecycleBin(o.feedbackSession.courseId,o.feedbackSession.feedbackSessionName).subscribe(()=>{this.courseTabModels[s].sessionsTableRowModels.splice(this.courseTabModels[s].sessionsTableRowModels.indexOf(o),1),this.statusMessageService.showSuccessToast("The feedback session has been deleted. You can restore it from the 'Sessions' tab.")},s=>{this.statusMessageService.showErrorToast(s.error.message)})}copySessionEventHandler(s,e){this.failedToCopySessions={};const o=this.createSessionCopyRequestsFromRowModel(this.courseTabModels[s].sessionsTableRowModels[e.sessionToCopyRowIndex],e);1===o.length&&this.copySingleSession(o[0]),o.length>1&&Object(l.a)(o).subscribe(s=>{s.length>0&&s.forEach(s=>{const e={feedbackSession:s,responseRate:"",isLoadingResponseRate:!1,instructorPrivilege:s.privileges||S.a},o=this.courseTabModels.find(e=>e.course.courseId===s.courseId);o&&o.sessionsTableRowModels.push(e)}),this.showCopyStatusMessage()})}submitSessionAsInstructorEventHandler(s,e){this.submitSessionAsInstructor(this.courseTabModels[s].sessionsTableRowModels[e])}viewSessionResultEventHandler(s,e){this.viewSessionResult(this.courseTabModels[s].sessionsTableRowModels[e])}publishSessionEventHandler(s,e){this.publishSession(this.courseTabModels[s].sessionsTableRowModels[e])}unpublishSessionEventHandler(s,e){this.unpublishSession(this.courseTabModels[s].sessionsTableRowModels[e])}downloadSessionResultEventHandler(s,e){this.downloadSessionResult(this.courseTabModels[s].sessionsTableRowModels[e])}}return s.coursesToLoad=3,s.\u0275fac=function(e){return new(e||s)(f.Qb(i.d),f.Qb(w.a),f.Qb(E.a),f.Qb(R.a),f.Qb(C.a),f.Qb(r.m),f.Qb(M.a),f.Qb(k.a),f.Qb(y.a),f.Qb(I.a),f.Qb(O.a),f.Qb(V.a))},s.\u0275cmp=f.Kb({type:s,selectors:[["tm-instructor-home-page"]],features:[f.zb],decls:6,vars:5,consts:[["class","card bg-light","style","margin-bottom: 20px;",4,"ngIf"],["class","row mb-3",4,"tmIsLoading"],[3,"shouldShowRetry","message","retryEvent"],[4,"tmIsLoading"],[1,"card","bg-light",2,"margin-bottom","20px"],[1,"card-body"],["href","/web/instructor/getting-started","target","_blank","rel","noopener noreferrer"],["href","/web","target","_blank","rel","noopener noreferrer"],[1,"row","mb-3"],[1,"col-4"],["tmRouterLink","/web/instructor/courses",1,"btn","btn-success",3,"queryParams"],[1,"fas","fa-plus"],["class","col-8",4,"ngIf"],[1,"col-8"],[1,"float-right"],[1,"d-inline"],["data-toggle","buttons",1,"btn-group"],["id","sort-course-id",1,"btn","btn-light",3,"disabled","click"],["id","sort-course-name",1,"btn","btn-light",3,"disabled","click"],["id","sort-course-date",1,"btn","btn-light",3,"disabled","click"],[4,"ngIf"],["id","course-tab","class","card",4,"ngFor","ngForOf"],["id","course-tab",1,"card"],["id","course-tab-header",1,"card-header","bg-primary","text-white","cursor-pointer",3,"click"],["id","course-details"],["class","card-header-btn-toolbar",4,"ngIf"],[3,"isExpanded"],["class","card-body padding-0",4,"ngIf"],[1,"card-header-btn-toolbar"],["ngbDropdown",""],["ngbDropdownToggle","",1,"btn","btn-primary","btn-sm"],["ngbDropdownMenu","",3,"click"],["tmRouterLink","/web/instructor/courses/details",1,"btn","btn-info","btn-sm","dropdown-item",3,"queryParams"],["tmRouterLink","/web/instructor/courses/edit",1,"btn","btn-light","btn-sm","dropdown-item",3,"queryParams"],["tmRouterLink","/web/instructor/sessions",1,"btn","btn-light","btn-sm","dropdown-item",3,"queryParams"],["id","btn-course","ngbDropdownToggle","",1,"btn","btn-primary","btn-sm"],["id","btn-archive-course","ngbTooltip","Archive the course so that it will not be shown in the home page any more (you can still access it from the 'Courses' tab)",1,"btn","btn-light","btn-sm","dropdown-item",3,"click"],["tmRouterLink","/web/instructor/courses/enroll",1,"btn","btn-info","btn-sm","dropdown-item",3,"queryParams"],["id","btn-delete-course","ngbTooltip","Delete the course and its corresponding students and sessions",1,"btn","btn-light","btn-sm","dropdown-item",3,"click"],[1,"card-body","padding-0"],[3,"sessionsTableRowModels","sessionsTableRowModelsSortBy","sessionsTableRowModelsSortOrder","courseCandidates","headerColorScheme","columnsToShow","sortSessionsTableRowModelsEvent","loadResponseRateEvent","editSessionEvent","moveSessionToRecycleBinEvent","copySessionEvent","submitSessionAsInstructorEvent","viewSessionResultEvent","publishSessionEvent","unpublishSessionEvent","downloadSessionResultsEvent","resendResultsLinkToStudentsEvent","sendRemindersToStudentsEvent",4,"tmIsLoading"],[3,"sessionsTableRowModels","sessionsTableRowModelsSortBy","sessionsTableRowModelsSortOrder","courseCandidates","headerColorScheme","columnsToShow","sortSessionsTableRowModelsEvent","loadResponseRateEvent","editSessionEvent","moveSessionToRecycleBinEvent","copySessionEvent","submitSessionAsInstructorEvent","viewSessionResultEvent","publishSessionEvent","unpublishSessionEvent","downloadSessionResultsEvent","resendResultsLinkToStudentsEvent","sendRemindersToStudentsEvent"]],template:function(s,e){1&s&&(f.Wb(0,"h1"),f.Qc(1,"Home"),f.Vb(),f.Oc(2,P,9,0,"div",0),f.Oc(3,N,6,3,"div",1),f.Wb(4,"tm-loading-retry",2),f.ic("retryEvent",(function(){return e.loadCourses()})),f.Oc(5,J,2,1,"div",3),f.Vb()),2&s&&(f.Cb(2),f.sc("ngIf",e.isNewUser),f.Cb(1),f.sc("tmIsLoading",!e.hasCoursesLoaded),f.Cb(1),f.sc("shouldShowRetry",e.hasCoursesLoadingFailed)("message","Something went wrong"),f.Cb(1),f.sc("tmIsLoading",!e.hasCoursesLoaded))},directives:[t.u,A.a,F.a,W.a,t.t,x.a,r.g,r.k,r.i,r.w,B.a],styles:[".padding-0[_ngcontent-%COMP%]{padding:0}.btn-toolbar[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:2px;-ms-flex-pack:end;justify-content:flex-end}.btn-toolbar[_ngcontent-%COMP%], .course-header[_ngcontent-%COMP%]{white-space:nowrap;-ms-flex-align:center;align-items:center}.course-header[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex}.dropdown-item[_ngcontent-%COMP%], .no-border[_ngcontent-%COMP%]{border:none}"],data:{animation:[p.a]}}),s})()}];let G=(()=>{class s{}return s.\u0275mod=f.Ob({type:s}),s.\u0275inj=f.Nb({factory:function(e){return new(e||s)},imports:[[t.c,u.a,n.j,i.h.forChild(z),r.d,r.j,r.y,a.a,c.a,d.a,b.a]]}),s})()},uBDz:function(s,e,o){"use strict";o.d(e,"a",(function(){return t}));const t=o("vMQM").a.FEEDBACK_SESSION_NAME_MAX_LENGTH}}]);