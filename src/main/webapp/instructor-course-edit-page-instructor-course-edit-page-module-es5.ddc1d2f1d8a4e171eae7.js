function _slicedToArray(e,n){return _arrayWithHoles(e)||_iterableToArrayLimit(e,n)||_unsupportedIterableToArray(e,n)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,n):void 0}}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);i<n;i++)t[i]=e[i];return t}function _iterableToArrayLimit(e,n){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],t=!0,s=!1,o=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done)&&(i.push(r.value),!n||i.length!==n);t=!0);}catch(a){s=!0,o=a}finally{try{t||null==c.return||c.return()}finally{if(s)throw o}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperty(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,i){return n&&_defineProperties(e.prototype,n),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"++8I":function(e,n,i){"use strict";i.d(n,"a",(function(){return r}));var t=i("vMQM"),s=i("fXoL"),o=i("mW1j"),r=function(){var e=function(){function e(n){_classCallCheck(this,e),this.httpRequestService=n}return _createClass(e,[{key:"loadInstructors",value:function(e){var n={courseid:e.courseId};return e.intent&&(n.intent=e.intent),this.httpRequestService.get(t.d.INSTRUCTORS,n)}},{key:"getInstructor",value:function(e){var n={courseid:e.courseId,intent:e.intent};return e.feedbackSessionName&&(n.fsname=e.feedbackSessionName),e.key&&(n.key=e.key),e.moderatedPerson&&(n.moderatedperson=e.moderatedPerson),e.previewAs&&(n.previewas=e.previewAs),this.httpRequestService.get(t.d.INSTRUCTOR,n)}},{key:"createInstructor",value:function(e){return this.httpRequestService.post(t.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}},{key:"updateInstructor",value:function(e){return this.httpRequestService.put(t.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}},{key:"deleteInstructor",value:function(e){var n={courseid:e.courseId};return e.instructorEmail&&(n.instructoremail=e.instructorEmail),e.instructorId&&(n.instructorid=e.instructorId),this.httpRequestService.delete(t.d.INSTRUCTOR,n)}},{key:"loadInstructorPrivilege",value:function(e){var n={courseid:e.courseId};return e.feedbackSessionName&&(n.fsname=e.feedbackSessionName),e.sectionName&&(n.sectionname=e.sectionName),e.instructorRole&&(n.instructorrole=e.instructorRole),e.instructorEmail&&(n.instructoremail=e.instructorEmail),e.instructorId&&(n.instructorid=e.instructorId),this.httpRequestService.get(t.d.INSTRUCTOR_PRIVILEGE,n)}},{key:"updateInstructorPrivilege",value:function(e){return this.httpRequestService.put(t.d.INSTRUCTOR_PRIVILEGE,{courseid:e.courseId,instructoremail:e.instructorEmail},e.requestBody)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(s.ec(o.a))},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"/Tzu":function(e,n,i){"use strict";i.d(n,"a",(function(){return t}));var t=function(e){return e[e.WARNING=0]="WARNING",e[e.DANGER=1]="DANGER",e[e.INFO=2]="INFO",e[e.NEUTRAL=3]="NEUTRAL",e[e.LOAD=4]="LOAD",e}({})},"2SuZ":function(e,n,i){"use strict";i.d(n,"a",(function(){return o}));var t=i("R8lv"),s=i("fXoL"),o=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){switch(e){case t.i.INSTRUCTOR_PERMISSION_ROLE_COOWNER:return"Co-owner: Can do everything.";case t.i.INSTRUCTOR_PERMISSION_ROLE_MANAGER:return"Manager: Can do everything except for deleting/restoring the course.";case t.i.INSTRUCTOR_PERMISSION_ROLE_OBSERVER:return"Observer: Can only view information(students, submissions, comments etc.). Cannot edit/delete/submit anything.";case t.i.INSTRUCTOR_PERMISSION_ROLE_TUTOR:return"Tutor: Can view student details, give/view comments, submit/view responses for sessions.";case t.i.INSTRUCTOR_PERMISSION_ROLE_CUSTOM:default:return"Custom: No access by default. Any access needs to be granted explicitly."}}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=s.Pb({name:"instructorRoleDescription",type:e,pure:!0}),e}()},"41eB":function(e,n,i){"use strict";i.r(n),i.d(n,"InstructorCourseEditPageModule",(function(){return xe}));var t=i("ofXK"),s=i("3Pt+"),o=i("tyNb"),r=i("1kSV"),c=i("n6pr"),a=i("mYbV"),u=i("aSpy"),l=i("SEFB"),d=i("TOej"),b=i("cp0P"),g=i("LRne"),f=i("nYR2"),m=i("vkgz"),S=i("0EUg"),v=i("R8lv"),p=i("9jjE"),I=i("3m/I"),h=i("Mdjh"),C=i("/Tzu"),y=i("JUCI"),M=i("SX/I"),O=i("RkgC"),V=i("fXoL");function k(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div",26),V.Wb(1,"label"),V.Wb(2,"input",27),V.ic("ngModelChange",(function(e){V.Fc(i);var t=n.$implicit,s=V.kc().index;return V.kc().editSectionToSectionLevelPermission(s,t,e)})),V.Vb(),V.Qc(3),V.Vb(),V.Vb()}if(2&e){var t=n.$implicit,s=V.kc().$implicit,o=V.kc();V.Cb(2),V.sc("ngModel",s.sectionNames.includes(t))("disabled",!s.sectionNames.includes(t)&&o.hasSectionLevelPermission(t)),V.Cb(1),V.Sc(" ","None"===t?"Students not in a section":t," ")}}function w(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",28),V.ic("click",(function(){V.Fc(i);var e=V.kc().index;return V.kc().addSessionLevelPermission(e)})),V.Qc(1,"Give different permissions for sessions in this section"),V.Vb()}if(2&e){var t=V.kc(2);V.sc("disabled",0==t.allSessions.length)}}function E(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",29),V.ic("click",(function(){V.Fc(i);var e=V.kc().index;return V.kc().deleteSessionLevelPermission(e)})),V.Qc(1,"Delete session-level permissions"),V.Vb()}}function R(e,n){if(1&e){var i=V.Xb();V.Wb(0,"tr"),V.Wb(1,"th",33),V.Qc(2),V.Vb(),V.Wb(3,"td"),V.Wb(4,"input",7),V.ic("ngModelChange",(function(e){V.Fc(i);var t=n.index,s=V.kc(2).index;return V.kc().triggerSessionLevelPermissionChange(s,t,"canSubmitSessionInSections",e)})),V.Vb(),V.Vb(),V.Wb(5,"td"),V.Wb(6,"input",9),V.ic("ngModelChange",(function(e){V.Fc(i);var t=n.index,s=V.kc(2).index;return V.kc().triggerSessionLevelPermissionChange(s,t,"canViewSessionInSections",e)})),V.Vb(),V.Vb(),V.Wb(7,"td"),V.Wb(8,"input",7),V.ic("ngModelChange",(function(e){V.Fc(i);var t=n.index,s=V.kc(2).index;return V.kc().triggerSessionLevelPermissionChange(s,t,"canModifySessionCommentsInSections",e)})),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=n.$implicit;V.Cb(2),V.Rc(t.sessionName),V.Cb(2),V.sc("ngModel",t.privilege.canSubmitSessionInSections),V.Cb(2),V.sc("disabled",t.privilege.canModifySessionCommentsInSections)("ngModel",t.privilege.canViewSessionInSections||t.privilege.canModifySessionCommentsInSections),V.Cb(2),V.sc("ngModel",t.privilege.canModifySessionCommentsInSections)}}function P(e,n){if(1&e&&(V.Wb(0,"table",30),V.Wb(1,"thead"),V.Wb(2,"tr"),V.Wb(3,"th",31),V.Qc(4,"Session Name"),V.Vb(),V.Wb(5,"th",31),V.Qc(6,"Submit Responses and Add Comments"),V.Vb(),V.Wb(7,"th",31),V.Qc(8,"View Responses and Comments"),V.Vb(),V.Wb(9,"th",31),V.Qc(10,"Edit/Delete Responses/Comments by Others"),V.Vb(),V.Vb(),V.Vb(),V.Wb(11,"tbody"),V.Oc(12,R,9,5,"tr",32),V.Vb(),V.Vb()),2&e){var i=V.kc().$implicit;V.Cb(12),V.sc("ngForOf",i.sessionLevel)}}function T(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div",12),V.Wb(1,"div",13),V.Wb(2,"div",4),V.Wb(3,"div",14),V.Wb(4,"p"),V.Wb(5,"strong"),V.Qc(6," But in section(s) "),V.Vb(),V.Vb(),V.Vb(),V.Wb(7,"div",15),V.Wb(8,"div",16),V.Oc(9,k,4,3,"div",17),V.Vb(),V.Vb(),V.Wb(10,"div",18),V.Wb(11,"button",19),V.ic("click",(function(){V.Fc(i);var e=n.index;return V.kc().removeSectionLevelPermission(e)})),V.Rb(12,"i",20),V.Vb(),V.Vb(),V.Vb(),V.Wb(13,"div",4),V.Wb(14,"div",21),V.Wb(15,"strong"),V.Qc(16," the instructor can only, "),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(17,"div",22),V.Wb(18,"div",4),V.Wb(19,"div",5),V.Wb(20,"label"),V.Wb(21,"input",7),V.ic("ngModelChange",(function(e){V.Fc(i);var t=n.index;return V.kc().triggerSectionLevelPermissionChange(t,"canViewStudentInSections",e)})),V.Vb(),V.Qc(22,"\xa0 View Students' Details "),V.Vb(),V.Vb(),V.Wb(23,"div",8),V.Wb(24,"label"),V.Wb(25,"input",7),V.ic("ngModelChange",(function(e){V.Fc(i);var t=n.index;return V.kc().triggerSectionLevelPermissionChange(t,"canSubmitSessionInSections",e)})),V.Vb(),V.Qc(26,"\xa0 Sessions: Submit Responses and Add Comments "),V.Vb(),V.Wb(27,"label"),V.Wb(28,"input",9),V.ic("ngModelChange",(function(e){V.Fc(i);var t=n.index;return V.kc().triggerSectionLevelPermissionChange(t,"canViewSessionInSections",e)})),V.Vb(),V.Qc(29,"\xa0 Sessions: View Responses and Comments "),V.Vb(),V.Wb(30,"label"),V.Wb(31,"input",7),V.ic("ngModelChange",(function(e){V.Fc(i);var t=n.index;return V.kc().triggerSectionLevelPermissionChange(t,"canModifySessionCommentsInSections",e)})),V.Vb(),V.Qc(32,"\xa0 Sessions: Edit/Delete Responses/Comments by Others "),V.Vb(),V.Vb(),V.Vb(),V.Oc(33,w,2,1,"button",23),V.Oc(34,E,2,0,"button",24),V.Oc(35,P,13,1,"table",25),V.Vb(),V.Vb()}if(2&e){var t=n.$implicit,s=V.kc();V.Cb(9),V.sc("ngForOf",s.allSections),V.Cb(12),V.sc("ngModel",t.privilege.canViewStudentInSections),V.Cb(4),V.sc("ngModel",t.privilege.canSubmitSessionInSections),V.Cb(3),V.sc("disabled",t.privilege.canModifySessionCommentsInSections)("ngModel",t.privilege.canViewSessionInSections||t.privilege.canModifySessionCommentsInSections),V.Cb(3),V.sc("ngModel",t.privilege.canModifySessionCommentsInSections),V.Cb(2),V.sc("ngIf",0==t.sessionLevel.length),V.Cb(1),V.sc("ngIf",0!=t.sessionLevel.length),V.Cb(1),V.sc("ngIf",0!=t.sessionLevel.length)}}var W,N=((W=function(){function e(){_classCallCheck(this,e),this.permission={privilege:{canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1},sectionLevel:[]},this.permissionChange=new V.n,this.allSections=[],this.allSessions=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"hasSectionLevelPermission",value:function(e){return this.permission.sectionLevel.some((function(n){return n.sectionNames.includes(e)}))}},{key:"triggerOverallPermissionChange",value:function(e,n){var i=this.deepCopy(this.permission);i.privilege[e]=n,this.permissionChange.emit(i)}},{key:"triggerSectionLevelPermissionChange",value:function(e,n,i){var t=this.deepCopy(this.permission);t.sectionLevel[e].privilege[n]=i,this.permissionChange.emit(t)}},{key:"triggerSessionLevelPermissionChange",value:function(e,n,i,t){var s=this.deepCopy(this.permission);s.sectionLevel[e].sessionLevel[n].privilege[i]=t,this.permissionChange.emit(s)}},{key:"addSectionLevelPermission",value:function(){var e=this.deepCopy(this.permission);e.sectionLevel.push({sectionNames:[],privilege:{canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1},sessionLevel:[]}),this.permissionChange.emit(e)}},{key:"addSessionLevelPermission",value:function(e){var n=this.deepCopy(this.permission);n.sectionLevel[e].sessionLevel=this.allSessions.map((function(e){return{sessionName:e,privilege:{canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1}}})),this.permissionChange.emit(n)}},{key:"editSectionToSectionLevelPermission",value:function(e,n,i){var t=this.deepCopy(this.permission),s=new Set(t.sectionLevel[e].sectionNames);i?s.add(n):s.delete(n),t.sectionLevel[e].sectionNames=Array.from(s),this.permissionChange.emit(t)}},{key:"deleteSessionLevelPermission",value:function(e){var n=this.deepCopy(this.permission);n.sectionLevel[e].sessionLevel=[],this.permissionChange.emit(n)}},{key:"removeSectionLevelPermission",value:function(e){var n=this.deepCopy(this.permission);n.sectionLevel.splice(e,1),this.permissionChange.emit(n)}},{key:"deepCopy",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"hasSectionLevelPermissionForAllSections",get:function(){return this.permission.sectionLevel.length>=this.allSections.length||this.permission.sectionLevel.map((function(e){return e.sectionNames.length})).reduce((function(e,n){return e+n}),0)>=this.allSections.length}}]),e}()).\u0275fac=function(e){return new(e||W)},W.\u0275cmp=V.Kb({type:W,selectors:[["tm-custom-privilege-setting-panel"]],inputs:{permission:"permission",allSections:"allSections",allSessions:"allSessions"},outputs:{permissionChange:"permissionChange"},decls:43,vars:11,consts:[[1,"col-xs-12"],[1,"card","bg-light","border-info"],[1,"card-header","bg-info","text-white"],["id","custom-course",1,"card-body"],[1,"row"],[1,"col-6"],[1,"col-12"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"col-6","border-left-gray"],["type","checkbox",3,"disabled","ngModel","ngModelChange"],["class","card bg-light border-info top-margin",4,"ngFor","ngForOf"],["id","btn-add-section-level",1,"btn","btn-link",3,"disabled","click"],[1,"card","bg-light","border-info","top-margin"],[1,"card-header","bg-info","text-white","d-block"],[1,"col","col-sm-2"],[1,"col-6","col-sm-9"],["id","custom-sections",1,"row"],["class","col",4,"ngFor","ngForOf"],[1,"col","col-sm-1"],["id","btn-custom-sections-cancel","type","button",1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"col-sm-12"],["id","custom-sections-access-levels",1,"card-body"],["id","btn-add-session-level","class","btn btn-link",3,"disabled","click",4,"ngIf"],["class","btn btn-link",3,"click",4,"ngIf"],["id","custom-sessions","class","table table-striped table-responsive",4,"ngIf"],[1,"col"],["type","checkbox",3,"ngModel","disabled","ngModelChange"],["id","btn-add-session-level",1,"btn","btn-link",3,"disabled","click"],[1,"btn","btn-link",3,"click"],["id","custom-sessions",1,"table","table-striped","table-responsive"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(e,n){1&e&&(V.Wb(0,"div",0),V.Wb(1,"div",1),V.Wb(2,"div",2),V.Wb(3,"strong"),V.Qc(4," In general, this instructor can "),V.Vb(),V.Vb(),V.Wb(5,"div",3),V.Wb(6,"div",4),V.Wb(7,"div",5),V.Wb(8,"div",6),V.Wb(9,"label"),V.Wb(10,"input",7),V.ic("ngModelChange",(function(e){return n.triggerOverallPermissionChange("canModifyCourse",e)})),V.Vb(),V.Qc(11," Edit/Delete/Restore Course "),V.Vb(),V.Vb(),V.Wb(12,"div",6),V.Wb(13,"label"),V.Wb(14,"input",7),V.ic("ngModelChange",(function(e){return n.triggerOverallPermissionChange("canModifyInstructor",e)})),V.Vb(),V.Qc(15," Add/Edit/Delete Instructors "),V.Vb(),V.Vb(),V.Wb(16,"div",6),V.Wb(17,"label"),V.Wb(18,"input",7),V.ic("ngModelChange",(function(e){return n.triggerOverallPermissionChange("canModifySession",e)})),V.Vb(),V.Qc(19," Create/Edit/Delete/Restore Sessions "),V.Vb(),V.Vb(),V.Wb(20,"div",6),V.Wb(21,"label"),V.Wb(22,"input",7),V.ic("ngModelChange",(function(e){return n.triggerOverallPermissionChange("canModifyStudent",e)})),V.Vb(),V.Qc(23," Enroll/Edit/Delete Students "),V.Vb(),V.Vb(),V.Vb(),V.Wb(24,"div",8),V.Wb(25,"div",6),V.Wb(26,"label"),V.Wb(27,"input",7),V.ic("ngModelChange",(function(e){return n.triggerOverallPermissionChange("canViewStudentInSections",e)})),V.Vb(),V.Qc(28," View Students' Details "),V.Vb(),V.Vb(),V.Rb(29,"hr"),V.Wb(30,"div",6),V.Wb(31,"label"),V.Wb(32,"input",7),V.ic("ngModelChange",(function(e){return n.triggerOverallPermissionChange("canSubmitSessionInSections",e)})),V.Vb(),V.Qc(33," Sessions: Submit Responses and Add Comments "),V.Vb(),V.Wb(34,"label"),V.Wb(35,"input",9),V.ic("ngModelChange",(function(e){return n.triggerOverallPermissionChange("canViewSessionInSections",e)})),V.Vb(),V.Qc(36," Sessions: View Responses and Comments "),V.Vb(),V.Wb(37,"label"),V.Wb(38,"input",7),V.ic("ngModelChange",(function(e){return n.triggerOverallPermissionChange("canModifySessionCommentsInSections",e)})),V.Vb(),V.Qc(39," Sessions: Edit/Delete Responses/Comments by Others "),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Oc(40,T,36,9,"div",10),V.Wb(41,"button",11),V.ic("click",(function(){return n.addSectionLevelPermission()})),V.Qc(42," Give different permissions for a specific section "),V.Vb(),V.Vb()),2&e&&(V.Cb(10),V.sc("ngModel",n.permission.privilege.canModifyCourse),V.Cb(4),V.sc("ngModel",n.permission.privilege.canModifyInstructor),V.Cb(4),V.sc("ngModel",n.permission.privilege.canModifySession),V.Cb(4),V.sc("ngModel",n.permission.privilege.canModifyStudent),V.Cb(5),V.sc("ngModel",n.permission.privilege.canViewStudentInSections),V.Cb(5),V.sc("ngModel",n.permission.privilege.canSubmitSessionInSections),V.Cb(3),V.sc("disabled",n.permission.privilege.canModifySessionCommentsInSections)("ngModel",n.permission.privilege.canViewSessionInSections||n.permission.privilege.canModifySessionCommentsInSections),V.Cb(3),V.sc("ngModel",n.permission.privilege.canModifySessionCommentsInSections),V.Cb(2),V.sc("ngForOf",n.permission.sectionLevel),V.Cb(1),V.sc("disabled",n.hasSectionLevelPermissionForAllSections))},directives:[s.a,s.p,s.s,t.t,t.u],styles:[".top-margin[_ngcontent-%COMP%]{margin-top:15px}.border-left-gray[_ngcontent-%COMP%]{border-left:1px solid #ddd}"]}),W),L=i("Wsbs"),_=i("UGSt"),x=i("2SuZ");function A(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",21),V.ic("click",(function(){return V.Fc(i),V.kc().sendRemindJoinEmail.emit()})),V.Rb(1,"i",22),V.Qc(2," Resend Invite "),V.Vb()}if(2&e){var t=V.kc();V.uc("id","btn-resend-invite-",t.instructorIndex+1,""),V.sc("disabled",!t.currInstructorCoursePrivilege.canModifyInstructor||t.instructor.isSavingInstructorEdit)}}function D(e,n){1&e&&V.Rb(0,"i",25)}function F(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",23),V.ic("click",(function(){return V.Fc(i),V.kc().triggerModelChange("isEditing",!0)})),V.Oc(1,D,1,0,"i",24),V.Qc(2," Edit "),V.Vb()}if(2&e){var t=V.kc();V.uc("id","btn-edit-instructor-",t.instructorIndex+1,""),V.sc("disabled",!t.currInstructorCoursePrivilege.canModifyInstructor||t.instructor.isSavingInstructorEdit),V.Cb(1),V.sc("ngIf",!t.instructor.isSavingInstructorEdit)}}function Q(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",23),V.ic("click",(function(){return V.Fc(i),V.kc().cancelEditing.emit()})),V.Rb(1,"i",26),V.Qc(2," Cancel "),V.Vb()}if(2&e){var t=V.kc();V.uc("id","btn-cancel-instructor-",t.instructorIndex+1,""),V.sc("disabled",t.isSavingNewInstructor)}}function j(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",27),V.ic("click",(function(){return V.Fc(i),V.kc().deleteInstructor.emit()})),V.Rb(1,"i",28),V.Qc(2," Delete "),V.Vb()}if(2&e){var t=V.kc();V.uc("id","btn-delete-instructor-",t.instructorIndex+1,""),V.sc("disabled",!t.currInstructorCoursePrivilege.canModifyInstructor||t.instructor.isSavingInstructorEdit)}}function U(e,n){if(1&e&&(V.Wb(0,"div",10),V.Rb(1,"input",31),V.Vb()),2&e){var i=V.kc(2);V.Cb(1),V.uc("id","google-id-instructor-",i.instructorIndex+1,""),V.sc("ngModel",i.instructor.googleId)}}function X(e,n){1&e&&(V.Wb(0,"span",32),V.Qc(1," Not available. Instructor is yet to join this course. "),V.Vb())}function J(e,n){if(1&e&&(V.Wb(0,"div",8),V.Wb(1,"label",9),V.Qc(2," Google ID: "),V.Vb(),V.Oc(3,U,2,2,"div",29),V.Oc(4,X,2,0,"span",30),V.Vb()),2&e){var i=V.kc();V.Cb(3),V.sc("ngIf",i.instructor.joinState==i.JoinState.JOINED),V.Cb(1),V.sc("ngIf",i.instructor.joinState==i.JoinState.NOT_JOINED)}}function q(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",37),V.ic("click",(function(e){V.Fc(i);var n=V.kc().$implicit;return V.kc(2).viewRolePrivilegeModel.emit(n),e.stopPropagation()})),V.Qc(1,"View Details"),V.Vb()}}function G(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div",34),V.Wb(1,"label"),V.Wb(2,"input",35),V.ic("click",(function(){V.Fc(i);var e=n.$implicit;return V.kc(2).triggerModelChange("role",e)})),V.Vb(),V.Qc(3),V.lc(4,"instructorRoleDescription"),V.Oc(5,q,2,0,"button",36),V.Vb(),V.Vb()}if(2&e){var t=n.$implicit,s=V.kc(2);V.Cb(2),V.tc("id",t+s.instructorIndex+1),V.sc("checked",t==s.instructor.role)("disabled",!s.instructor.isEditing),V.Cb(1),V.Sc(" ",V.mc(4,5,t)," "),V.Cb(2),V.sc("ngIf",t!=s.InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_CUSTOM)}}function B(e,n){if(1&e&&(V.Ub(0),V.Oc(1,G,6,7,"div",33),V.lc(2,"enumToArray"),V.Tb()),2&e){var i=V.kc();V.Cb(1),V.sc("ngForOf",V.mc(2,1,i.InstructorPermissionRole))}}function z(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",37),V.ic("click",(function(e){V.Fc(i);var n=V.kc(2);return n.viewRolePrivilegeModel.emit(n.instructor.role),e.stopPropagation()})),V.Qc(1,"View Details"),V.Vb()}}function Z(e,n){if(1&e&&(V.Ub(0),V.Wb(1,"span",38),V.Qc(2),V.lc(3,"instructorRoleDescription"),V.Vb(),V.Oc(4,z,2,0,"button",36),V.Tb()),2&e){var i=V.kc();V.Cb(1),V.uc("id","role-instructor-",i.instructorIndex+1,""),V.Cb(1),V.Rc(V.mc(3,3,i.instructor.role)),V.Cb(2),V.sc("ngIf",i.instructor.role!=i.InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_CUSTOM)}}function K(e,n){if(1&e){var i=V.Xb();V.Wb(0,"tm-custom-privilege-setting-panel",39),V.ic("permissionChange",(function(e){return V.Fc(i),V.kc().triggerModelChange("permission",e)})),V.Vb()}if(2&e){var t=V.kc();V.uc("id","custom-access-instructor-",t.instructorIndex+1,""),V.sc("permission",t.instructor.permission)("allSections",t.allSections)("allSessions",t.allSessions)}}function $(e,n){1&e&&V.Rb(0,"tm-ajax-loading")}function H(e,n){1&e&&(V.Wb(0,"span"),V.Qc(1,"Save changes"),V.Vb())}function Y(e,n){1&e&&(V.Wb(0,"span"),V.Qc(1,"Add Instructor"),V.Vb())}function ee(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div"),V.Wb(1,"button",40),V.ic("click",(function(){return V.Fc(i),V.kc().saveInstructor.emit()})),V.Oc(2,$,1,0,"tm-ajax-loading",19),V.Oc(3,H,2,0,"span",19),V.Oc(4,Y,2,0,"span",19),V.Vb(),V.Vb()}if(2&e){var t=V.kc();V.Cb(1),V.uc("id","btn-save-instructor-",t.instructorIndex+1,""),V.sc("disabled",t.instructor.isSavingInstructorEdit||t.isSavingNewInstructor),V.Cb(1),V.sc("ngIf",t.instructor.isSavingInstructorEdit||t.isSavingNewInstructor),V.Cb(1),V.sc("ngIf",t.editMode==t.EditMode.EDIT),V.Cb(1),V.sc("ngIf",t.editMode==t.EditMode.ADD)}}var ne,ie,te=function(e){return{"fill-plain":e}},se=function(e){return e[e.EDIT=0]="EDIT",e[e.ADD=1]="ADD",e}({}),oe=((ne=function(){function e(){_classCallCheck(this,e),this.JoinState=v.j,this.InstructorPermissionRole=v.i,this.EditMode=se,this.editMode=se.EDIT,this.instructorIndex=0,this.instructor={googleId:"",courseId:"",email:"",isDisplayedToStudents:!0,displayedToStudentsAs:"",name:"",role:v.i.INSTRUCTOR_PERMISSION_ROLE_COOWNER,joinState:v.j.JOINED,permission:{privilege:{canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1},sectionLevel:[]},isEditing:!1,isSavingInstructorEdit:!1},this.instructorChange=new V.n,this.currInstructorCoursePrivilege={canModifyCourse:!0,canModifySession:!0,canModifyStudent:!0,canModifyInstructor:!0,canViewStudentInSections:!0,canModifySessionCommentsInSections:!0,canViewSessionInSections:!0,canSubmitSessionInSections:!0},this.allSections=[],this.allSessions=[],this.isSavingNewInstructor=!1,this.sendRemindJoinEmail=new V.n,this.cancelEditing=new V.n,this.deleteInstructor=new V.n,this.saveInstructor=new V.n,this.viewRolePrivilegeModel=new V.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"triggerModelChange",value:function(e,n){this.instructorChange.emit(Object.assign(Object.assign({},this.instructor),_defineProperty({},e,n)))}}]),e}()).\u0275fac=function(e){return new(e||ne)},ne.\u0275cmp=V.Kb({type:ne,selectors:[["tm-instructor-edit-panel"]],inputs:{editMode:"editMode",instructorIndex:"instructorIndex",instructor:"instructor",currInstructorCoursePrivilege:"currInstructorCoursePrivilege",allSections:"allSections",allSessions:"allSessions",isSavingNewInstructor:"isSavingNewInstructor"},outputs:{instructorChange:"instructorChange",sendRemindJoinEmail:"sendRemindJoinEmail",cancelEditing:"cancelEditing",deleteInstructor:"deleteInstructor",saveInstructor:"saveInstructor",viewRolePrivilegeModel:"viewRolePrivilegeModel"},decls:37,vars:27,consts:[[1,"card","bg-light","top-padded"],[1,"card-header","bg-primary","text-white","text-center"],[1,"card-header-btn-toolbar"],["class","btn btn-primary btn-sm","ngbTooltip","Send invitation email to the instructor","placement","top-right",3,"id","disabled","click",4,"ngIf"],["class","btn btn-primary btn-sm",3,"id","disabled","click",4,"ngIf"],["class","btn btn-primary btn-sm","ngbTooltip","Delete the instructor from the course","placement","top-right",3,"id","disabled","click",4,"ngIf"],[1,"card-body","text-center",3,"ngClass"],["class","form-row form-group",4,"ngIf"],[1,"form-row","form-group"],[1,"col-sm-3","control-label"],[1,"col-sm-9"],["maxlength","100","tabindex","4",1,"form-control",3,"id","ngModel","disabled","ngModelChange"],["maxlength","254","tabindex","5",1,"form-control",3,"id","ngModel","disabled","ngModelChange"],["checked","","type","checkbox",3,"id","ngModel","disabled","ngModelChange"],["ngbTooltip","If this is unselected, the instructor will be completely invisible to students. E.g. to give access to a colleague for \u2018auditing\u2019 your course",1,"ngb-tooltip-class"],["type","text","placeholder","E.g. Co-lecturer, Teaching Assistant (default: Instructor)",1,"form-control",3,"id","disabled","defaultValue","ngModel","ngModelChange"],[1,"form-row","form-group","align-items-start","text-left"],[1,"col-sm-3","control-label","text-center","text-md-right"],[1,"col-sm-9",3,"id"],[4,"ngIf"],["class","text-left",3,"id","permission","allSections","allSessions","permissionChange",4,"ngIf"],["ngbTooltip","Send invitation email to the instructor","placement","top-right",1,"btn","btn-primary","btn-sm",3,"id","disabled","click"],["aria-hidden","true",1,"fa","fa-envelope"],[1,"btn","btn-primary","btn-sm",3,"id","disabled","click"],["class","fa fa-pen","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"fa","fa-pen"],["aria-hidden","true",1,"fa","fa-times"],["ngbTooltip","Delete the instructor from the course","placement","top-right",1,"btn","btn-primary","btn-sm",3,"id","disabled","click"],["aria-hidden","true",1,"fa","fa-trash"],["class","col-sm-9",4,"ngIf"],["class","text-danger col-sm-9 text-left margin-bottom-label",4,"ngIf"],["maxlength","254","tabindex","3","disabled","",1,"form-control",3,"id","ngModel"],[1,"text-danger","col-sm-9","text-left","margin-bottom-label"],["class","form-row",4,"ngFor","ngForOf"],[1,"form-row"],["type","radio",3,"id","checked","disabled","click"],["type","button","class","btn btn-link padding-0",3,"click",4,"ngIf"],["type","button",1,"btn","btn-link","padding-0",3,"click"],[3,"id"],[1,"text-left",3,"id","permission","allSections","allSessions","permissionChange"],["tabindex","6","type","button",1,"btn","btn-success",3,"id","disabled","click"]],template:function(e,n){1&e&&(V.Wb(0,"div",0),V.Wb(1,"div",1),V.Wb(2,"strong"),V.Qc(3),V.Vb(),V.Wb(4,"div",2),V.Oc(5,A,3,2,"button",3),V.Oc(6,F,3,3,"button",4),V.Oc(7,Q,3,2,"button",4),V.Oc(8,j,3,2,"button",5),V.Vb(),V.Vb(),V.Wb(9,"div",6),V.Oc(10,J,5,2,"div",7),V.Wb(11,"div",8),V.Wb(12,"label",9),V.Qc(13," Name: "),V.Vb(),V.Wb(14,"div",10),V.Wb(15,"input",11),V.ic("ngModelChange",(function(e){return n.triggerModelChange("name",e)})),V.Vb(),V.Vb(),V.Vb(),V.Wb(16,"div",8),V.Wb(17,"label",9),V.Qc(18," Email: "),V.Vb(),V.Wb(19,"div",10),V.Wb(20,"input",12),V.ic("ngModelChange",(function(e){return n.triggerModelChange("email",e)})),V.Vb(),V.Vb(),V.Vb(),V.Wb(21,"div",8),V.Wb(22,"label",9),V.Wb(23,"input",13),V.ic("ngModelChange",(function(e){return n.triggerModelChange("isDisplayedToStudents",e)})),V.Vb(),V.Qc(24," \xa0 "),V.Wb(25,"span",14),V.Qc(26,"Display to students as:"),V.Vb(),V.Vb(),V.Wb(27,"div",10),V.Wb(28,"input",15),V.ic("ngModelChange",(function(e){return n.triggerModelChange("displayedToStudentsAs",e)})),V.Vb(),V.Vb(),V.Vb(),V.Wb(29,"div",16),V.Wb(30,"label",17),V.Qc(31," Access Level: "),V.Vb(),V.Wb(32,"div",18),V.Oc(33,B,3,3,"ng-container",19),V.Oc(34,Z,5,5,"ng-container",19),V.Vb(),V.Vb(),V.Oc(35,K,1,4,"tm-custom-privilege-setting-panel",20),V.Oc(36,ee,5,5,"div",19),V.Vb(),V.Vb()),2&e&&(V.Cb(3),V.Sc("Instructor ",n.instructorIndex+1,""),V.Cb(2),V.sc("ngIf",n.instructor.joinState==n.JoinState.NOT_JOINED&&n.editMode==n.EditMode.EDIT),V.Cb(1),V.sc("ngIf",!n.instructor.isEditing&&n.editMode==n.EditMode.EDIT),V.Cb(1),V.sc("ngIf",n.instructor.isEditing||n.editMode==n.EditMode.ADD),V.Cb(1),V.sc("ngIf",n.editMode==n.EditMode.EDIT),V.Cb(1),V.sc("ngClass",V.wc(25,te,n.editMode==n.EditMode.ADD)),V.Cb(1),V.sc("ngIf",n.editMode==n.EditMode.EDIT&&n.currInstructorCoursePrivilege.canModifyInstructor),V.Cb(5),V.uc("id","name-instructor-",n.instructorIndex+1,""),V.sc("ngModel",n.instructor.name)("disabled",!n.instructor.isEditing),V.Cb(5),V.uc("id","email-instructor-",n.instructorIndex+1,""),V.sc("ngModel",n.instructor.email)("disabled",!n.instructor.isEditing||n.instructor.joinState==n.JoinState.NOT_JOINED&&n.editMode!=n.EditMode.ADD),V.Cb(3),V.uc("id","checkbox-display-instructor-",n.instructorIndex+1,""),V.sc("ngModel",n.instructor.isDisplayedToStudents)("disabled",!n.instructor.isEditing),V.Cb(5),V.uc("id","displayed-name-instructor-",n.instructorIndex+1,""),V.sc("disabled",!n.instructor.isDisplayedToStudents||!n.instructor.isEditing)("defaultValue","Instructor")("ngModel",n.instructor.isDisplayedToStudents?n.instructor.displayedToStudentsAs:"(This instructor will NOT be displayed to students)"),V.Cb(4),V.uc("id","access-levels-instructor-",n.instructorIndex+1,""),V.Cb(1),V.sc("ngIf",n.instructor.isEditing),V.Cb(1),V.sc("ngIf",!n.instructor.isEditing),V.Cb(1),V.sc("ngIf",n.instructor.isEditing&&n.instructor.role==n.InstructorPermissionRole.INSTRUCTOR_PERMISSION_ROLE_CUSTOM),V.Cb(1),V.sc("ngIf",n.instructor.isEditing))},directives:[t.u,t.r,s.c,s.k,s.p,s.s,s.a,r.w,t.t,N,L.a],pipes:[_.a,x.a],styles:[".fill-plain[_ngcontent-%COMP%]{background-color:#eaeff5}.form-row[_ngcontent-%COMP%]{-ms-flex-align:center;align-items:center}.control-label[_ngcontent-%COMP%]{font-weight:700}@media (min-width:576px){.control-label[_ngcontent-%COMP%]{text-align:right}}.padding-0[_ngcontent-%COMP%]{padding:0}.margin-bottom-label[_ngcontent-%COMP%]{margin-bottom:.5rem}"]}),ne),re=i("RNOZ"),ce=((ie=function(){function e(n){_classCallCheck(this,e),this.activeModal=n,this.role=v.i.INSTRUCTOR_PERMISSION_ROLE_CUSTOM,this.instructorPrivilege={canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ie)(V.Qb(r.a))},ie.\u0275cmp=V.Kb({type:ie,selectors:[["tm-view-role-privileges-model"]],inputs:{role:"role",instructorPrivilege:"instructorPrivilege"},decls:34,vars:11,consts:[[1,"modal-header"],["id","role-title",1,"modal-title"],["data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],["id","view-instr-role-modal",1,"modal-body"],[1,"row"],[1,"col-sm-6"],["disabled","","type","checkbox",3,"checked"]],template:function(e,n){1&e&&(V.Wb(0,"div",0),V.Wb(1,"h4",1),V.Qc(2),V.lc(3,"instructorRoleName"),V.Vb(),V.Wb(4,"button",2),V.ic("click",(function(){return n.activeModal.dismiss()})),V.Qc(5,"x"),V.Vb(),V.Vb(),V.Wb(6,"div",3),V.Wb(7,"div",4),V.Wb(8,"div",5),V.Rb(9,"input",6),V.Qc(10," Edit/Delete/Restore Course "),V.Vb(),V.Wb(11,"div",5),V.Rb(12,"input",6),V.Qc(13," Add/Edit/Delete Instructors "),V.Vb(),V.Wb(14,"div",5),V.Rb(15,"input",6),V.Qc(16," Create/Edit/Delete/Restore Sessions "),V.Vb(),V.Wb(17,"div",5),V.Rb(18,"input",6),V.Qc(19," Enroll/Edit/Delete Students "),V.Vb(),V.Wb(20,"div",5),V.Rb(21,"input",6),V.Qc(22," View Students' Details "),V.Rb(23,"br"),V.Vb(),V.Wb(24,"div",5),V.Rb(25,"input",6),V.Qc(26," Sessions: Submit Responses and Add Comments "),V.Rb(27,"br"),V.Rb(28,"input",6),V.Qc(29," Sessions: View Responses and Comments "),V.Rb(30,"br"),V.Rb(31,"input",6),V.Qc(32," Sessions: Edit/Delete Responses/Comments by others "),V.Rb(33,"br"),V.Vb(),V.Vb(),V.Vb()),2&e&&(V.Cb(2),V.Sc("Permissions for ",V.mc(3,9,n.role),""),V.Cb(7),V.sc("checked",n.instructorPrivilege.canModifyCourse),V.Cb(3),V.sc("checked",n.instructorPrivilege.canModifyInstructor),V.Cb(3),V.sc("checked",n.instructorPrivilege.canModifySession),V.Cb(3),V.sc("checked",n.instructorPrivilege.canModifyStudent),V.Cb(3),V.sc("checked",n.instructorPrivilege.canViewStudentInSections),V.Cb(4),V.sc("checked",n.instructorPrivilege.canSubmitSessionInSections),V.Cb(3),V.sc("checked",n.instructorPrivilege.canViewSessionInSections),V.Cb(3),V.sc("checked",n.instructorPrivilege.canModifySessionCommentsInSections))},pipes:[re.a],styles:[""]}),ie),ae=i("Pvcr"),ue=i("A3DQ"),le=i("iRmZ"),de=i("++8I"),be=i("MbNv"),ge=i("Uqoa"),fe=i("vKUq"),me=i("nAaM"),Se=i("eQqG"),ve=i("Babz"),pe=i("Lcal"),Ie=i("W872"),he=["courseForm"];function Ce(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",39),V.ic("click",(function(){return V.Fc(i),V.kc(2).isEditingCourse=!0})),V.Rb(1,"i",40),V.Qc(2," Edit "),V.Vb()}if(2&e){var t=V.kc(2);V.sc("disabled",!t.currInstructorCoursePrivilege.canModifyCourse)}}function ye(e,n){if(1&e){var i=V.Xb();V.Wb(0,"button",41),V.ic("click",(function(){return V.Fc(i),V.kc(2).cancelEditingCourse()})),V.Rb(1,"i",42),V.Qc(2," Cancel "),V.Vb()}if(2&e){var t=V.kc(2);V.sc("disabled",t.isSavingCourseEdit)}}function Me(e,n){if(1&e&&(V.Wb(0,"option",43),V.Qc(1),V.Vb()),2&e){var i=n.$implicit;V.sc("value",i.id),V.Cb(1),V.Tc("",i.id," (",i.offset,")")}}function Oe(e,n){1&e&&V.Rb(0,"tm-ajax-loading")}function Ve(e,n){if(1&e&&(V.Wb(0,"button",44),V.Oc(1,Oe,1,0,"tm-ajax-loading",7),V.Qc(2," Save Changes "),V.Vb()),2&e){var i=V.kc(2);V.sc("disabled",i.form.invalid||i.isSavingCourseEdit),V.Cb(1),V.sc("ngIf",i.isSavingCourseEdit)}}function ke(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div",8),V.Wb(1,"div",9),V.Wb(2,"strong"),V.Qc(3,"Course"),V.Vb(),V.Wb(4,"div",10),V.Oc(5,Ce,3,1,"button",11),V.Oc(6,ye,3,1,"button",12),V.Wb(7,"button",13),V.ic("click",(function(){return V.Fc(i),V.kc().deleteCourse()})),V.Rb(8,"i",14),V.Qc(9," Delete "),V.Vb(),V.Vb(),V.Vb(),V.Wb(10,"div",15),V.Wb(11,"form",16,17),V.ic("ngSubmit",(function(){return V.Fc(i),V.kc().onSaveCourse()})),V.Wb(13,"div",18),V.Wb(14,"label",19),V.Qc(15,"Course ID:"),V.Vb(),V.Wb(16,"div",20),V.Wb(17,"input",21,22),V.ic("ngModelChange",(function(e){return V.Fc(i),V.kc().course.courseId=e})),V.Vb(),V.Vb(),V.Vb(),V.Wb(19,"div",18),V.Wb(20,"label",19),V.Qc(21,"Course Name:"),V.Vb(),V.Wb(22,"div",20),V.Wb(23,"input",23,24),V.ic("ngModelChange",(function(e){return V.Fc(i),V.kc().course.courseName=e})),V.Vb(),V.Wb(25,"div",25),V.Rb(26,"i",26),V.Qc(27," The field Course Name should not be empty. "),V.Vb(),V.Vb(),V.Vb(),V.Wb(28,"div",18),V.Wb(29,"label",27),V.Wb(30,"span",28),V.Qc(31," Time Zone:"),V.Vb(),V.Vb(),V.Wb(32,"div",29),V.Wb(33,"div",30),V.Wb(34,"select",31,32),V.ic("ngModelChange",(function(e){return V.Fc(i),V.kc().course.timeZone=e})),V.Oc(36,Me,2,3,"option",33),V.Vb(),V.Wb(37,"span",34),V.Wb(38,"button",35),V.ic("click",(function(){return V.Fc(i),V.kc().detectTimezone()})),V.Qc(39," Auto-Detect "),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Wb(40,"div",36),V.Wb(41,"div",37),V.Oc(42,Ve,3,2,"button",38),V.Vb(),V.Vb(),V.Vb(),V.Vb(),V.Vb()}if(2&e){var t=V.Cc(24),s=V.kc();V.Cb(5),V.sc("ngIf",!s.isEditingCourse),V.Cb(1),V.sc("ngIf",s.isEditingCourse),V.Cb(1),V.sc("disabled",!s.currInstructorCoursePrivilege.canModifyCourse||s.isSavingCourseEdit),V.Cb(10),V.sc("ngModel",s.course.courseId)("maxlength",s.FormValidator.COURSE_ID_MAX_LENGTH),V.Cb(6),V.sc("disabled",!s.isEditingCourse)("ngModel",s.course.courseName)("maxlength",s.FormValidator.COURSE_NAME_MAX_LENGTH),V.Cb(2),V.sc("hidden",t.valid||t.pristine&&t.untouched),V.Cb(9),V.sc("ngModel",s.course.timeZone)("disabled",!s.isEditingCourse),V.Cb(2),V.sc("ngForOf",s.timezones),V.Cb(2),V.sc("disabled",!s.isEditingCourse||s.isSavingCourseEdit),V.Cb(4),V.sc("ngIf",s.isEditingCourse)}}function we(e,n){if(1&e){var i=V.Xb();V.Ub(0),V.Wb(1,"tm-instructor-edit-panel",46),V.ic("instructorChange",(function(e){return V.Fc(i),n.$implicit.editPanel=e}))("viewRolePrivilegeModel",(function(e){return V.Fc(i),V.kc(2).viewRolePrivilegeModel(e)}))("deleteInstructor",(function(){V.Fc(i);var e=n.index;return V.kc(2).deleteInstructor(e)}))("saveInstructor",(function(){V.Fc(i);var e=n.index;return V.kc(2).saveInstructor(e)}))("cancelEditing",(function(){V.Fc(i);var e=n.index;return V.kc(2).cancelEditingInstructor(e)}))("sendRemindJoinEmail",(function(){V.Fc(i);var e=n.index;return V.kc(2).resendReminderEmail(e)})),V.Vb(),V.Rb(2,"br"),V.Tb()}if(2&e){var t=n.$implicit,s=n.index,o=V.kc(2);V.Cb(1),V.sc("editMode",o.EditMode.EDIT)("instructor",t.editPanel)("instructorIndex",s)("currInstructorCoursePrivilege",o.currInstructorCoursePrivilege)("allSections",o.allSections)("allSessions",o.allSessions)}}function Ee(e,n){if(1&e&&(V.Wb(0,"div"),V.Oc(1,we,3,6,"ng-container",45),V.Vb()),2&e){var i=V.kc();V.Cb(1),V.sc("ngForOf",i.instructorDetailPanels)}}function Re(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div",47),V.Wb(1,"button",48),V.ic("click",(function(){return V.Fc(i),V.kc().isAddingNewInstructor=!0})),V.Qc(2," Add New Instructor "),V.Vb(),V.Vb()}}function Pe(e,n){if(1&e){var i=V.Xb();V.Wb(0,"div"),V.Wb(1,"tm-instructor-edit-panel",49),V.ic("instructorChange",(function(e){return V.Fc(i),V.kc().newInstructorPanel=e}))("viewRolePrivilegeModel",(function(e){return V.Fc(i),V.kc().viewRolePrivilegeModel(e)}))("saveInstructor",(function(){return V.Fc(i),V.kc().addNewInstructor()}))("cancelEditing",(function(){return V.Fc(i),V.kc().isAddingNewInstructor=!1})),V.Vb(),V.Vb()}if(2&e){var t=V.kc();V.sc("@collapseAnim",void 0),V.Cb(1),V.sc("editMode",t.EditMode.ADD)("instructor",t.newInstructorPanel)("instructorIndex",t.instructorDetailPanels.length)("isSavingNewInstructor",t.isSavingNewInstructor)("currInstructorCoursePrivilege",t.currInstructorCoursePrivilege)("allSections",t.allSections)("allSessions",t.allSessions)}}var Te,We,Ne=function(e,n){return{questionId:e,section:n}},Le=function(e){return e<10?"0"+e:String(e)},_e=[{path:"",component:(Te=function(){function e(n,i,t,s,o,r,c,a,u,l,d,b){_classCallCheck(this,e),this.route=n,this.router=i,this.navigationService=t,this.timezoneService=s,this.studentService=o,this.instructorService=r,this.feedbackSessionsService=c,this.statusMessageService=a,this.courseService=u,this.authService=l,this.ngbModal=d,this.simpleModalService=b,this.EditMode=se,this.FormValidator=I.a,this.CoursesSectionQuestions=M.a,this.Sections=O.a,this.courseId="",this.timezones=[],this.isEditingCourse=!1,this.course={courseName:"",courseId:"",timeZone:"UTC",creationTimestamp:0,deletionTimestamp:0},this.originalCourse={courseName:"",courseId:"",timeZone:"UTC",creationTimestamp:0,deletionTimestamp:0},this.currInstructorGoogleId="",this.currInstructorCoursePrivilege={canModifyCourse:!0,canModifySession:!0,canModifyStudent:!0,canModifyInstructor:!0,canViewStudentInSections:!0,canModifySessionCommentsInSections:!0,canViewSessionInSections:!0,canSubmitSessionInSections:!0},this.instructorDetailPanels=[],this.isAddingNewInstructor=!1,this.newInstructorPanel={googleId:"",courseId:"",email:"",isDisplayedToStudents:!0,displayedToStudentsAs:"Instructor",name:"",role:v.i.INSTRUCTOR_PERMISSION_ROLE_COOWNER,joinState:v.j.NOT_JOINED,permission:{privilege:{canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1},sectionLevel:[]},isEditing:!0,isSavingInstructorEdit:!1},this.allSections=[],this.allSessions=[],this.isCourseLoading=!1,this.hasCourseLoadingFailed=!1,this.isInstructorsLoading=!1,this.hasInstructorsLoadingFailed=!1,this.isSavingCourseEdit=!1,this.isSavingNewInstructor=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe((function(n){e.courseId=n.courseid,e.loadCourseInfo(),e.loadCurrInstructorInfo(),Object(b.a)([e.studentService.getStudentsFromCourse({courseId:e.courseId}),e.feedbackSessionsService.getFeedbackSessionsForInstructor(e.courseId)]).subscribe((function(n){var i=n[1];e.allSections=Array.from(new Set(n[0].students.map((function(e){return e.sectionName})))),e.allSessions=i.feedbackSessions.map((function(e){return e.feedbackSessionName})),e.loadCourseInstructors()}))}));for(var n=0,i=Object.entries(this.timezoneService.getTzOffsets());n<i.length;n++){var t=_slicedToArray(i[n],2),s=t[0],o=t[1],r=Math.floor(Math.abs(o)/60),c=Math.abs(o)%60,a=o<0?"-":"+";this.timezones.push({id:s,offset:0===o?"UTC":"UTC ".concat(a).concat(Le(r),":").concat(Le(c))})}}},{key:"detectTimezone",value:function(){this.course.timeZone=this.timezoneService.guessTimezone()}},{key:"loadCourseInfo",value:function(){var e=this;this.hasCourseLoadingFailed=!1,this.isCourseLoading=!0,this.courseService.getCourseAsInstructor(this.courseId).pipe(Object(f.a)((function(){e.isCourseLoading=!1}))).subscribe((function(n){e.course=n,e.currInstructorCoursePrivilege=n.privileges||h.a,e.originalCourse=Object.assign({},n)}),(function(n){e.hasCourseLoadingFailed=!0,e.statusMessageService.showErrorToast(n.error.message)}))}},{key:"loadCurrInstructorInfo",value:function(){var e=this;this.authService.getAuthUser().subscribe((function(n){e.currInstructorGoogleId=void 0===n.user?"":n.user.id}),(function(n){e.statusMessageService.showErrorToast(n.error.message)}))}},{key:"deleteCourse",value:function(){var e=this;this.courseService.binCourse(this.courseId).subscribe((function(n){e.navigationService.navigateWithSuccessMessage(e.router,"/web/instructor/courses","The course ".concat(n.courseId," has been deleted. You can restore it from the Recycle Bin manually."))}),(function(n){e.statusMessageService.showErrorToast(n.error.message)}))}},{key:"onSaveCourse",value:function(){var e=this;this.form.invalid?Object.values(this.form.controls).forEach((function(e){return e.markAsTouched()})):(this.isSavingCourseEdit=!0,this.courseService.updateCourse(this.courseId,{courseName:this.course.courseName,timeZone:this.course.timeZone}).pipe(Object(f.a)((function(){return e.isSavingCourseEdit=!1}))).subscribe((function(n){e.statusMessageService.showSuccessToast("The course has been edited."),e.isEditingCourse=!1,e.course=n,e.originalCourse=Object.assign({},n)}),(function(n){e.statusMessageService.showErrorToast(n.error.message)})),Object.values(this.form.controls).forEach((function(e){return e.markAsUntouched()})),Object.values(this.form.controls).forEach((function(e){return e.markAsPristine()})))}},{key:"cancelEditingCourse",value:function(){this.course=Object.assign({},this.originalCourse),this.isEditingCourse=!1,Object.values(this.form.controls).forEach((function(e){return e.markAsPristine()})),Object.values(this.form.controls).forEach((function(e){return e.markAsUntouched()}))}},{key:"loadCourseInstructors",value:function(){var e=this;this.hasInstructorsLoadingFailed=!1,this.isInstructorsLoading=!0,this.instructorService.loadInstructors({courseId:this.courseId,intent:p.b.FULL_DETAIL}).subscribe((function(n){e.instructorDetailPanels=n.instructors.map((function(n){return{originalInstructor:Object.assign({},n),originalPanel:e.getInstructorEditPanelModel(n),editPanel:e.getInstructorEditPanelModel(n),isSavingInstructorEdit:!1}})),e.instructorDetailPanels.forEach((function(n){e.loadPermissionForInstructor(n)}))}),(function(n){e.hasInstructorsLoadingFailed=!0,e.statusMessageService.showErrorToast(n.error.message)}))}},{key:"getInstructorEditPanelModel",value:function(e){return{googleId:e.googleId,courseId:e.courseId,email:e.email,isDisplayedToStudents:e.isDisplayedToStudents,displayedToStudentsAs:e.displayedToStudentsAs,name:e.name,role:e.role,joinState:e.joinState,permission:{privilege:{canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1},sectionLevel:[]},isEditing:!1,isSavingInstructorEdit:!1}}},{key:"viewRolePrivilegeModel",value:function(e){var n=this,i=this.ngbModal.open(ce);i.result.then((function(){}),(function(){})),this.instructorService.loadInstructorPrivilege({courseId:this.courseId,instructorRole:e}).subscribe((function(n){i.componentInstance.instructorPrivilege=n,i.componentInstance.role=e}),(function(e){n.statusMessageService.showErrorToast(e.error.message)}))}},{key:"cancelEditingInstructor",value:function(e){var n=this.instructorDetailPanels[e];n.editPanel=JSON.parse(JSON.stringify(n.originalPanel)),n.editPanel.isSavingInstructorEdit=!1,n.editPanel.isEditing=!1}},{key:"saveInstructor",value:function(e){var n=this,i=this.instructorDetailPanels[e];i.editPanel.isSavingInstructorEdit=!0,this.instructorService.updateInstructor({courseId:i.originalInstructor.courseId,requestBody:{id:i.originalInstructor.joinState===v.j.JOINED?i.originalInstructor.googleId:void 0,name:i.editPanel.name,email:i.originalInstructor.joinState===v.j.JOINED?i.editPanel.email:i.originalInstructor.email,role:i.editPanel.role,displayName:i.editPanel.displayedToStudentsAs,isDisplayedToStudent:i.editPanel.isDisplayedToStudents}}).pipe(Object(f.a)((function(){return i.editPanel.isSavingInstructorEdit=!1}))).subscribe((function(e){i.editPanel.isEditing=!1,i.originalInstructor=Object.assign({},e);var t=i.editPanel.permission;i.editPanel=n.getInstructorEditPanelModel(e),i.editPanel.permission=t,n.updatePrivilegeForInstructor(i.originalInstructor,i.editPanel.permission),n.statusMessageService.showSuccessToast("The instructor ".concat(e.name," has been updated."))}),(function(e){n.statusMessageService.showErrorToast(e.error.message)})),i.originalPanel=JSON.parse(JSON.stringify(i.editPanel))}},{key:"deleteInstructor",value:function(e){var n=this,i=this.instructorDetailPanels[e];this.simpleModalService.openConfirmationModal("Delete instructor <strong>".concat(i.originalInstructor.name,"</strong>?"),C.a.DANGER,i.originalInstructor.googleId===this.currInstructorGoogleId?"Are you sure you want to delete your instructor role from the course <strong>".concat(i.originalInstructor.courseId,"</strong>?\n        You will not be able to access the course anymore."):"Are you sure you want to delete the instructor <strong>".concat(i.originalInstructor.name,"</strong> from the course <strong>").concat(i.originalInstructor.courseId,"</strong>?\n        He/she will not be able to access the course anymore.")).result.then((function(){n.instructorService.deleteInstructor({courseId:i.originalInstructor.courseId,instructorEmail:i.originalInstructor.email}).subscribe((function(){i.originalInstructor.googleId===n.currInstructorGoogleId?n.navigationService.navigateWithSuccessMessage(n.router,"/web/instructor/courses","Instructor is successfully deleted."):(n.instructorDetailPanels.splice(e,1),n.statusMessageService.showSuccessToast("Instructor is successfully deleted."))}),(function(e){n.statusMessageService.showErrorToast(e.error.message)}))}),(function(){}))}},{key:"resendReminderEmail",value:function(e){var n=this,i=this.instructorDetailPanels[e];this.simpleModalService.openConfirmationModal("Re-send invitation email?",C.a.INFO,"Do you wish to re-send the invitation email to instructor ".concat(i.originalInstructor.name," from course ").concat(i.originalInstructor.courseId,"?")).result.then((function(){n.courseService.remindInstructorForJoin(i.originalInstructor.courseId,i.originalInstructor.email).subscribe((function(e){n.statusMessageService.showSuccessToast(e.message)}),(function(e){n.statusMessageService.showErrorToast(e.error.message)}))}),(function(){}))}},{key:"addNewInstructor",value:function(){var e=this;this.isSavingNewInstructor=!0,this.instructorService.createInstructor({courseId:this.courseId,requestBody:{name:this.newInstructorPanel.name,email:this.newInstructorPanel.email,role:this.newInstructorPanel.role,displayName:this.newInstructorPanel.displayedToStudentsAs,isDisplayedToStudent:this.newInstructorPanel.isDisplayedToStudents}}).pipe(Object(f.a)((function(){return e.isSavingNewInstructor=!1}))).subscribe((function(n){var i={originalInstructor:Object.assign({},n),originalPanel:e.getInstructorEditPanelModel(n),editPanel:e.getInstructorEditPanelModel(n)};i.editPanel.permission=e.newInstructorPanel.permission,i.originalPanel=JSON.parse(JSON.stringify(i.editPanel)),e.instructorDetailPanels.push(i),e.statusMessageService.showSuccessToast('"The instructor '.concat(n.name," has been added successfully.\n          An email containing how to 'join' this course will be sent to ").concat(n.email,' in a few minutes."')),e.updatePrivilegeForInstructor(i.originalInstructor,i.editPanel.permission),e.isAddingNewInstructor=!1,e.newInstructorPanel={googleId:"",courseId:"",email:"",isDisplayedToStudents:!0,displayedToStudentsAs:"",name:"",role:v.i.INSTRUCTOR_PERMISSION_ROLE_COOWNER,joinState:v.j.NOT_JOINED,permission:{privilege:{canModifyCourse:!0,canModifySession:!0,canModifyStudent:!0,canModifyInstructor:!0,canViewStudentInSections:!0,canModifySessionCommentsInSections:!0,canViewSessionInSections:!0,canSubmitSessionInSections:!0},sectionLevel:[]},isEditing:!0,isSavingInstructorEdit:!1}}),(function(n){e.statusMessageService.showErrorToast(n.error.message)}))}},{key:"loadPermissionForInstructor",value:function(e){var n=this,i=e.originalInstructor,t=e.editPanel.permission;if(i.role===v.i.INSTRUCTOR_PERMISSION_ROLE_CUSTOM){var s=[];s.push(this.instructorService.loadInstructorPrivilege({courseId:i.courseId,instructorEmail:i.email}).pipe(Object(m.a)((function(e){t.privilege.canModifyCourse=e.canModifyCourse,t.privilege.canModifySession=e.canModifySession,t.privilege.canModifyStudent=e.canModifyStudent,t.privilege.canModifyInstructor=e.canModifyInstructor,t.privilege.canViewStudentInSections=e.canViewStudentInSections,t.privilege.canModifySessionCommentsInSections=e.canModifySessionCommentsInSections,t.privilege.canViewSessionInSections=e.canViewSessionInSections,t.privilege.canSubmitSessionInSections=e.canSubmitSessionInSections})))),this.allSections.forEach((function(e){var o={sectionNames:[e],privilege:{canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1,canSubmitSessionInSections:!1},sessionLevel:[]};t.sectionLevel.push(o),s.push(n.instructorService.loadInstructorPrivilege({sectionName:e,courseId:i.courseId,instructorEmail:i.email}).pipe(Object(m.a)((function(e){o.privilege.canViewStudentInSections=e.canViewStudentInSections,o.privilege.canModifySessionCommentsInSections=e.canModifySessionCommentsInSections,o.privilege.canViewSessionInSections=e.canViewSessionInSections,o.privilege.canSubmitSessionInSections=e.canSubmitSessionInSections})))),n.allSessions.forEach((function(t){s.push(n.instructorService.loadInstructorPrivilege({sectionName:e,feedbackSessionName:t,courseId:i.courseId,instructorEmail:i.email}).pipe(Object(m.a)((function(e){o.sessionLevel.push({sessionName:t,privilege:{canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:e.canModifySessionCommentsInSections,canViewSessionInSections:e.canViewSessionInSections,canSubmitSessionInSections:e.canSubmitSessionInSections}})}))))}))})),Object(b.a)(s).pipe(Object(f.a)((function(){return n.isInstructorsLoading=!1}))).subscribe((function(){t.sectionLevel=t.sectionLevel.filter((function(e){return e.privilege.canViewStudentInSections!==t.privilege.canViewStudentInSections||e.privilege.canModifySessionCommentsInSections!==t.privilege.canModifySessionCommentsInSections||e.privilege.canViewSessionInSections!==t.privilege.canViewSessionInSections||e.privilege.canSubmitSessionInSections!==t.privilege.canSubmitSessionInSections||e.sessionLevel.some((function(n){return e.privilege.canModifySessionCommentsInSections!==n.privilege.canModifySessionCommentsInSections||e.privilege.canViewSessionInSections!==n.privilege.canViewSessionInSections||e.privilege.canSubmitSessionInSections!==n.privilege.canSubmitSessionInSections}))})),t.sectionLevel.forEach((function(e){e.sessionLevel.every((function(n){return e.privilege.canModifySessionCommentsInSections===n.privilege.canModifySessionCommentsInSections&&e.privilege.canViewSessionInSections===n.privilege.canViewSessionInSections&&e.privilege.canSubmitSessionInSections===n.privilege.canSubmitSessionInSections}))&&(e.sessionLevel=[])})),e.originalPanel=JSON.parse(JSON.stringify(e.editPanel))}),(function(e){n.hasInstructorsLoadingFailed=!0,n.statusMessageService.showErrorToast(e.error.message)}))}else this.isInstructorsLoading=!1}},{key:"updatePrivilegeForInstructor",value:function(e,n){var i=this;if(e.role===v.i.INSTRUCTOR_PERMISSION_ROLE_CUSTOM){var t=[];t.push(this.instructorService.updateInstructorPrivilege({courseId:e.courseId,instructorEmail:e.email,requestBody:{canModifyCourse:n.privilege.canModifyCourse,canModifySession:n.privilege.canModifySession,canModifyStudent:n.privilege.canModifyStudent,canModifyInstructor:n.privilege.canModifyInstructor,canViewStudentInSections:n.privilege.canViewStudentInSections,canModifySessionCommentsInSections:n.privilege.canModifySessionCommentsInSections,canViewSessionInSections:n.privilege.canViewSessionInSections,canSubmitSessionInSections:n.privilege.canSubmitSessionInSections}}).pipe(Object(m.a)((function(e){n.privilege.canModifyCourse=e.canModifyCourse,n.privilege.canModifySession=e.canModifySession,n.privilege.canModifyStudent=e.canModifyStudent,n.privilege.canModifyInstructor=e.canModifyInstructor,n.privilege.canViewStudentInSections=e.canViewStudentInSections,n.privilege.canModifySessionCommentsInSections=e.canModifySessionCommentsInSections,n.privilege.canViewSessionInSections=e.canViewSessionInSections,n.privilege.canSubmitSessionInSections=e.canSubmitSessionInSections})))),n.sectionLevel.forEach((function(n){n.sectionNames.forEach((function(s){t.push(i.instructorService.updateInstructorPrivilege({courseId:e.courseId,instructorEmail:e.email,requestBody:{sectionName:s,canViewStudentInSections:n.privilege.canViewStudentInSections,canModifySessionCommentsInSections:n.privilege.canModifySessionCommentsInSections,canViewSessionInSections:n.privilege.canViewSessionInSections,canSubmitSessionInSections:n.privilege.canSubmitSessionInSections}}).pipe(Object(m.a)((function(e){n.privilege.canViewStudentInSections=e.canViewStudentInSections,n.privilege.canModifySessionCommentsInSections=e.canModifySessionCommentsInSections,n.privilege.canViewSessionInSections=e.canViewSessionInSections,n.privilege.canSubmitSessionInSections=e.canSubmitSessionInSections})))),n.sessionLevel.forEach((function(n){t.push(i.instructorService.updateInstructorPrivilege({courseId:e.courseId,instructorEmail:e.email,requestBody:{sectionName:s,feedbackSessionName:n.sessionName,canModifySessionCommentsInSections:n.privilege.canModifySessionCommentsInSections,canViewSessionInSections:n.privilege.canViewSessionInSections,canSubmitSessionInSections:n.privilege.canSubmitSessionInSections}}).pipe(Object(m.a)((function(e){n.privilege.canModifySessionCommentsInSections=e.canModifySessionCommentsInSections,n.privilege.canViewSessionInSections=e.canViewSessionInSections,n.privilege.canSubmitSessionInSections=e.canSubmitSessionInSections}))))}))}))})),Object(g.a).apply(void 0,t).pipe(Object(S.a)()).subscribe((function(){n.sectionLevel=n.sectionLevel.filter((function(e){return 0!==e.sectionNames.length}))}),(function(e){i.statusMessageService.showErrorToast(e.error.message)}))}}}]),e}(),Te.\u0275fac=function(e){return new(e||Te)(V.Qb(o.a),V.Qb(o.d),V.Qb(ae.a),V.Qb(ue.b),V.Qb(le.a),V.Qb(de.a),V.Qb(be.a),V.Qb(ge.a),V.Qb(fe.a),V.Qb(me.a),V.Qb(r.m),V.Qb(Se.a))},Te.\u0275cmp=V.Kb({type:Te,selectors:[["tm-instructor-course-edit-page"]],viewQuery:function(e,n){var i;1&e&&V.Wc(he,!0),2&e&&V.Bc(i=V.jc())&&(n.form=i.first)},decls:10,vars:12,consts:[[3,"shouldShowRetry","message","retryEvent"],["class","card bg-light top-padded text-center",4,"tmIsLoading"],[1,"right","top-padded"],["tmRouterLink","/web/instructor/help","rel","noopener noreferrer","target","_blank",1,"small",3,"queryParams"],["aria-hidden","true",1,"fa","fa-info-circle"],[4,"tmIsLoading"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"card","bg-light","top-padded","text-center"],[1,"card-header","bg-primary","text-white"],[1,"card-header-btn-toolbar"],["id","btn-edit-course","class","btn btn-primary btn-sm",3,"disabled","click",4,"ngIf"],["id","btn-cancel-course","class","btn btn-primary btn-sm",3,"disabled","click",4,"ngIf"],["id","btn-delete-course","ngbTooltip","Delete the course and its corresponding students and sessions",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-trash"],[1,"card-body","fill-plain"],[3,"ngSubmit"],["courseForm","ngForm"],[1,"form-row","form-group"],[1,"col-sm-3","font-weight-bold","text-md-right"],[1,"col-sm-9"],["id","course-id","type","text","tabindex","1","name","courseId","required","","disabled","",1,"col-xs-12","form-control",3,"ngModel","maxlength","ngModelChange"],["courseId","ngModel"],["id","course-name","type","text","tabindex","2","name","courseName","required","",1,"form-control",3,"disabled","ngModel","maxlength","ngModelChange"],["courseName","ngModel"],[1,"invalid-field",3,"hidden"],["aria-hidden","true",1,"fa","fa-exclamation-circle"],[1,"col-xs-12","col-sm-3","font-weight-bold","text-md-right"],["ngbTooltip","You should not need to change this as it is auto-detected based on your\n                device settings. TEAMMATES automatically adjusts to match the current time offset in your area, including clock changes due to daylight saving time.",1,"ngb-tooltip-class"],[1,"col-xs-12","col-sm-9"],[1,"input-group"],["id","time-zone","required","","name","timeZone",1,"form-control",3,"ngModel","disabled","ngModelChange"],["timeZone","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"input-group-btn"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-group","m-0"],[1,"col-sm-12","text-center"],["id","btn-save-course","class","btn btn-success","type","submit",3,"disabled",4,"ngIf"],["id","btn-edit-course",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-pen"],["id","btn-cancel-course",1,"btn","btn-primary","btn-sm",3,"disabled","click"],["aria-hidden","true",1,"fa","fa-times"],[3,"value"],["id","btn-save-course","type","submit",1,"btn","btn-success",3,"disabled"],[4,"ngFor","ngForOf"],[3,"editMode","instructor","instructorIndex","currInstructorCoursePrivilege","allSections","allSessions","instructorChange","viewRolePrivilegeModel","deleteInstructor","saveInstructor","cancelEditing","sendRemindJoinEmail"],[1,"text-center"],["id","btn-add-instructor","tabindex","6","type","button",1,"btn","btn-success",3,"click"],[3,"editMode","instructor","instructorIndex","isSavingNewInstructor","currInstructorCoursePrivilege","allSections","allSessions","instructorChange","viewRolePrivilegeModel","saveInstructor","cancelEditing"]],template:function(e,n){1&e&&(V.Wb(0,"tm-loading-retry",0),V.ic("retryEvent",(function(){return n.loadCourseInfo()})),V.Oc(1,ke,43,14,"div",1),V.Wb(2,"div",2),V.Wb(3,"a",3),V.Rb(4,"i",4),V.Qc(5," More about configuring access permissions "),V.Vb(),V.Vb(),V.Vb(),V.Wb(6,"tm-loading-retry",0),V.ic("retryEvent",(function(){return n.loadCourseInstructors()})),V.Oc(7,Ee,2,1,"div",5),V.Vb(),V.Oc(8,Re,3,0,"div",6),V.Oc(9,Pe,2,8,"div",7)),2&e&&(V.sc("shouldShowRetry",n.hasCourseLoadingFailed)("message","Failed to load course"),V.Cb(1),V.sc("tmIsLoading",n.isCourseLoading),V.Cb(2),V.sc("queryParams",V.xc(9,Ne,n.CoursesSectionQuestions.COURSE_INSTRUCTOR_ACCESS,n.Sections.courses)),V.Cb(3),V.sc("shouldShowRetry",n.hasInstructorsLoadingFailed)("message","Failed to load instructors of course"),V.Cb(1),V.sc("tmIsLoading",n.isInstructorsLoading),V.Cb(1),V.sc("ngIf",!n.isAddingNewInstructor),V.Cb(1),V.sc("ngIf",n.isAddingNewInstructor))},directives:[ve.a,pe.a,Ie.a,t.u,r.w,s.F,s.q,s.r,s.c,s.A,s.p,s.s,s.k,s.B,t.t,s.u,s.E,L.a,oe],styles:[".invalid-field[_ngcontent-%COMP%]{padding-top:5px;color:#b50000}.form-row[_ngcontent-%COMP%]{-ms-flex-align:center;align-items:center}.fill-plain[_ngcontent-%COMP%]{background-color:#eaeff5}"],data:{animation:[y.a]}}),Te)}],xe=((We=function e(){_classCallCheck(this,e)}).\u0275mod=V.Ob({type:We}),We.\u0275inj=V.Nb({factory:function(e){return new(e||We)},imports:[[t.c,s.j,o.h.forChild(_e),r.y,l.a,u.a,c.a,a.a,d.a]]}),We)},Babz:function(e,n,i){"use strict";i.d(n,"a",(function(){return a}));var t=i("fXoL"),s=i("ofXK");function o(e,n){if(1&e){var i=t.Xb();t.Wb(0,"div",2),t.Wb(1,"p",3),t.Qc(2),t.Vb(),t.Wb(3,"button",4),t.ic("click",(function(){return t.Fc(i),t.kc().retryEvent.emit()})),t.Rb(4,"i",5),t.Qc(5,"\xa0Retry"),t.Vb(),t.Vb()}if(2&e){var s=t.kc();t.Cb(2),t.Rc(s.message)}}function r(e,n){1&e&&t.qc(0)}var c=["*"],a=function(){var e=function(){function e(){_classCallCheck(this,e),this.message="",this.shouldShowRetry=!1,this.retryEvent=new t.n}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Kb({type:e,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:c,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(e,n){if(1&e&&(t.rc(),t.Oc(0,o,6,1,"div",0),t.Oc(1,r,1,0,"ng-template",null,1,t.Pc)),2&e){var i=t.Cc(2);t.sc("ngIf",n.shouldShowRetry)("ngIfElse",i)}},directives:[s.u],styles:[""]}),e}()},JUCI:function(e,n,i){"use strict";i.d(n,"a",(function(){return s}));var t=i("R0Ic"),s=Object(t.j)("collapseAnim",[Object(t.i)(":leave",[Object(t.h)({height:"*",overflow:"hidden"}),Object(t.e)("300ms ease-in-out",Object(t.h)({height:0,opacity:0}))]),Object(t.i)(":enter",[Object(t.h)({height:"0",overflow:"hidden"}),Object(t.e)("300ms ease-in-out",Object(t.h)({height:"*",opacity:1}))])])},Mdjh:function(e,n,i){"use strict";i.d(n,"a",(function(){return t}));var t={canModifyCourse:!1,canModifySession:!1,canModifyStudent:!1,canSubmitSessionInSections:!1,canModifyInstructor:!1,canViewStudentInSections:!1,canModifySessionCommentsInSections:!1,canViewSessionInSections:!1}},RNOZ:function(e,n,i){"use strict";i.d(n,"a",(function(){return o}));var t=i("R8lv"),s=i("fXoL"),o=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){switch(e){case t.i.INSTRUCTOR_PERMISSION_ROLE_COOWNER:return"Co-owner";case t.i.INSTRUCTOR_PERMISSION_ROLE_MANAGER:return"Manager";case t.i.INSTRUCTOR_PERMISSION_ROLE_OBSERVER:return"Observer";case t.i.INSTRUCTOR_PERMISSION_ROLE_TUTOR:return"Tutor";case t.i.INSTRUCTOR_PERMISSION_ROLE_CUSTOM:default:return"Custom"}}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=s.Pb({name:"instructorRoleName",type:e,pure:!0}),e}()},RkgC:function(e,n,i){"use strict";i.d(n,"a",(function(){return t}));var t=function(e){return e.students="students",e.courses="courses",e.sessions="sessions",e.questions="questions",e.body="body",e}({})},UGSt:function(e,n,i){"use strict";i.d(n,"a",(function(){return s}));var t=i("fXoL"),s=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return Object.keys(e).map((function(n){return e[n]}))}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=t.Pb({name:"enumToArray",type:e,pure:!0}),e}()},Wsbs:function(e,n,i){"use strict";i.d(n,"a",(function(){return s}));var t=i("fXoL"),s=function(){var e=function(){function e(){_classCallCheck(this,e),this.useBlueSpinner=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Kb({type:e,selectors:[["tm-ajax-loading"]],inputs:{useBlueSpinner:"useBlueSpinner"},decls:2,vars:3,consts:[[1,"loading-container"],["role","status"]],template:function(e,n){1&e&&(t.Wb(0,"div",0),t.Rb(1,"div",1),t.Vb()),2&e&&(t.Cb(1),t.Fb("spinner-border spinner-border-sm text-",n.useBlueSpinner?"primary":"white",""))},styles:[".loading-container[_ngcontent-%COMP%]{display:inline;margin-right:10px}"]}),e}()},ax2R:function(e,n,i){"use strict";i.d(n,"a",(function(){return o}));var t=i("XNiG"),s=i("fXoL"),o=function(){var e=function(){function e(){_classCallCheck(this,e),this.progressPercentage=new t.a}return _createClass(e,[{key:"updateProgress",value:function(e){this.progressPercentage.next(e)}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=s.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},eQqG:function(e,n,i){"use strict";i.d(n,"a",(function(){return O}));var t,s=i("fXoL"),o=i("/Tzu"),r=i("1kSV"),c=i("ofXK"),a=i("ax2R"),u=((t=function(){function e(n){_classCallCheck(this,e),this.progressBarService=n,this.progressPercentage=0}return _createClass(e,[{key:"ngOnInit",value:function(){this.getProgress()}},{key:"getProgress",value:function(){var e=this;this.progressBarService.progressPercentage.subscribe((function(n){e.progressPercentage=n}))}}]),e}()).\u0275fac=function(e){return new(e||t)(s.Qb(a.a))},t.\u0275cmp=s.Kb({type:t,selectors:[["tm-progress-bar"]],decls:2,vars:3,consts:[["type","info","height","26px","showValue","true",3,"value","striped","animated"]],template:function(e,n){1&e&&(s.Wb(0,"div"),s.Rb(1,"ngb-progressbar",0),s.Vb()),2&e&&(s.Cb(1),s.sc("value",n.progressPercentage)("striped",!0)("animated",!0))},directives:[r.q],encapsulation:2}),t);function l(e,n){1&e&&s.Rb(0,"i",16)}function d(e,n){1&e&&s.Rb(0,"i",17)}function b(e,n){1&e&&s.Rb(0,"i",18)}function g(e,n){1&e&&s.Sb(0)}function f(e,n){if(1&e&&(s.Wb(0,"div"),s.Oc(1,g,1,0,"ng-container",19),s.Vb()),2&e){var i=s.kc();s.Cb(1),s.sc("ngTemplateOutlet",i.content)}}function m(e,n){if(1&e&&s.Rb(0,"div",20),2&e){var i=s.kc();s.sc("innerHTML",i.content,s.Gc)}}function S(e,n){1&e&&(s.Wb(0,"div",21),s.Rb(1,"tm-progress-bar"),s.Vb())}function v(e,n){if(1&e){var i=s.Xb();s.Wb(0,"button",22),s.ic("click",(function(){return s.Fc(i),s.kc().activeModal.dismiss()})),s.Qc(1),s.Vb()}if(2&e){var t=s.kc();s.Cb(1),s.Sc(" ",t.cancelMessage," ")}}var p,I,h=function(e){return{"display-none":e}},C=function(e,n,i,t){return{"alert-danger":e,"alert-warning":n,"alert-info":i,"bg-white":t}},y=function(e,n,i,t){return{"btn-danger":e,"btn-warning":n,"btn-info":i,"btn-primary":t}},M=((I=function(){function e(n){_classCallCheck(this,e),this.activeModal=n,this.SimpleModalType=o.a,this.header="",this.content="",this.type=o.a.NEUTRAL,this.isInformationOnly=!1,this.confirmMessage="Yes",this.cancelMessage="No, cancel the operation"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"isTemplate",get:function(){return this.content instanceof s.L}}]),e}()).\u0275fac=function(e){return new(e||I)(s.Qb(r.a))},I.\u0275cmp=s.Kb({type:I,selectors:[["tm-confirmation-modal"]],inputs:{header:"header",content:"content",type:"type",isInformationOnly:"isInformationOnly",confirmMessage:"confirmMessage",cancelMessage:"cancelMessage"},decls:18,vars:24,consts:[[1,"transparent-overlay",3,"ngClass"],[1,"modal-header",3,"ngClass"],[1,"modal-title"],["class","fas fa-times-circle",4,"ngIf"],["class","fas fa-exclamation-circle",4,"ngIf"],["class","fas fa-info-circle",4,"ngIf"],[1,"margin-left-5px",3,"innerHTML"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","progress-bar-container",4,"ngIf"],[1,"modal-footer"],["type","button","class","btn btn-light modal-btn-cancel",3,"click",4,"ngIf"],["type","button",1,"btn","modal-btn-ok","z-index-1",3,"ngClass","click"],[1,"fas","fa-times-circle"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-info-circle"],[4,"ngTemplateOutlet"],[3,"innerHTML"],[1,"progress-bar-container"],["type","button",1,"btn","btn-light","modal-btn-cancel",3,"click"]],template:function(e,n){1&e&&(s.Rb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div"),s.Wb(3,"h5",2),s.Oc(4,l,1,0,"i",3),s.Oc(5,d,1,0,"i",4),s.Oc(6,b,1,0,"i",5),s.Rb(7,"span",6),s.Vb(),s.Vb(),s.Wb(8,"button",7),s.ic("click",(function(){return n.type===n.SimpleModalType.LOAD?n.activeModal.close():n.activeModal.dismiss()})),s.Rb(9,"i",8),s.Vb(),s.Vb(),s.Wb(10,"div",9),s.Oc(11,f,2,1,"div",10),s.Oc(12,m,1,1,"div",11),s.Oc(13,S,2,0,"div",12),s.Vb(),s.Wb(14,"div",13),s.Oc(15,v,2,1,"button",14),s.Wb(16,"button",15),s.ic("click",(function(){return n.activeModal.close()})),s.Qc(17),s.Vb(),s.Vb()),2&e&&(s.sc("ngClass",s.wc(12,h,n.type!==n.SimpleModalType.LOAD)),s.Cb(1),s.sc("ngClass",s.zc(14,C,n.type===n.SimpleModalType.DANGER,n.type===n.SimpleModalType.WARNING,n.type===n.SimpleModalType.INFO||n.type===n.SimpleModalType.LOAD,n.type===n.SimpleModalType.NEUTRAL)),s.Cb(3),s.sc("ngIf",n.type===n.SimpleModalType.DANGER),s.Cb(1),s.sc("ngIf",n.type===n.SimpleModalType.WARNING),s.Cb(1),s.sc("ngIf",n.type===n.SimpleModalType.INFO||n.type===n.SimpleModalType.LOAD),s.Cb(1),s.sc("innerHTML",n.header,s.Gc),s.Cb(4),s.sc("ngIf",n.isTemplate),s.Cb(1),s.sc("ngIf",!n.isTemplate),s.Cb(1),s.sc("ngIf",n.type===n.SimpleModalType.LOAD),s.Cb(2),s.sc("ngIf",!n.isInformationOnly),s.Cb(1),s.sc("ngClass",s.zc(19,y,n.type===n.SimpleModalType.DANGER||n.type===n.SimpleModalType.LOAD,n.type===n.SimpleModalType.WARNING,n.type===n.SimpleModalType.INFO,n.type===n.SimpleModalType.NEUTRAL)),s.Cb(1),s.Rc(n.confirmMessage))},directives:[c.r,c.u,c.B,u],styles:[".margin-left-5px[_ngcontent-%COMP%]{margin-left:5px}.progress-bar-container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:2px}.transparent-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;visibility:false;z-index:0}.display-none[_ngcontent-%COMP%]{display:none}.z-index-1[_ngcontent-%COMP%]{z-index:1}"]}),I),O=((p=function(){function e(n){_classCallCheck(this,e),this.ngbModal=n}return _createClass(e,[{key:"open",value:function(e,n,i,t){var s=this.ngbModal.open(M);return s.componentInstance.header=e,s.componentInstance.content=i,s.componentInstance.type=n,t&&Object.entries(t).map((function(e){var n=_slicedToArray(e,2),i=n[0],t=n[1];s.componentInstance[i]=t})),s}},{key:"openConfirmationModal",value:function(e,n,i,t){var s=Object.assign({isInformationOnly:!1,confirmMessage:"Yes",cancelMessage:"No, cancel the operation"},t);return this.open(e,n,i,s)}},{key:"openInformationModal",value:function(e,n,i,t){var s=Object.assign({isInformationOnly:!0,confirmMessage:"OK"},t);return this.open(e,n,i,s)}},{key:"openLoadingModal",value:function(e,n,i,t){var s=Object.assign({isInformationOnly:!0,confirmMessage:"Abort"},t);return this.open(e,n,i,s)}}]),e}()).\u0275fac=function(e){return new(e||p)(s.ec(r.m))},p.\u0275prov=s.Mb({token:p,factory:p.\u0275fac,providedIn:"root"}),p)},mYbV:function(e,n,i){"use strict";i.d(n,"a",(function(){return o}));var t=i("ofXK"),s=i("fXoL"),o=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=s.Ob({type:e}),e.\u0275inj=s.Nb({factory:function(n){return new(n||e)},imports:[[t.c]]}),e}()}}]);