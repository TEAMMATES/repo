function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,s=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"++8I":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var s=n("vMQM"),r=n("fXoL"),o=n("mW1j"),i=function(){var e=function(){function e(t){_classCallCheck(this,e),this.httpRequestService=t}return _createClass(e,[{key:"loadInstructors",value:function(e){var t={courseid:e.courseId};return e.intent&&(t.intent=e.intent),this.httpRequestService.get(s.d.INSTRUCTORS,t)}},{key:"getInstructor",value:function(e){var t={courseid:e.courseId,intent:e.intent};return e.feedbackSessionName&&(t.fsname=e.feedbackSessionName),e.key&&(t.key=e.key),e.moderatedPerson&&(t.moderatedperson=e.moderatedPerson),e.previewAs&&(t.previewas=e.previewAs),this.httpRequestService.get(s.d.INSTRUCTOR,t)}},{key:"createInstructor",value:function(e){return this.httpRequestService.post(s.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}},{key:"updateInstructor",value:function(e){return this.httpRequestService.put(s.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}},{key:"deleteInstructor",value:function(e){var t={courseid:e.courseId};return e.instructorEmail&&(t.instructoremail=e.instructorEmail),e.instructorId&&(t.instructorid=e.instructorId),this.httpRequestService.delete(s.d.INSTRUCTOR,t)}},{key:"loadInstructorPrivilege",value:function(e){var t={courseid:e.courseId};return e.feedbackSessionName&&(t.fsname=e.feedbackSessionName),e.sectionName&&(t.sectionname=e.sectionName),e.instructorRole&&(t.instructorrole=e.instructorRole),e.instructorEmail&&(t.instructoremail=e.instructorEmail),e.instructorId&&(t.instructorid=e.instructorId),this.httpRequestService.get(s.d.INSTRUCTOR_PRIVILEGE,t)}},{key:"updateInstructorPrivilege",value:function(e){return this.httpRequestService.put(s.d.INSTRUCTOR_PRIVILEGE,{courseid:e.courseId,instructoremail:e.instructorEmail},e.requestBody)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.ec(o.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"6ss9":function(e,t,n){"use strict";n.r(t),n.d(t,"InstructorStudentRecordsPageModule",(function(){return $}));var s=n("ofXK"),r=n("tyNb"),o=n("1kSV"),i=n("KryH"),c=n("bYKa"),a=n("mYbV"),u=n("aSpy"),d=n("RPsU"),l=n("UZZV"),f=n("gEaU"),m=n("nYR2"),b=n("5+tZ"),p=n("lJxs"),v=n("dOUP"),h=n("R8lv"),S=n("9jjE"),g=n("p6cw"),y=n("JUCI"),C=n("gMOI"),k=n("fXoL"),R=n("Rjy1"),I=n("MbNv"),E=n("iRmZ"),O=n("++8I"),T=n("I8MS"),N=n("Uqoa"),w=n("r0mR"),P=n("Babz"),_=n("Lcal"),L=n("ZOy6"),q=n("hBZu"),F=n("zAMY"),M=n("Cg8i");function V(e,t){if(1&e&&k.Rb(0,"tm-student-profile",6),2&e){var n=k.kc();k.sc("studentProfile",n.studentProfile)("photoUrl",n.photoUrl)}}function x(e,t){if(1&e&&k.Rb(0,"tm-more-info",7),2&e){var n=k.kc();k.sc("studentName",n.studentName)("moreInfoText",n.studentProfile.moreInfo)}}function U(e,t){if(1&e){var n=k.Xb();k.Wb(0,"tm-grq-rgq-view-responses",18),k.ic("saveNewCommentEvent",(function(e){k.Fc(n);var t=k.kc(2).$implicit;return k.kc(2).saveNewComment(e,t.feedbackSession.timeZone)}))("deleteCommentEvent",(function(e){return k.Fc(n),k.kc(4).deleteComment(e)}))("updateCommentEvent",(function(e){k.Fc(n);var t=k.kc(2).$implicit;return k.kc(2).updateComment(e,t.feedbackSession.timeZone)})),k.Vb()}if(2&e){var s=k.kc(2).$implicit,r=k.kc(2);k.sc("session",s.feedbackSession)("responses",s.responsesReceivedByStudent)("groupByTeam",!1)("isGrq",!1)("instructorCommentTableModel",r.instructorCommentTableModel)("isExpandAll",!0)}}function Q(e,t){if(1&e&&(k.Wb(0,"div",19),k.Qc(1),k.Vb()),2&e){var n=k.kc(4);k.Cb(1),k.Tc(" No feedback responses for ",n.studentName," (",n.studentTeam,") found. ")}}function j(e,t){if(1&e){var n=k.Xb();k.Wb(0,"tm-grq-rgq-view-responses",18),k.ic("saveNewCommentEvent",(function(e){k.Fc(n);var t=k.kc(2).$implicit;return k.kc(2).saveNewComment(e,t.feedbackSession.timeZone)}))("deleteCommentEvent",(function(e){return k.Fc(n),k.kc(4).deleteComment(e)}))("updateCommentEvent",(function(e){k.Fc(n);var t=k.kc(2).$implicit;return k.kc(2).updateComment(e,t.feedbackSession.timeZone)})),k.Vb()}if(2&e){var s=k.kc(2).$implicit,r=k.kc(2);k.sc("session",s.feedbackSession)("responses",s.responsesGivenByStudent)("groupByTeam",!1)("isGrq",!0)("instructorCommentTableModel",r.instructorCommentTableModel)("isExpandAll",!0)}}function W(e,t){if(1&e&&(k.Wb(0,"div"),k.Qc(1),k.Vb()),2&e){var n=k.kc(4);k.Cb(1),k.Tc(" No feedback responses from ",n.studentName," (",n.studentTeam,") found. ")}}function B(e,t){if(1&e&&(k.Wb(0,"div",14),k.Oc(1,U,1,6,"tm-grq-rgq-view-responses",15),k.Oc(2,Q,2,2,"div",16),k.Oc(3,j,1,6,"tm-grq-rgq-view-responses",15),k.Oc(4,W,2,2,"div",17),k.Vb()),2&e){var n=k.kc().$implicit;k.sc("@collapseAnim",void 0),k.Cb(1),k.sc("ngIf",n.responsesReceivedByStudent.length>0),k.Cb(1),k.sc("ngIf",0===n.responsesReceivedByStudent.length),k.Cb(1),k.sc("ngIf",n.responsesGivenByStudent.length>0),k.Cb(1),k.sc("ngIf",0===n.responsesGivenByStudent.length)}}function X(e,t){if(1&e&&(k.Wb(0,"div",9),k.Wb(1,"div",10),k.ic("click",(function(){var e=t.$implicit;return e.isCollapsed=!e.isCollapsed})),k.Wb(2,"strong"),k.Qc(3),k.Vb(),k.Wb(4,"div",11),k.Rb(5,"tm-panel-chevron",12),k.Vb(),k.Vb(),k.Oc(6,B,5,5,"div",13),k.Vb()),2&e){var n=t.$implicit;k.Cb(3),k.Sc("Feedback Session: ",n.feedbackSession.feedbackSessionName,""),k.Cb(2),k.sc("isExpanded",!n.isCollapsed),k.Cb(1),k.sc("ngIf",!n.isCollapsed)}}function A(e,t){if(1&e&&(k.Wb(0,"div"),k.Oc(1,X,7,3,"div",8),k.Vb()),2&e){var n=k.kc();k.Cb(1),k.sc("ngForOf",n.sessionTabs)}}var Z,G,K=[{path:"",component:(Z=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,s,r,o,i,c,a,u,d,l){var f;return _classCallCheck(this,n),(f=t.call(this,l,d,u,a)).route=e,f.studentProfileService=s,f.feedbackSessionsService=r,f.studentService=o,f.instructorService=i,f.commentsToCommentTableModel=c,f.courseId="",f.studentName="",f.studentEmail="",f.studentTeam="",f.studentSection="",f.instructorCommentTableModel={},f.studentProfile={name:"",shortName:"",email:"",institute:"",nationality:"",gender:h.h.OTHER,moreInfo:""},f.sessionTabs=[],f.photoUrl="",f.isStudentLoading=!1,f.hasStudentLoadingFailed=!1,f.isStudentProfileLoading=!1,f.hasStudentProfileLoadingFailed=!1,f.isStudentResultsLoading=!1,f.hasStudentResultsLoadingFailed=!1,f}return _createClass(n,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe((function(t){e.courseId=t.courseid,e.studentEmail=t.studentemail,e.loadStudentRecords(),e.loadStudentResults(),e.photoUrl=v.a.backendUrl+"/webapi/student/profilePic?"+"courseid=".concat(e.courseId,"&studentemail=").concat(e.studentEmail),e.instructorService.getInstructor({courseId:t.courseid,intent:S.b.FULL_DETAIL}).subscribe((function(t){e.currInstructorName=t.name}))}),(function(t){e.statusMessageService.showErrorToast(t.error.message)}))}},{key:"loadStudentRecords",value:function(){var e=this;this.hasStudentLoadingFailed=!1,this.hasStudentProfileLoadingFailed=!1,this.isStudentLoading=!0,this.isStudentProfileLoading=!0,this.studentService.getStudent(this.courseId,this.studentEmail).pipe(Object(m.a)((function(){return e.isStudentLoading=!1}))).subscribe((function(t){e.studentName=t.name,e.studentTeam=t.teamName,e.studentSection=t.sectionName}),(function(t){e.hasStudentLoadingFailed=!0,e.statusMessageService.showErrorToast(t.error.message)})),this.studentProfileService.getStudentProfile(this.studentEmail,this.courseId).pipe(Object(m.a)((function(){return e.isStudentProfileLoading=!1}))).subscribe((function(t){e.studentProfile=t}),(function(t){e.hasStudentProfileLoadingFailed=!0,e.statusMessageService.showErrorToast(t.error.message)}))}},{key:"loadStudentResults",value:function(){var e=this;this.sessionTabs=[],this.hasStudentResultsLoadingFailed=!1,this.isStudentResultsLoading=!0,this.feedbackSessionsService.getFeedbackSessionsForInstructor(this.courseId).pipe(Object(b.a)((function(e){return e.feedbackSessions})),Object(b.a)((function(t){return e.feedbackSessionsService.getFeedbackSessionResults({courseId:e.courseId,feedbackSessionName:t.feedbackSessionName,groupBySection:e.studentSection,intent:S.b.INSTRUCTOR_RESULT}).pipe(Object(p.a)((function(e){return e.questions.sort((function(e,t){return e.feedbackQuestion.questionNumber-t.feedbackQuestion.questionNumber})),{results:e,feedbackSession:t}})))})),Object(m.a)((function(){return e.isStudentResultsLoading=!1}))).subscribe((function(t){var n=t.results,s=t.feedbackSession,r=JSON.parse(JSON.stringify(n.questions));r.forEach((function(t){t.allResponses=t.allResponses.filter((function(t){return!t.isMissingResponse&&t.giverEmail===e.studentEmail}))}));var o=r.filter((function(e){return e.allResponses.length>0})),i=JSON.parse(JSON.stringify(n.questions));i.forEach((function(t){t.allResponses=t.allResponses.filter((function(t){return!t.isMissingResponse&&t.recipientEmail===e.studentEmail}))}));var c=i.filter((function(e){return e.allResponses.length>0}));e.sessionTabs.push({feedbackSession:s,responsesGivenByStudent:o,responsesReceivedByStudent:c,isCollapsed:!1}),n.questions.forEach((function(t){return e.preprocessComments(t.allResponses)}))}),(function(t){e.hasStudentResultsLoadingFailed=!0,e.statusMessageService.showErrorToast(t.error.message)}),(function(){return e.sortFeedbackSessions()}))}},{key:"preprocessComments",value:function(e){var t=this,n=null!=this.sessionTabs[0]?this.sessionTabs[0].feedbackSession.timeZone:"";e.forEach((function(e){t.instructorCommentTableModel[e.responseId]=t.commentsToCommentTableModel.transform(e.instructorComments,!1,n),t.sortComments(t.instructorCommentTableModel[e.responseId]),e.instructorComments=[]}))}},{key:"sortFeedbackSessions",value:function(){var e=this;this.sessionTabs.sort((function(t,n){return e.tableComparatorService.compare(g.a.SESSION_NAME,g.b.ASC,t.feedbackSession.feedbackSessionName,n.feedbackSession.feedbackSessionName)}))}}]),n}(C.a),Z.\u0275fac=function(e){return new(e||Z)(k.Qb(r.a),k.Qb(R.a),k.Qb(I.a),k.Qb(E.a),k.Qb(O.a),k.Qb(c.a),k.Qb(T.a),k.Qb(N.a),k.Qb(w.a),k.Qb(i.a))},Z.\u0275cmp=k.Kb({type:Z,selectors:[["tm-instructor-student-records-page"]],features:[k.zb],decls:11,vars:9,consts:[["id","records-header"],[1,"text-muted"],[3,"shouldShowRetry","message","retryEvent"],[3,"studentProfile","photoUrl",4,"tmIsLoading"],[3,"studentName","moreInfoText",4,"tmIsLoading"],[4,"tmIsLoading"],[3,"studentProfile","photoUrl"],[3,"studentName","moreInfoText"],["class","card card-default mb-4",4,"ngFor","ngForOf"],[1,"card","card-default","mb-4"],[1,"card-header","cursor-pointer",3,"click"],[1,"card-header-btn-toolbar"],[3,"isExpanded"],["class","card-body",4,"ngIf"],[1,"card-body"],[3,"session","responses","groupByTeam","section","sectionType","isGrq","instructorCommentTableModel","isExpandAll","saveNewCommentEvent","deleteCommentEvent","updateCommentEvent",4,"ngIf"],["class","mb-3",4,"ngIf"],[4,"ngIf"],[3,"session","responses","groupByTeam","section","sectionType","isGrq","instructorCommentTableModel","isExpandAll","saveNewCommentEvent","deleteCommentEvent","updateCommentEvent"],[1,"mb-3"]],template:function(e,t){1&e&&(k.Wb(0,"h1",0),k.Qc(1),k.Wb(2,"small",1),k.Qc(3),k.Vb(),k.Vb(),k.Wb(4,"tm-loading-retry",2),k.ic("retryEvent",(function(){return t.loadStudentRecords()})),k.Oc(5,V,1,2,"tm-student-profile",3),k.Oc(6,x,1,2,"tm-more-info",4),k.Vb(),k.Wb(7,"h2"),k.Qc(8,"Records in feedback sessions"),k.Vb(),k.Wb(9,"tm-loading-retry",2),k.ic("retryEvent",(function(){return t.loadStudentResults()})),k.Oc(10,A,2,1,"div",5),k.Vb()),2&e&&(k.Cb(1),k.Sc("",t.studentName,"'s Records"),k.Cb(2),k.Sc(" - ",t.courseId,""),k.Cb(1),k.sc("shouldShowRetry",t.hasStudentLoadingFailed||t.hasStudentProfileLoadingFailed)("message","Failed to load student records"),k.Cb(1),k.sc("tmIsLoading",t.isStudentProfileLoading),k.Cb(1),k.sc("tmIsLoading",t.isStudentLoading),k.Cb(3),k.sc("shouldShowRetry",t.hasStudentResultsLoadingFailed)("message","Failed to load student results"),k.Cb(1),k.sc("tmIsLoading",t.isStudentResultsLoading))},directives:[P.a,_.a,L.a,q.a,s.t,F.a,s.u,M.a],styles:[""],data:{animation:[y.a]}}),Z)}],$=((G=function e(){_classCallCheck(this,e)}).\u0275mod=k.Ob({type:G}),G.\u0275inj=k.Nb({factory:function(e){return new(e||G)},providers:[i.a,c.a],imports:[[s.c,f.a,o.d,l.a,r.h.forChild(K),u.a,a.a,d.a]]}),G)},Babz:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("fXoL"),r=n("ofXK");function o(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",2),s.Wb(1,"p",3),s.Qc(2),s.Vb(),s.Wb(3,"button",4),s.ic("click",(function(){return s.Fc(n),s.kc().retryEvent.emit()})),s.Rb(4,"i",5),s.Qc(5,"\xa0Retry"),s.Vb(),s.Vb()}if(2&e){var r=s.kc();s.Cb(2),s.Rc(r.message)}}function i(e,t){1&e&&s.qc(0)}var c=["*"],a=function(){var e=function(){function e(){_classCallCheck(this,e),this.message="",this.shouldShowRetry=!1,this.retryEvent=new s.n}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Kb({type:e,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:c,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(e,t){if(1&e&&(s.rc(),s.Oc(0,o,6,1,"div",0),s.Oc(1,i,1,0,"ng-template",null,1,s.Pc)),2&e){var n=s.Cc(2);s.sc("ngIf",t.shouldShowRetry)("ngIfElse",n)}},directives:[r.u],styles:[""]}),e}()},RPsU:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("ofXK"),r=n("fXoL"),o=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[s.c]]}),e}()},mYbV:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n("ofXK"),r=n("fXoL"),o=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[s.c]]}),e}()},zAMY:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n("fXoL"),r=n("ofXK");function o(e,t){1&e&&s.Rb(0,"i",3)}function i(e,t){1&e&&s.Rb(0,"i",4)}var c=function(){var e=function(){function e(){_classCallCheck(this,e),this.isExpanded=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Kb({type:e,selectors:[["tm-panel-chevron"]],inputs:{isExpanded:"isExpanded"},decls:3,vars:2,consts:[[1,"chevron"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-up",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-up"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Oc(1,o,1,0,"i",1),s.Oc(2,i,1,0,"i",2),s.Vb()),2&e&&(s.Cb(1),s.sc("ngIf",!t.isExpanded),s.Cb(1),s.sc("ngIf",t.isExpanded))},directives:[r.u],styles:[".chevron[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}"]}),e}()}}]);