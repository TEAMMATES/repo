function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{Babz:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var i=s("fXoL"),n=s("ofXK");function o(e,t){if(1&e){var s=i.Xb();i.Wb(0,"div",2),i.Wb(1,"p",3),i.Qc(2),i.Vb(),i.Wb(3,"button",4),i.ic("click",(function(){return i.Fc(s),i.kc().retryEvent.emit()})),i.Rb(4,"i",5),i.Qc(5,"\xa0Retry"),i.Vb(),i.Vb()}if(2&e){var n=i.kc();i.Cb(2),i.Rc(n.message)}}function r(e,t){1&e&&i.qc(0)}var c=["*"],a=function(){var e=function(){function e(){_classCallCheck(this,e),this.message="",this.shouldShowRetry=!1,this.retryEvent=new i.n}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Kb({type:e,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:c,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(e,t){if(1&e&&(i.rc(),i.Oc(0,o,6,1,"div",0),i.Oc(1,r,1,0,"ng-template",null,1,i.Pc)),2&e){var s=i.Cc(2);i.sc("ngIf",t.shouldShowRetry)("ngIfElse",s)}},directives:[n.u],styles:[""]}),e}()},NDgu:function(e,t,s){"use strict";s.r(t),s.d(t,"SessionResultPageModule",(function(){return j}));var i=s("ofXK"),n=s("tyNb"),o=s("mYbV"),r=s("aSpy"),c=s("r4OI"),a=s("VSAI"),u=s("aK3w"),b=s("nYR2"),d=s("dOUP"),l=s("R8lv"),f=s("9jjE"),g=s("UT40"),h=s("wuQz"),m=s("fXoL"),v=s("MbNv"),p=s("A3DQ"),k=s("Pvcr"),S=s("nAaM"),y=s("iRmZ"),R=s("Uqoa"),w=s("1kSV"),C=s("Babz"),V=s("Lcal"),W=s("CdkP"),I=s("uWR1"),Q=s("UH8L");function E(e,t){if(1&e){var s=m.Xb();m.Wb(0,"div"),m.Qc(1),m.Wb(2,"a",15),m.ic("click",(function(e){return m.Fc(s),m.kc(2).joinCourseForUnregisteredStudent(),e.preventDefault()})),m.Qc(3,"click here"),m.Vb(),m.Qc(4,". "),m.Vb()}if(2&e){var i=m.kc(2);m.Cb(1),m.Tc(" You are viewing feedback results as ",i.personName,". If you wish to link your Google account (",i.loggedInUser,") with this user, ")}}function M(e,t){if(1&e){var s=m.Xb();m.Wb(0,"div"),m.Qc(1),m.Wb(2,"a",16),m.ic("click",(function(e){return m.Fc(s),m.kc(2).joinCourseForUnregisteredStudent(),e.preventDefault()})),m.Qc(3,"login using a Google account"),m.Vb(),m.Qc(4," (recommended). "),m.Vb()}if(2&e){var i=m.kc(2);m.Cb(1),m.Sc(" You are viewing feedback results as ",i.personName,". You may submit feedback for sessions that are currently open and view results without logging in. To access other features you need to ")}}function F(e,t){if(1&e&&(m.Wb(0,"div",11),m.Wb(1,"div",12),m.Wb(2,"div",13),m.Oc(3,E,5,2,"div",14),m.Oc(4,M,5,1,"div",14),m.Vb(),m.Vb(),m.Vb()),2&e){var s=m.kc();m.Cb(3),m.sc("ngIf",s.loggedInUser),m.Cb(1),m.sc("ngIf",!s.loggedInUser)}}function O(e,t){if(1&e&&m.Rb(0,"tm-student-view-responses",25),2&e){var s=m.kc().$implicit,i=m.kc(2);m.sc("responses",s.responsesToSelf)("feedbackQuestion",s.feedbackQuestion)("timezone",i.session.timeZone)("statistics",s.questionStatistics)}}function T(e,t){if(1&e&&m.Rb(0,"tm-student-view-responses",25),2&e){var s=m.kc().$implicit,i=m.kc().$implicit,n=m.kc(2);m.sc("responses",s)("feedbackQuestion",i.feedbackQuestion)("timezone",n.session.timeZone)("statistics",i.questionStatistics)}}function q(e,t){if(1&e&&(m.Wb(0,"div"),m.Oc(1,T,1,4,"tm-student-view-responses",22),m.Vb()),2&e){var s=t.$implicit;m.Cb(1),m.sc("ngIf",s.length)}}var N=function(e){return[e]};function U(e,t){if(1&e&&(m.Wb(0,"div"),m.Rb(1,"tm-student-view-responses",27),m.Vb()),2&e){var s=t.$implicit,i=m.kc(2).$implicit,n=m.kc(2);m.Cb(1),m.sc("responses",m.wc(5,N,s))("isSelfResponses",!0)("feedbackQuestion",i.feedbackQuestion)("timezone",n.session.timeZone)("statistics",i.questionStatistics)}}function L(e,t){if(1&e&&(m.Wb(0,"div",26),m.Wb(1,"strong"),m.Qc(2,"Your own responses (to others):"),m.Vb(),m.Oc(3,U,2,7,"div",23),m.Vb()),2&e){var s=m.kc().$implicit;m.Cb(3),m.sc("ngForOf",s.responsesFromSelf)}}function z(e,t){if(1&e&&(m.Wb(0,"div",18),m.Wb(1,"div",19),m.Rb(2,"tm-question-text-with-info",20),m.Rb(3,"tm-single-statistics",21),m.Oc(4,O,1,4,"tm-student-view-responses",22),m.Oc(5,q,2,1,"div",23),m.Oc(6,L,4,1,"div",24),m.Vb(),m.Vb()),2&e){var s=t.$implicit;m.Cb(1),m.uc("id","question-",s.feedbackQuestion.questionNumber,"-responses"),m.Cb(1),m.sc("questionNumber",s.feedbackQuestion.questionNumber)("questionDetails",s.feedbackQuestion.questionDetails),m.Cb(1),m.sc("question",s.feedbackQuestion.questionDetails)("responses",s.allResponses)("statistics",s.questionStatistics)("isStudent",!0),m.Cb(1),m.sc("ngIf",s.responsesToSelf.length),m.Cb(1),m.sc("ngForOf",s.otherResponses),m.Cb(1),m.sc("ngIf",s.responsesFromSelf.length)}}function P(e,t){if(1&e&&(m.Wb(0,"div"),m.Oc(1,z,7,10,"div",17),m.Vb()),2&e){var s=m.kc();m.Cb(1),m.sc("ngForOf",s.questions)}}var _,Y,A=[{path:"",component:(_=function(){function e(t,s,i,n,o,r,c,a,u){_classCallCheck(this,e),this.feedbackSessionsService=t,this.route=s,this.router=i,this.timezoneService=n,this.navigationService=o,this.authService=r,this.studentService=c,this.statusMessageService=a,this.ngbModal=u,this.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:l.o.AT_OPEN,responseVisibleSetting:l.n.AT_VISIBLE,submissionStatus:l.f.OPEN,publishStatus:l.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},this.questions=[],this.formattedSessionOpeningTime="",this.formattedSessionClosingTime="",this.personName="",this.courseId="",this.feedbackSessionName="",this.regKey="",this.loggedInUser="",this.isFeedbackSessionResultsLoading=!1,this.hasFeedbackSessionResultsLoadingFailed=!1,this.retryAttempts=g.a,this.backendUrl=d.a.backendUrl,this.timezoneService.getTzVersion()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe((function(t){e.courseId=t.courseid,e.feedbackSessionName=t.fsname,e.regKey=t.key||"";var s="".concat(window.location.pathname).concat(window.location.search);e.authService.getAuthUser(void 0,s).subscribe((function(t){t.user&&(e.loggedInUser=t.user.id),e.regKey?e.authService.getAuthRegkeyValidity(e.regKey,f.b.STUDENT_RESULT).subscribe((function(s){s.isAllowedAccess?s.isUsed?e.navigationService.navigateByURLWithParamEncoding(e.router,"/web/student/sessions/result",{courseid:e.courseId,fsname:e.feedbackSessionName}):(e.loadPersonName(),e.loadFeedbackSession()):s.isValid?e.loggedInUser?e.navigationService.navigateWithErrorMessage(e.router,"/web/front","You are not authorized to view this page."):window.location.href="".concat(e.backendUrl).concat(t.studentLoginUrl):e.navigationService.navigateWithErrorMessage(e.router,"/web/front","You are not authorized to view this page.")}),(function(){e.navigationService.navigateWithErrorMessage(e.router,"/web/front","You are not authorized to view this page.")})):e.loggedInUser?e.loadFeedbackSession():e.navigationService.navigateWithErrorMessage(e.router,"/web/front","You are not authorized to view this page.")}),(function(){e.navigationService.navigateWithErrorMessage(e.router,"/web/front","You are not authorized to view this page.")}))}))}},{key:"loadPersonName",value:function(){var e=this;this.studentService.getStudent(this.courseId,"",this.regKey).subscribe((function(t){e.personName=t.name}))}},{key:"loadFeedbackSession",value:function(){var e=this;this.isFeedbackSessionResultsLoading=!0,this.feedbackSessionsService.getFeedbackSession({courseId:this.courseId,feedbackSessionName:this.feedbackSessionName,intent:f.b.STUDENT_RESULT,key:this.regKey}).subscribe((function(t){e.session=t,e.formattedSessionOpeningTime=e.timezoneService.formatToString(e.session.submissionStartTimestamp,e.session.timeZone,"ddd, DD MMM, YYYY, hh:mm A zz"),e.formattedSessionClosingTime=e.timezoneService.formatToString(e.session.submissionEndTimestamp,e.session.timeZone,"ddd, DD MMM, YYYY, hh:mm A zz"),e.feedbackSessionsService.getFeedbackSessionResults({courseId:e.courseId,feedbackSessionName:e.feedbackSessionName,intent:f.b.STUDENT_RESULT,key:e.regKey}).pipe(Object(b.a)((function(){return e.isFeedbackSessionResultsLoading=!1}))).subscribe((function(t){e.questions=t.questions.sort((function(e,t){return e.feedbackQuestion.questionNumber-t.feedbackQuestion.questionNumber}))}),(function(t){e.handleError(t)}))}),(function(t){e.isFeedbackSessionResultsLoading=!1,e.handleError(t)}))}},{key:"joinCourseForUnregisteredStudent",value:function(){this.navigationService.navigateByURL(this.router,"/web/join",{entitytype:"student",key:this.regKey})}},{key:"retryLoadingFeedbackSessionResults",value:function(){this.hasFeedbackSessionResultsLoadingFailed=!1,this.retryAttempts>=0&&(this.retryAttempts-=1),this.loadFeedbackSession()}},{key:"handleError",value:function(e){if(this.hasFeedbackSessionResultsLoadingFailed=!0,this.retryAttempts<0){var t=this.ngbModal.open(h.a);t.componentInstance.requestId=e.error.requestId,t.componentInstance.errorMessage=e.error.message}else this.statusMessageService.showErrorToast(e.error.message)}}]),e}(),_.\u0275fac=function(e){return new(e||_)(m.Qb(v.a),m.Qb(n.a),m.Qb(n.d),m.Qb(p.b),m.Qb(k.a),m.Qb(S.a),m.Qb(y.a),m.Qb(R.a),m.Qb(w.m))},_.\u0275cmp=m.Kb({type:_,selectors:[["tm-session-result-page"]],decls:36,vars:8,consts:[["class","row",4,"ngIf"],[1,"card","card-plain","mt-3"],[1,"card-body"],[1,"row","text-center"],[1,"col-md-2","text-md-right"],["id","course-id",1,"col-md-5","text-md-left"],["id","session-name",1,"col-md-5","text-md-left"],["id","opening-time",1,"col-md-5","text-md-left"],["id","closing-time",1,"col-md-5","text-md-left"],[3,"shouldShowRetry","message","retryEvent"],[4,"tmIsLoading"],[1,"row"],[1,"col-12"],["role","alert",1,"alert","alert-primary"],[4,"ngIf"],["href","#","id","join-course-btn",3,"click"],["href","#",3,"click"],["class","card bg-light mt-4",4,"ngFor","ngForOf"],[1,"card","bg-light","mt-4"],[1,"card-body",3,"id"],[1,"question-text",3,"questionNumber","questionDetails"],[3,"question","responses","statistics","isStudent"],[3,"responses","feedbackQuestion","timezone","statistics",4,"ngIf"],[4,"ngFor","ngForOf"],["id","given-responses","class","mt-4",4,"ngIf"],[3,"responses","feedbackQuestion","timezone","statistics"],["id","given-responses",1,"mt-4"],[3,"responses","isSelfResponses","feedbackQuestion","timezone","statistics"]],template:function(e,t){1&e&&(m.Wb(0,"h1"),m.Qc(1," Feedback Session Results\n"),m.Vb(),m.Oc(2,F,5,2,"div",0),m.Wb(3,"div",1),m.Wb(4,"div",2),m.Rb(5,"br"),m.Wb(6,"div",3),m.Wb(7,"div",4),m.Wb(8,"b"),m.Qc(9,"Course ID:"),m.Vb(),m.Vb(),m.Wb(10,"div",5),m.Qc(11),m.Vb(),m.Vb(),m.Rb(12,"br"),m.Wb(13,"div",3),m.Wb(14,"div",4),m.Wb(15,"b"),m.Qc(16,"Session:"),m.Vb(),m.Vb(),m.Wb(17,"div",6),m.Qc(18),m.Vb(),m.Vb(),m.Rb(19,"br"),m.Wb(20,"div",3),m.Wb(21,"div",4),m.Wb(22,"b"),m.Qc(23,"Opening time:"),m.Vb(),m.Vb(),m.Wb(24,"div",7),m.Qc(25),m.Vb(),m.Vb(),m.Rb(26,"br"),m.Wb(27,"div",3),m.Wb(28,"div",4),m.Wb(29,"b"),m.Qc(30,"Closing time:"),m.Vb(),m.Vb(),m.Wb(31,"div",8),m.Qc(32),m.Vb(),m.Vb(),m.Rb(33,"br"),m.Vb(),m.Vb(),m.Wb(34,"tm-loading-retry",9),m.ic("retryEvent",(function(){return t.retryLoadingFeedbackSessionResults()})),m.Oc(35,P,2,1,"div",10),m.Vb()),2&e&&(m.Cb(2),m.sc("ngIf",t.regKey),m.Cb(9),m.Rc(t.session.courseId),m.Cb(7),m.Rc(t.session.feedbackSessionName),m.Cb(7),m.Rc(t.formattedSessionOpeningTime),m.Cb(7),m.Rc(t.formattedSessionClosingTime),m.Cb(2),m.sc("shouldShowRetry",t.hasFeedbackSessionResultsLoadingFailed)("message","Failed to load results"),m.Cb(1),m.sc("tmIsLoading",t.isFeedbackSessionResultsLoading))},directives:[i.u,C.a,V.a,i.t,W.a,I.a,Q.a],styles:[".card-plain[_ngcontent-%COMP%]{background-color:#eaeff5;background-image:none;border:0;box-shadow:0 0 0 0}.question-text[_ngcontent-%COMP%]{font-size:.9375rem}"]}),_)}],j=((Y=function e(){_classCallCheck(this,e)}).\u0275mod=m.Ob({type:Y}),Y.\u0275inj=m.Nb({factory:function(e){return new(e||Y)},imports:[[i.c,u.a,a.a,c.a,n.h.forChild(A),r.a,o.a]]}),Y)},UT40:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i=3},mYbV:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s("ofXK"),n=s("fXoL"),o=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=n.Ob({type:e}),e.\u0275inj=n.Nb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e}()},wuQz:function(e,t,s){"use strict";s.d(t,"a",(function(){return k}));var i,n=s("dOUP"),o=s("fXoL"),r=s("vMQM"),c=s("mW1j"),a=((i=function(){function e(t){_classCallCheck(this,e),this.httpRequestService=t}return _createClass(e,[{key:"sendErrorReport",value:function(e){return this.httpRequestService.post(r.d.ERROR_REPORT,{},e.request)}}]),e}()).\u0275fac=function(e){return new(e||i)(o.ec(c.a))},i.\u0275prov=o.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),u=s("1kSV"),b=s("Uqoa"),d=s("ofXK"),l=s("3Pt+");function f(e,t){1&e&&(o.Wb(0,"div"),o.Wb(1,"p"),o.Qc(2," We are sorry that this happened. Please help us troubleshoot the problem by providing us some additional details using the form below: "),o.Vb(),o.Vb())}function g(e,t){if(1&e&&(o.Wb(0,"div"),o.Wb(1,"p"),o.Qc(2," We are sorry that this happened. It is likely that your browser could not create or access cookies for authorization. If cookies are disabled in your browser, please turn on your cookies before trying again. Alternatively, you could also try emptying your browser's cache, or switching to a different browser. "),o.Vb(),o.Wb(3,"p"),o.Qc(4," For further support, please contact our email address at "),o.Wb(5,"a",6),o.Qc(6),o.Vb(),o.Qc(7,". "),o.Vb(),o.Vb()),2&e){var s=o.kc();o.Cb(5),o.uc("href","mailto:",s.supportEmail,"",o.Ic),o.Cb(1),o.Rc(s.supportEmail)}}function h(e,t){if(1&e){var s=o.Xb();o.Wb(0,"button",13),o.ic("click",(function(){return o.Fc(s),o.kc(2).sendErrorReport()})),o.Qc(1,"Send Error Report"),o.Vb()}if(2&e){var i=o.kc(2);o.sc("disabled",!i.sendButtonEnabled)}}function m(e,t){1&e&&(o.Wb(0,"div"),o.Qc(1," Your error report has been recorded. We will follow up with you in due course, usually, within 24 hours. "),o.Vb())}function v(e,t){if(1&e){var s=o.Xb();o.Wb(0,"div",7),o.Wb(1,"div",8),o.Wb(2,"label"),o.Qc(3,"Request ID:"),o.Vb(),o.Rb(4,"br"),o.Wb(5,"em"),o.Qc(6,"Note: This field is filled by the system and not modifiable."),o.Vb(),o.Wb(7,"input",9),o.ic("ngModelChange",(function(e){return o.Fc(s),o.kc().requestId=e})),o.Vb(),o.Vb(),o.Wb(8,"div",8),o.Wb(9,"label"),o.Qc(10,"Subject:"),o.Vb(),o.Rb(11,"br"),o.Wb(12,"em"),o.Qc(13,"Note: This field is pre-filled for convenience. Feel free to change it to suit your needs."),o.Vb(),o.Wb(14,"input",10),o.ic("ngModelChange",(function(e){return o.Fc(s),o.kc().subject=e})),o.Vb(),o.Vb(),o.Wb(15,"div",8),o.Wb(16,"label"),o.Qc(17,"Content:"),o.Vb(),o.Wb(18,"textarea",11),o.ic("ngModelChange",(function(e){return o.Fc(s),o.kc().content=e})),o.Vb(),o.Vb(),o.Oc(19,h,2,1,"button",12),o.Oc(20,m,2,0,"div",4),o.Vb()}if(2&e){var i=o.kc();o.Cb(7),o.sc("ngModel",i.requestId)("disabled",!0),o.Cb(7),o.sc("ngModel",i.subject),o.Cb(4),o.sc("ngModel",i.content),o.Cb(1),o.sc("ngIf",!i.errorReportSubmitted),o.Cb(1),o.sc("ngIf",i.errorReportSubmitted)}}var p,k=((p=function(){function e(t,s,i){_classCallCheck(this,e),this.errorReportService=t,this.ngbActiveModal=s,this.statusMessageService=i,this.errorMessage="",this.subject="User-submitted Error Report",this.content="",this.requestId="",this.sendButtonEnabled=!0,this.errorReportEnabled=!0,this.errorReportSubmitted=!1,this.csrfErrorMessages=["Missing CSRF token.","Invalid CSRF token."],this.supportEmail=n.a.supportEmail}return _createClass(e,[{key:"ngOnInit",value:function(){this.csrfErrorMessages.includes(this.errorMessage)&&(this.errorReportEnabled=!1)}},{key:"sendErrorReport",value:function(){var e=this,t={requestId:this.requestId,subject:this.subject,content:this.content};this.sendButtonEnabled=!1,this.errorReportService.sendErrorReport({request:t}).subscribe((function(){e.errorReportSubmitted=!0,e.statusMessageService.showSuccessToast("Your error report has been successfully sent"),e.ngbActiveModal.close()}),(function(t){e.sendButtonEnabled=!0,e.statusMessageService.showErrorToast(t.error.message)}))}}]),e}()).\u0275fac=function(e){return new(e||p)(o.Qb(a),o.Qb(u.a),o.Qb(b.a))},p.\u0275cmp=o.Kb({type:p,selectors:[["tm-error-report"]],decls:11,vars:4,consts:[[1,"container","error-container"],[1,"row"],[1,"col-md-12"],["id","error-message"],[4,"ngIf"],["id","error-report",4,"ngIf"],[3,"href"],["id","error-report"],[1,"form-group"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Tell us the steps you took that led you to this error page",1,"form-control",3,"ngModel","ngModelChange"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"btn","btn-success",3,"disabled","click"]],template:function(e,t){1&e&&(o.Wb(0,"div",0),o.Wb(1,"h2"),o.Qc(2,"Uh oh! Something went wrong."),o.Vb(),o.Rb(3,"hr"),o.Wb(4,"div",1),o.Wb(5,"div",2),o.Wb(6,"p",3),o.Qc(7),o.Vb(),o.Oc(8,f,3,0,"div",4),o.Oc(9,g,8,2,"div",4),o.Vb(),o.Vb(),o.Oc(10,v,21,6,"div",5),o.Vb()),2&e&&(o.Cb(7),o.Sc(' The server returns the following error message: "',t.errorMessage,'". '),o.Cb(1),o.sc("ngIf",t.errorReportEnabled),o.Cb(1),o.sc("ngIf",!t.errorReportEnabled),o.Cb(1),o.sc("ngIf",t.errorReportEnabled))},directives:[d.u,l.c,l.p,l.s],styles:[".error-container[_ngcontent-%COMP%]{padding:3%}"]}),p)}}]);