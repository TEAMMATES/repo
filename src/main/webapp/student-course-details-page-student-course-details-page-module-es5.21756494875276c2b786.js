function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"++8I":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("vMQM"),r=i("fXoL"),s=i("mW1j"),a=function(){var e=function(){function e(t){_classCallCheck(this,e),this.httpRequestService=t}return _createClass(e,[{key:"loadInstructors",value:function(e){var t={courseid:e.courseId};return e.intent&&(t.intent=e.intent),this.httpRequestService.get(n.d.INSTRUCTORS,t)}},{key:"getInstructor",value:function(e){var t={courseid:e.courseId,intent:e.intent};return e.feedbackSessionName&&(t.fsname=e.feedbackSessionName),e.key&&(t.key=e.key),e.moderatedPerson&&(t.moderatedperson=e.moderatedPerson),e.previewAs&&(t.previewas=e.previewAs),this.httpRequestService.get(n.d.INSTRUCTOR,t)}},{key:"createInstructor",value:function(e){return this.httpRequestService.post(n.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}},{key:"updateInstructor",value:function(e){return this.httpRequestService.put(n.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}},{key:"deleteInstructor",value:function(e){var t={courseid:e.courseId};return e.instructorEmail&&(t.instructoremail=e.instructorEmail),e.instructorId&&(t.instructorid=e.instructorId),this.httpRequestService.delete(n.d.INSTRUCTOR,t)}},{key:"loadInstructorPrivilege",value:function(e){var t={courseid:e.courseId};return e.feedbackSessionName&&(t.fsname=e.feedbackSessionName),e.sectionName&&(t.sectionname=e.sectionName),e.instructorRole&&(t.instructorrole=e.instructorRole),e.instructorEmail&&(t.instructoremail=e.instructorEmail),e.instructorId&&(t.instructorid=e.instructorId),this.httpRequestService.get(n.d.INSTRUCTOR_PRIVILEGE,t)}},{key:"updateInstructorPrivilege",value:function(e){return this.httpRequestService.put(n.d.INSTRUCTOR_PRIVILEGE,{courseid:e.courseId,instructoremail:e.instructorEmail},e.requestBody)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.ec(s.a))},e.\u0275prov=r.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"+kil":function(e,t,i){"use strict";i.r(t),i.d(t,"StudentCourseDetailsPageModule",(function(){return U}));var n=i("ofXK"),r=i("tyNb"),s=i("mYbV"),a=i("aSpy"),c=i("SEFB"),o=i("nYR2"),u=i("dOUP"),d=i("R8lv"),b=i("p6cw"),l=i("fXoL"),m=i("I8MS"),f=i("++8I"),v=i("Rjy1"),g=i("iRmZ"),h=i("vKUq"),p=i("Uqoa"),S=i("Babz"),I=i("Lcal"),y=i("WbH0");function C(e,t){if(1&e&&(l.Wb(0,"h1",5),l.Qc(1),l.Vb()),2&e){var i=l.kc();l.Cb(1),l.Sc("Team Details for ",i.course.courseId,"")}}function V(e,t){if(1&e&&(l.Ub(0),l.Wb(1,"div",11),l.Wb(2,"div",12),l.Wb(3,"label"),l.Qc(4,"Course ID:"),l.Vb(),l.Vb(),l.Wb(5,"div",13),l.Wb(6,"span",14),l.Qc(7),l.Vb(),l.Vb(),l.Vb(),l.Wb(8,"div",11),l.Wb(9,"div",12),l.Wb(10,"label"),l.Qc(11,"Course name:"),l.Vb(),l.Vb(),l.Wb(12,"div",13),l.Wb(13,"span",15),l.Qc(14),l.Vb(),l.Vb(),l.Vb(),l.Tb()),2&e){var i=l.kc(3);l.Cb(7),l.Rc(i.course.courseId),l.Cb(7),l.Rc(i.course.courseName)}}function W(e,t){if(1&e&&(l.Wb(0,"div"),l.Qc(1),l.Wb(2,"a",18),l.Qc(3),l.Vb(),l.Vb()),2&e){var i=t.$implicit;l.Cb(1),l.Sc(" ",i.displayedToStudentsAs,": "),l.Cb(1),l.uc("href","mailto:",i.email,"",l.Ic),l.Cb(1),l.Tc("",i.name," (",i.email,")")}}function k(e,t){if(1&e&&(l.Ub(0),l.Wb(1,"div",11),l.Wb(2,"div",12),l.Wb(3,"label"),l.Qc(4,"Instructors:"),l.Vb(),l.Vb(),l.Wb(5,"div",16),l.Oc(6,W,4,4,"div",17),l.Vb(),l.Vb(),l.Tb()),2&e){var i=l.kc(3);l.Cb(6),l.sc("ngForOf",i.instructorDetails)}}function T(e,t){if(1&e&&(l.Ub(0),l.Wb(1,"div",11),l.Wb(2,"div",12),l.Wb(3,"label"),l.Qc(4,"Your section:"),l.Vb(),l.Vb(),l.Wb(5,"div",13),l.Wb(6,"span",19),l.Qc(7),l.Vb(),l.Vb(),l.Vb(),l.Wb(8,"div",11),l.Wb(9,"div",12),l.Wb(10,"label"),l.Qc(11,"Your team:"),l.Vb(),l.Vb(),l.Wb(12,"div",13),l.Wb(13,"span",20),l.Qc(14),l.Vb(),l.Vb(),l.Vb(),l.Wb(15,"div",11),l.Wb(16,"div",12),l.Wb(17,"label"),l.Qc(18,"Your name:"),l.Vb(),l.Vb(),l.Wb(19,"div",13),l.Wb(20,"span",21),l.Qc(21),l.Vb(),l.Vb(),l.Vb(),l.Wb(22,"div",11),l.Wb(23,"div",12),l.Wb(24,"label"),l.Qc(25,"Your email:"),l.Vb(),l.Vb(),l.Wb(26,"div",13),l.Wb(27,"span",22),l.Qc(28),l.Vb(),l.Vb(),l.Vb(),l.Tb()),2&e){var i=l.kc(3);l.Cb(7),l.Rc(i.student.sectionName),l.Cb(7),l.Rc(i.student.teamName),l.Cb(7),l.Rc(i.student.name),l.Cb(7),l.Rc(i.student.email)}}function N(e,t){if(1&e&&(l.Wb(0,"div",8),l.Wb(1,"div",9),l.Oc(2,V,15,2,"ng-container",10),l.Oc(3,k,7,1,"ng-container",10),l.Oc(4,T,29,4,"ng-container",10),l.Vb(),l.Vb()),2&e){var i=l.kc(2);l.Cb(2),l.sc("ngIf",i.course.courseId),l.Cb(1),l.sc("ngIf",i.instructorDetails&&i.instructorDetails.length),l.Cb(1),l.sc("ngIf",i.student.courseId)}}function O(e,t){if(1&e&&(l.Wb(0,"div",6),l.Oc(1,N,5,3,"div",7),l.Vb()),2&e){var i=l.kc();l.Cb(1),l.sc("tmIsLoading",i.isLoadingCourse||i.isLoadingInstructor||i.isLoadingStudent)}}function E(e,t){if(1&e){var i=l.Xb();l.Wb(0,"div",23),l.Wb(1,"div",24),l.Wb(2,"h5",25),l.Wb(3,"strong"),l.Qc(4," Sort By: "),l.Vb(),l.Vb(),l.Wb(5,"div",26),l.Wb(6,"button",27),l.ic("click",(function(){l.Fc(i);var e=l.kc();return e.sortTeammatesBy(e.SortBy.RESPONDENT_NAME)})),l.Qc(7,"Name"),l.Vb(),l.Wb(8,"button",28),l.ic("click",(function(){l.Fc(i);var e=l.kc();return e.sortTeammatesBy(e.SortBy.RESPONDENT_EMAIL)})),l.Qc(9,"Email"),l.Vb(),l.Wb(10,"button",28),l.ic("click",(function(){l.Fc(i);var e=l.kc();return e.sortTeammatesBy(e.SortBy.STUDENT_GENDER)})),l.Qc(11,"Gender"),l.Vb(),l.Wb(12,"button",28),l.ic("click",(function(){l.Fc(i);var e=l.kc();return e.sortTeammatesBy(e.SortBy.INSTITUTION)})),l.Qc(13,"Institution"),l.Vb(),l.Wb(14,"button",28),l.ic("click",(function(){l.Fc(i);var e=l.kc();return e.sortTeammatesBy(e.SortBy.NATIONALITY)})),l.Qc(15,"Nationality"),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&e){var n=l.kc();l.Cb(6),l.sc("disabled",n.isSelectedForSorting(n.SortBy.RESPONDENT_NAME)),l.Cb(2),l.sc("disabled",n.isSelectedForSorting(n.SortBy.RESPONDENT_EMAIL)),l.Cb(2),l.sc("disabled",n.isSelectedForSorting(n.SortBy.STUDENT_GENDER)),l.Cb(2),l.sc("disabled",n.isSelectedForSorting(n.SortBy.INSTITUTION)),l.Cb(2),l.sc("disabled",n.isSelectedForSorting(n.SortBy.NATIONALITY))}}function R(e,t){1&e&&(l.Wb(0,"div",32),l.Wb(1,"strong"),l.Qc(2,"Your teammates:"),l.Vb(),l.Vb())}function P(e,t){if(1&e&&(l.Wb(0,"div"),l.Wb(1,"label"),l.Qc(2,"Gender:"),l.Vb(),l.Qc(3),l.lc(4,"genderFormat"),l.Vb()),2&e){var i=l.kc().$implicit;l.Cb(3),l.Sc(" ",l.mc(4,1,i.gender)," ")}}function L(e,t){if(1&e&&(l.Wb(0,"div"),l.Wb(1,"label"),l.Qc(2,"Nationality:"),l.Vb(),l.Qc(3),l.Vb()),2&e){var i=l.kc().$implicit;l.Cb(3),l.Sc(" ",i.nationality," ")}}function Q(e,t){if(1&e&&(l.Wb(0,"div"),l.Wb(1,"label"),l.Qc(2,"Institute:"),l.Vb(),l.Qc(3),l.Vb()),2&e){var i=l.kc().$implicit;l.Cb(3),l.Sc(" ",i.institute," ")}}function w(e,t){if(1&e){var i=l.Xb();l.Wb(0,"tr"),l.Wb(1,"td",33),l.Wb(2,"img",34),l.ic("error",(function(){l.Fc(i);var e=t.$implicit;return l.kc(2).setDefaultPic(e)})),l.Vb(),l.Vb(),l.Wb(3,"td",35),l.Wb(4,"div"),l.Wb(5,"label"),l.Qc(6,"Name:"),l.Vb(),l.Qc(7),l.Vb(),l.Wb(8,"div"),l.Wb(9,"label"),l.Qc(10,"Email:"),l.Vb(),l.Qc(11,"\xa0"),l.Wb(12,"a",18),l.Qc(13),l.Vb(),l.Vb(),l.Oc(14,P,5,3,"div",10),l.Oc(15,L,4,1,"div",10),l.Oc(16,Q,4,1,"div",10),l.Vb(),l.Vb()}if(2&e){var n=t.$implicit,r=t.index;l.Cb(2),l.tc("src",n.photoUrl,l.Ic),l.Cb(1),l.uc("id","teammates-details-",r,""),l.Cb(4),l.Sc(" ",n.name," "),l.Cb(5),l.uc("href","mailto:",n.email,"",l.Ic),l.Cb(1),l.Rc(n.email),l.Cb(1),l.sc("ngIf",n.gender),l.Cb(1),l.sc("ngIf",n.nationality),l.Cb(1),l.sc("ngIf",n.institute)}}function _(e,t){if(1&e&&(l.Wb(0,"div",6),l.Wb(1,"div",29),l.Oc(2,R,3,0,"div",30),l.Wb(3,"div",31),l.Wb(4,"table"),l.Wb(5,"tbody"),l.Oc(6,w,17,8,"tr",17),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e){var i=l.kc();l.Cb(2),l.sc("ngIf",i.teammateProfiles.length),l.Cb(4),l.sc("ngForOf",i.teammateProfiles)}}var F,M,B=[{path:"",component:(F=function(){function e(t,i,n,r,s,a,c){_classCallCheck(this,e),this.tableComparatorService=t,this.route=i,this.instructorService=n,this.studentProfileService=r,this.studentService=s,this.courseService=a,this.statusMessageService=c,this.Gender=d.h,this.SortBy=b.a,this.teammateProfilesSortBy=b.a.NONE,this.student={email:"",courseId:"",name:"",lastName:"",comments:"",joinState:d.j.NOT_JOINED,teamName:"",sectionName:""},this.course={courseId:"",courseName:"",timeZone:"UTC",creationTimestamp:0,deletionTimestamp:0},this.courseId="",this.instructorDetails=[],this.teammateProfiles=[],this.isLoadingCourse=!1,this.isLoadingStudent=!1,this.isLoadingInstructor=!1,this.isLoadingTeammates=!1,this.hasLoadingFailed=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.queryParams.subscribe((function(t){e.courseId=t.courseid,e.loadStudent(t.courseid),e.loadCourse(t.courseid),e.loadInstructors(t.courseid)}))}},{key:"loadCourse",value:function(e){var t=this;this.isLoadingCourse=!0,this.courseService.getCourseAsStudent(e).pipe(Object(o.a)((function(){return t.isLoadingCourse=!1}))).subscribe((function(e){t.course=e}),(function(e){t.hasLoadingFailed=!0,t.statusMessageService.showErrorToast(e.error.message)}))}},{key:"loadStudent",value:function(e){var t=this;this.isLoadingStudent=!0,this.studentService.getStudent(e).pipe(Object(o.a)((function(){return t.isLoadingStudent=!1}))).subscribe((function(i){t.student=i,t.loadTeammates(e,i.teamName)}),(function(e){t.hasLoadingFailed=!0,t.statusMessageService.showErrorToast(e.error.message)}))}},{key:"loadTeammates",value:function(e,t){var i=this;this.isLoadingTeammates=!0,this.teammateProfiles=[],this.studentService.getStudentsFromCourseAndTeam(e,t).subscribe((function(t){1===t.students.length&&t.students[0].email===i.student.email&&(i.isLoadingTeammates=!1),t.students.forEach((function(t){t.email!==i.student.email&&i.studentProfileService.getStudentProfile(t.email,e).pipe(Object(o.a)((function(){return i.isLoadingTeammates=!1}))).subscribe((function(n){var r=u.a.backendUrl+"/webapi/student/profilePic"+"?courseid=".concat(e,"&studentemail=").concat(t.email),s=Object.assign(Object.assign({},n),{email:t.email,name:t.name,photoUrl:r});i.teammateProfiles.push(s)}),(function(e){i.hasLoadingFailed=!0,i.statusMessageService.showErrorToast(e.error.message)}))}))}),(function(e){i.isLoadingTeammates=!1,i.hasLoadingFailed=!0,i.statusMessageService.showErrorToast(e.error.message)}))}},{key:"loadInstructors",value:function(e){var t=this;this.isLoadingInstructor=!0,this.instructorService.loadInstructors({courseId:e}).pipe(Object(o.a)((function(){return t.isLoadingInstructor=!1}))).subscribe((function(e){t.instructorDetails=e.instructors}),(function(e){t.hasLoadingFailed=!0,t.statusMessageService.showErrorToast(e.error.message)}))}},{key:"setDefaultPic",value:function(e){e.photoUrl="/assets/images/profile_picture_default.png"}},{key:"isSelectedForSorting",value:function(e){return this.teammateProfilesSortBy===e}},{key:"sortTeammatesBy",value:function(e){this.teammateProfilesSortBy=e,this.teammateProfiles.length>1&&this.teammateProfiles.sort(this.sortPanelsBy(e))}},{key:"sortPanelsBy",value:function(e){var t=this;return function(i,n){var r,s;switch(e){case b.a.RESPONDENT_NAME:r=i.name,s=n.name;break;case b.a.RESPONDENT_EMAIL:r=i.email,s=n.email;break;case b.a.STUDENT_GENDER:r=i.gender,s=n.gender;break;case b.a.INSTITUTION:r=i.institute,s=n.institute;break;case b.a.NATIONALITY:r=i.nationality,s=n.nationality;break;default:r="",s=""}return t.tableComparatorService.compare(e,b.b.ASC,r,s)}}},{key:"retryLoading",value:function(){this.hasLoadingFailed=!1,this.loadCourse(this.courseId),this.loadInstructors(this.courseId),this.loadStudent(this.courseId)}}]),e}(),F.\u0275fac=function(e){return new(e||F)(l.Qb(m.a),l.Qb(r.a),l.Qb(f.a),l.Qb(v.a),l.Qb(g.a),l.Qb(h.a),l.Qb(p.a))},F.\u0275cmp=l.Kb({type:F,selectors:[["tm-student-course-details-page"]],decls:5,vars:6,consts:[["class","page-title",4,"ngIf"],[3,"shouldShowRetry","message","retryEvent"],["class","section",4,"ngIf"],["class","card bg-light mb-4",4,"ngIf"],["class","section",4,"tmIsLoading"],[1,"page-title"],[1,"section"],["class","card",4,"tmIsLoading"],[1,"card"],[1,"card-body","fill-plain"],[4,"ngIf"],[1,"row"],[1,"col-3","text-right"],[1,"col-9"],["id","course-id"],["id","course-name"],["id","instructors",1,"col-9",2,"margin-bottom",".5rem"],[4,"ngFor","ngForOf"],[3,"href"],["id","student-section"],["id","student-team"],["id","student-name"],["id","student-email"],[1,"card","bg-light","mb-4"],[1,"card-body"],[1,"d-inline"],["data-toggle","buttons",1,"btn-group"],["id","sort-name",1,"btn","btn-light",3,"disabled","click"],[1,"btn","btn-light",3,"disabled","click"],[1,"row","top-padded"],["class","col-md-2",4,"ngIf"],[1,"col-md-10"],[1,"col-md-2"],[1,"team-member-photo-cell"],[1,"profile-pic",3,"src","error"],[1,"team-member-profile-cell",3,"id"]],template:function(e,t){1&e&&(l.Oc(0,C,2,1,"h1",0),l.Wb(1,"tm-loading-retry",1),l.ic("retryEvent",(function(){return t.retryLoading()})),l.Oc(2,O,2,1,"div",2),l.Oc(3,E,16,5,"div",3),l.Vb(),l.Oc(4,_,7,2,"div",4)),2&e&&(l.sc("ngIf",t.course.courseId),l.Cb(1),l.sc("shouldShowRetry",t.hasLoadingFailed)("message","Failed to load details"),l.Cb(1),l.sc("ngIf",t.course.courseId),l.Cb(1),l.sc("ngIf",!t.isLoadingTeammates&&t.teammateProfiles.length),l.Cb(1),l.sc("tmIsLoading",t.isLoadingTeammates))},directives:[n.u,S.a,I.a,n.t],pipes:[y.a],styles:[".page-title[_ngcontent-%COMP%]{margin-bottom:30px}.section[_ngcontent-%COMP%]{margin-bottom:40px}.profile-pic[_ngcontent-%COMP%]{max-width:100%;max-height:150px}.fill-plain[_ngcontent-%COMP%]{background-color:#eaeff5}label[_ngcontent-%COMP%]{font-weight:700}.top-padded[_ngcontent-%COMP%]{margin-top:20px}.team-member-photo-cell[_ngcontent-%COMP%]{padding-bottom:10px}.team-member-profile-cell[_ngcontent-%COMP%]{padding-left:30px;vertical-align:middle}.team-member-profile-cell[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px}"]}),F)}],U=((M=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:M}),M.\u0275inj=l.Nb({factory:function(e){return new(e||M)},imports:[[n.c,r.h.forChild(B),c.a,a.a,s.a]]}),M)},Babz:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("fXoL"),r=i("ofXK");function s(e,t){if(1&e){var i=n.Xb();n.Wb(0,"div",2),n.Wb(1,"p",3),n.Qc(2),n.Vb(),n.Wb(3,"button",4),n.ic("click",(function(){return n.Fc(i),n.kc().retryEvent.emit()})),n.Rb(4,"i",5),n.Qc(5,"\xa0Retry"),n.Vb(),n.Vb()}if(2&e){var r=n.kc();n.Cb(2),n.Rc(r.message)}}function a(e,t){1&e&&n.qc(0)}var c=["*"],o=function(){var e=function(){function e(){_classCallCheck(this,e),this.message="",this.shouldShowRetry=!1,this.retryEvent=new n.n}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Kb({type:e,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:c,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(e,t){if(1&e&&(n.rc(),n.Oc(0,s,6,1,"div",0),n.Oc(1,a,1,0,"ng-template",null,1,n.Pc)),2&e){var i=n.Cc(2);n.sc("ngIf",t.shouldShowRetry)("ngIfElse",i)}},directives:[r.u],styles:[""]}),e}()},WbH0:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("R8lv"),r=i("fXoL"),s=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){switch(e){case n.h.MALE:return"Male";case n.h.FEMALE:return"Female";case n.h.OTHER:return"Not Specified";default:return"Unknown"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Pb({name:"genderFormat",type:e,pure:!0}),e}()},mYbV:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("ofXK"),r=i("fXoL"),s=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=r.Ob({type:e}),e.\u0275inj=r.Nb({factory:function(t){return new(t||e)},imports:[[n.c]]}),e}()}}]);