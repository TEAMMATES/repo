package teammates.ui.webapi.action;

import org.apache.http.HttpStatus;

import teammates.common.datatransfer.DataBundle;
import teammates.common.exception.InvalidParametersException;
import teammates.common.util.Const;
import teammates.common.util.JsonUtils;
import teammates.logic.core.DataBundleLogic;

public class DataBundleTestAction extends Action {

    @Override
    protected AuthType getMinAuthLevel() {
        return AuthType.ALL_ACCESS;
    }

    @Override
    public void checkSpecificAccessControl() { }

    @Override
    public JsonResult execute() {

        String dataBundleJsonString = getNonNullRequestParamValue(Const.ParamsNames.BACKDOOR_DATA);
        // supposed received url which is too long
        // %7B%0A++%22accounts%22%3A+%7B%0A++++%22SHomeUiT.instr%22%3A+%7B%0A++++++%22googleId%22%3A+%22SHomeUiT.instr%22%2C%0A++++++%22name%22%3A+%22Teammates+Test%22%2C%0A++++++%22isInstructor%22%3A+true%2C%0A++++++%22email%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22institute%22%3A+%22TEAMMATES+Test+Institute+1%22%0A++++%7D%2C%0A++++%22SHomeUiT.instructor1OfTestingSanitizationCourse%22%3A+%7B%0A++++++%22googleId%22%3A+%22SHomeUiT.idOfInstructor1OfTestingSanitizationCourse%22%2C%0A++++++%22name%22%3A+%22Instructor%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22isInstructor%22%3A+true%2C%0A++++++%22email%22%3A+%22SHomeUiT.instructor1%40sanitization.tmt%22%2C%0A++++++%22institute%22%3A+%22inst%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%0A++++%7D%2C%0A++++%22alice.tmms%22%3A+%7B%0A++++++%22googleId%22%3A+%22alice.tmms.DZW2WCQY%22%2C%0A++++++%22name%22%3A+%22Alice+B%22%2C%0A++++++%22isInstructor%22%3A+false%2C%0A++++++%22email%22%3A+%22alice.tmms.DZW2WCQY%40gmail.com%22%2C%0A++++++%22institute%22%3A+%22TEAMMATES+Test+Institute+1%22%0A++++%7D%2C%0A++++%22SHomeUiT.student1InTestingSanitizationCourse%22%3A+%7B%0A++++++%22googleId%22%3A+%22SHomeUiT.student1InTestingSanitizationCourse%22%2C%0A++++++%22name%22%3A+%22Stud1%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22isInstructor%22%3A+false%2C%0A++++++%22email%22%3A+%22normal%40sanitization.tmt%22%2C%0A++++++%22institute%22%3A+%22inst%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%0A++++%7D%0A++%7D%2C%0A++%22courses%22%3A+%7B%0A++++%22SHomeUiT.CS2104%22%3A+%7B%0A++++++%22id%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22name%22%3A+%22Programming+Language+Concepts%22%2C%0A++++++%22timeZone%22%3A+%22UTC%22%0A++++%7D%2C%0A++++%22SHomeUiT.CS1101%22%3A+%7B%0A++++++%22id%22%3A+%22SHomeUiT.CS1101%22%2C%0A++++++%22name%22%3A+%22Programming+Methodology%22%2C%0A++++++%22timeZone%22%3A+%22UTC%22%0A++++%7D%2C%0A++++%22SHomeUiT.CS4215%22%3A+%7B%0A++++++%22id%22%3A+%22SHomeUiT.CS4215%22%2C%0A++++++%22name%22%3A+%22Programming+Language+Implementation%22%2C%0A++++++%22timeZone%22%3A+%22UTC%22%0A++++%7D%2C%0A++++%22SHomeUiT.CS4221%22%3A+%7B%0A++++++%22id%22%3A+%22SHomeUiT.CS4221%22%2C%0A++++++%22name%22%3A+%22Database+Design%22%2C%0A++++++%22timeZone%22%3A+%22UTC%22%0A++++%7D%2C%0A++++%22SHomeUiT.testingSanitizationCourse%22%3A+%7B%0A++++++%22createdAt%22%3A+%222012-04-01T23%3A58%3A00Z%22%2C%0A++++++%22id%22%3A+%22SHomeUiT.idOfTestingSanitizationCourse%22%2C%0A++++++%22name%22%3A+%22Testing%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22timeZone%22%3A+%22UTC%22%0A++++%7D%0A++%7D%2C%0A++%22instructors%22%3A+%7B%0A++++%22SHomeUiT.instr.CS2104%22%3A+%7B%0A++++++%22googleId%22%3A+%22SHomeUiT.instr%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22name%22%3A+%22Teammates+Test%22%2C%0A++++++%22email%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22role%22%3A+%22Co-owner%22%2C%0A++++++%22displayedName%22%3A+%22Co-owner%22%2C%0A++++++%22isDisplayedToStudents%22%3A+false%2C%0A++++++%22privileges%22%3A+%7B%0A++++++++%22courseLevel%22%3A+%7B%0A++++++++++%22canviewstudentinsection%22%3A+true%2C%0A++++++++++%22cansubmitsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysessioncommentinsection%22%3A+true%2C%0A++++++++++%22canmodifycourse%22%3A+true%2C%0A++++++++++%22canviewsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysession%22%3A+true%2C%0A++++++++++%22canmodifystudent%22%3A+true%2C%0A++++++++++%22canmodifyinstructor%22%3A+true%0A++++++++%7D%2C%0A++++++++%22sectionLevel%22%3A+%7B%7D%2C%0A++++++++%22sessionLevel%22%3A+%7B%7D%0A++++++%7D%0A++++%7D%2C%0A++++%22SHomeUiT.instr.CS1101%22%3A+%7B%0A++++++%22googleId%22%3A+%22SHomeUiT.instr%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS1101%22%2C%0A++++++%22name%22%3A+%22Teammates+Test%22%2C%0A++++++%22email%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22role%22%3A+%22Co-owner%22%2C%0A++++++%22displayedName%22%3A+%22Co-owner%22%2C%0A++++++%22isDisplayedToStudents%22%3A+false%2C%0A++++++%22privileges%22%3A+%7B%0A++++++++%22courseLevel%22%3A+%7B%0A++++++++++%22canviewstudentinsection%22%3A+true%2C%0A++++++++++%22cansubmitsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysessioncommentinsection%22%3A+true%2C%0A++++++++++%22canmodifycourse%22%3A+true%2C%0A++++++++++%22canviewsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysession%22%3A+true%2C%0A++++++++++%22canmodifystudent%22%3A+true%2C%0A++++++++++%22canmodifyinstructor%22%3A+true%0A++++++++%7D%2C%0A++++++++%22sectionLevel%22%3A+%7B%7D%2C%0A++++++++%22sessionLevel%22%3A+%7B%7D%0A++++++%7D%0A++++%7D%2C%0A++++%22SHomeUiT.instr.CS4215%22%3A+%7B%0A++++++%22googleId%22%3A+%22SHomeUiT.instr%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS4215%22%2C%0A++++++%22name%22%3A+%22Teammates+Test%22%2C%0A++++++%22email%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22role%22%3A+%22Co-owner%22%2C%0A++++++%22displayedName%22%3A+%22Co-owner%22%2C%0A++++++%22isDisplayedToStudents%22%3A+false%2C%0A++++++%22privileges%22%3A+%7B%0A++++++++%22courseLevel%22%3A+%7B%0A++++++++++%22canviewstudentinsection%22%3A+true%2C%0A++++++++++%22cansubmitsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysessioncommentinsection%22%3A+true%2C%0A++++++++++%22canmodifycourse%22%3A+true%2C%0A++++++++++%22canviewsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysession%22%3A+true%2C%0A++++++++++%22canmodifystudent%22%3A+true%2C%0A++++++++++%22canmodifyinstructor%22%3A+true%0A++++++++%7D%2C%0A++++++++%22sectionLevel%22%3A+%7B%7D%2C%0A++++++++%22sessionLevel%22%3A+%7B%7D%0A++++++%7D%0A++++%7D%2C%0A++++%22SHomeUiT.instr.CS4221%22%3A+%7B%0A++++++%22googleId%22%3A+%22SHomeUiT.instr%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS4221%22%2C%0A++++++%22name%22%3A+%22Teammates+Test%22%2C%0A++++++%22email%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22role%22%3A+%22Co-owner%22%2C%0A++++++%22displayedName%22%3A+%22Co-owner%22%2C%0A++++++%22isDisplayedToStudents%22%3A+false%2C%0A++++++%22privileges%22%3A+%7B%0A++++++++%22courseLevel%22%3A+%7B%0A++++++++++%22canviewstudentinsection%22%3A+true%2C%0A++++++++++%22cansubmitsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysessioncommentinsection%22%3A+true%2C%0A++++++++++%22canmodifycourse%22%3A+true%2C%0A++++++++++%22canviewsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysession%22%3A+true%2C%0A++++++++++%22canmodifystudent%22%3A+true%2C%0A++++++++++%22canmodifyinstructor%22%3A+true%0A++++++++%7D%2C%0A++++++++%22sectionLevel%22%3A+%7B%7D%2C%0A++++++++%22sessionLevel%22%3A+%7B%7D%0A++++++%7D%0A++++%7D%2C%0A++++%22SHomeUiT.instructor1OfTestingSanitizationCourse%22%3A+%7B%0A++++++%22googleId%22%3A+%22SHomeUiT.idOfInstructor1OfTestingSanitizationCourse%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.idOfTestingSanitizationCourse%22%2C%0A++++++%22name%22%3A+%22Instructor%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22email%22%3A+%22SHomeUiT.instructor1%40sanitization.tmt%22%2C%0A++++++%22role%22%3A+%22Co-owner%22%2C%0A++++++%22displayedName%22%3A+%22inst%27%5C%22%2F%3E%3Cscript%3Ealert%28%27hi%21%27%29%3B%3C%2Fscript%3E%22%2C%0A++++++%22isArchived%22%3A+false%2C%0A++++++%22isDisplayedToStudents%22%3A+true%2C%0A++++++%22privileges%22%3A+%7B%0A++++++++%22courseLevel%22%3A+%7B%0A++++++++++%22canviewstudentinsection%22%3A+true%2C%0A++++++++++%22cangivecommentinsection%22%3A+true%2C%0A++++++++++%22cansubmitsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysessioncommentinsection%22%3A+true%2C%0A++++++++++%22canmodifycommentinsection%22%3A+true%2C%0A++++++++++%22canmodifycourse%22%3A+true%2C%0A++++++++++%22canviewsessioninsection%22%3A+true%2C%0A++++++++++%22canmodifysession%22%3A+true%2C%0A++++++++++%22canviewcommentinsection%22%3A+true%2C%0A++++++++++%22canmodifystudent%22%3A+true%2C%0A++++++++++%22canmodifyinstructor%22%3A+true%0A++++++++%7D%2C%0A++++++++%22sectionLevel%22%3A+%7B%7D%2C%0A++++++++%22sessionLevel%22%3A+%7B%7D%0A++++++%7D%0A++++%7D%0A++%7D%2C%0A++%22students%22%3A+%7B%0A++++%22alice.tmms%40SHomeUiT.CS2104%22%3A+%7B%0A++++++%22email%22%3A+%22alice.tmms.DZW2WCQY%40gmail.com%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22name%22%3A+%22Amy+Betsy%3C%2Foption%3E%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22googleId%22%3A+%22%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Amy+Betsy%3C%2Foption%3E%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22team%22%3A+%22Team+1%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22SHomeUiT.benny.c%40SHomeUiT.CS2104%22%3A+%7B%0A++++++%22email%22%3A+%22SHomeUiT.benny.c%40gmail.tmt%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22name%22%3A+%22Benny+Charles%22%2C%0A++++++%22googleId%22%3A+%22SHomeUiT.benny.c%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Benny+Charles%22%2C%0A++++++%22team%22%3A+%22Team+1%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22SHomeUiT.charlie.d%40SHomeUiT.CS2104%22%3A+%7B%0A++++++%22email%22%3A+%22SHomeUiT.charlie.d%40gmail.tmt%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22name%22%3A+%22Charlie+Davis%22%2C%0A++++++%22googleId%22%3A+%22SHomeUiT.charlie.d%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Charlie+Davis%22%2C%0A++++++%22team%22%3A+%22Team+2%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22SHomeUiT.danny.e%40SHomeUiT.CS2104%22%3A+%7B%0A++++++%22email%22%3A+%22SHomeUiT.danny.e%40gmail.tmt%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22name%22%3A+%22Danny+Engrid%22%2C%0A++++++%22googleId%22%3A+%22SHomeUiT.danny.e%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Danny+Engrid%22%2C%0A++++++%22team%22%3A+%22Team+2%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22alice.tmms%40SHomeUiT.CS1101%22%3A+%7B%0A++++++%22email%22%3A+%22alice.tmms.DZW2WCQY%40gmail.com%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS1101%22%2C%0A++++++%22name%22%3A+%22Amy+Betsy%3C%2Foption%3E%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22googleId%22%3A+%22alice.tmms.DZW2WCQY%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Amy+Betsy%3C%2Foption%3E%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22team%22%3A+%22Team+1%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22SHomeUiT.benny.c%40SHomeUiT.CS1101%22%3A+%7B%0A++++++%22email%22%3A+%22SHomeUiT.benny.c%40gmail.tmt%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS1101%22%2C%0A++++++%22name%22%3A+%22Benny+Charles%22%2C%0A++++++%22googleId%22%3A+%22SHomeUiT.benny.c%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Benny+Charles%22%2C%0A++++++%22team%22%3A+%22Team+1%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22SHomeUiT.charlie.d%40SHomeUiT.CS1101%22%3A+%7B%0A++++++%22email%22%3A+%22SHomeUiT.charlie.d%40gmail.tmt%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS1101%22%2C%0A++++++%22name%22%3A+%22Charlie+Davis%22%2C%0A++++++%22googleId%22%3A+%22SHomeUiT.charlie.d%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Charlie+Davis%22%2C%0A++++++%22team%22%3A+%22Team+2%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22SHomeUiT.danny.e%40SHomeUiT.CS1101%22%3A+%7B%0A++++++%22email%22%3A+%22SHomeUiT.danny.e%40gmail.tmt%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS1101%22%2C%0A++++++%22name%22%3A+%22Danny+Engrid%22%2C%0A++++++%22googleId%22%3A+%22SHomeUiT.danny.e%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Danny+Engrid%22%2C%0A++++++%22team%22%3A+%22Team+2%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22alice.tmms%40SHomeUiT.CS4215%22%3A+%7B%0A++++++%22email%22%3A+%22alice.tmms.DZW2WCQY%40gmail.com%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS4215%22%2C%0A++++++%22name%22%3A+%22Amy+Betsy%3C%2Foption%3E%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22googleId%22%3A+%22alice.tmms.DZW2WCQY%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Amy+Betsy%3C%2Foption%3E%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22team%22%3A+%22Team+1%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22alice.tmms%40SHomeUiT.CS4221%22%3A+%7B%0A++++++%22email%22%3A+%22alice.tmms.DZW2WCQY%40gmail.com%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.CS4221%22%2C%0A++++++%22name%22%3A+%22Amy+Betsy%22%2C%0A++++++%22googleId%22%3A+%22alice.tmms.DZW2WCQY%22%2C%0A++++++%22comments%22%3A+%22This+student%27s+name+is+Amy+Betsy%22%2C%0A++++++%22team%22%3A+%22Team+1%3C%2Ftd%3E%3C%2Fdiv%3E%27%5C%22%22%2C%0A++++++%22section%22%3A+%22None%22%0A++++%7D%2C%0A++++%22SHomeUiT.student1InTestingSanitizationCourse%22%3A+%7B%0A++++++%22email%22%3A+%22SHomeUiT.normal%40sanitization.tmt%22%2C%0A++++++%22course%22%3A+%22SHomeUiT.idOfTestingSanitizationCourse%22%2C%0A++++++%22name%22%3A+%22Stud1%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22googleId%22%3A+%22SHomeUiT.student1InTestingSanitizationCourse%22%2C%0A++++++%22comments%22%3A+%22%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22team%22%3A+%22Team+tags%26%5C%22%3C%2Ftd%3E%22%2C%0A++++++%22section%22%3A+%22Section%27%3C%2Ftd%3E%22%0A++++%7D%0A++%7D%2C%0A++%22feedbackSessions%22%3A+%7B%0A++++%22SHomeUiT.CS2104%3AFirst+Feedback+Session%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22First+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22creatorEmail%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22instructions%22%3A+%22Please+please+fill+in+the+following+questions.%22%2C%0A++++++%22createdTime%22%3A+%222012-03-20T23%3A59%3A00Z%22%2C%0A++++++%22startTime%22%3A+%222012-04-01T15%3A59%3A00Z%22%2C%0A++++++%22endTime%22%3A+%222027-04-30T15%3A59%3A00Z%22%2C%0A++++++%22sessionVisibleFromTime%22%3A+%222012-03-28T15%3A59%3A00Z%22%2C%0A++++++%22resultsVisibleFromTime%22%3A+%222027-05-01T15%3A59%3A00Z%22%2C%0A++++++%22timeZone%22%3A+%22Asia%2FSingapore%22%2C%0A++++++%22gracePeriod%22%3A+10%2C%0A++++++%22sentOpenEmail%22%3A+true%2C%0A++++++%22sentClosingEmail%22%3A+false%2C%0A++++++%22sentClosedEmail%22%3A+false%2C%0A++++++%22sentPublishedEmail%22%3A+false%2C%0A++++++%22isOpeningEmailEnabled%22%3A+true%2C%0A++++++%22isClosingEmailEnabled%22%3A+true%2C%0A++++++%22isPublishedEmailEnabled%22%3A+true%0A++++%7D%2C%0A++++%22SHomeUiT.CS2104%3AGraced+Feedback+Session%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22Graced+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22creatorEmail%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22instructions%22%3A+%22Please+please+fill+in+the+following+questions.%22%2C%0A++++++%22createdTime%22%3A+%222012-03-20T23%3A59%3A00Z%22%2C%0A++++++%22startTime%22%3A+%222012-04-01T15%3A59%3A00Z%22%2C%0A++++++%22endTime%22%3A+%222013-04-30T15%3A59%3A00Z%22%2C%0A++++++%22sessionVisibleFromTime%22%3A+%222012-03-28T15%3A59%3A00Z%22%2C%0A++++++%22resultsVisibleFromTime%22%3A+%222027-05-01T15%3A59%3A00Z%22%2C%0A++++++%22timeZone%22%3A+%22Asia%2FSingapore%22%2C%0A++++++%22gracePeriod%22%3A+1440%2C%0A++++++%22sentOpenEmail%22%3A+true%2C%0A++++++%22sentClosingEmail%22%3A+false%2C%0A++++++%22sentClosedEmail%22%3A+false%2C%0A++++++%22sentPublishedEmail%22%3A+false%2C%0A++++++%22isOpeningEmailEnabled%22%3A+true%2C%0A++++++%22isClosingEmailEnabled%22%3A+true%2C%0A++++++%22isPublishedEmailEnabled%22%3A+true%0A++++%7D%2C%0A++++%22SHomeUiT.CS2104%3ANo+Question+Feedback+Session%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22No+Question+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22creatorEmail%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22instructions%22%3A+%22Please+please+fill+in+the+following+questions.%22%2C%0A++++++%22createdTime%22%3A+%222012-03-20T23%3A59%3A00Z%22%2C%0A++++++%22startTime%22%3A+%222012-04-01T15%3A59%3A00Z%22%2C%0A++++++%22endTime%22%3A+%222027-04-30T15%3A59%3A00Z%22%2C%0A++++++%22sessionVisibleFromTime%22%3A+%222012-03-28T15%3A59%3A00Z%22%2C%0A++++++%22resultsVisibleFromTime%22%3A+%222027-05-01T15%3A59%3A00Z%22%2C%0A++++++%22timeZone%22%3A+%22Asia%2FSingapore%22%2C%0A++++++%22gracePeriod%22%3A+0%2C%0A++++++%22sentOpenEmail%22%3A+true%2C%0A++++++%22sentClosingEmail%22%3A+false%2C%0A++++++%22sentClosedEmail%22%3A+false%2C%0A++++++%22sentPublishedEmail%22%3A+false%2C%0A++++++%22isOpeningEmailEnabled%22%3A+true%2C%0A++++++%22isClosingEmailEnabled%22%3A+true%2C%0A++++++%22isPublishedEmailEnabled%22%3A+true%0A++++%7D%2C%0A++++%22SHomeUiT.CS2104%3AFuture+Feedback+Session%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22Future+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22creatorEmail%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22instructions%22%3A+%22Please+please+fill+in+the+following+questions.%22%2C%0A++++++%22createdTime%22%3A+%222012-03-20T23%3A59%3A00Z%22%2C%0A++++++%22startTime%22%3A+%222034-04-01T15%3A59%3A00Z%22%2C%0A++++++%22endTime%22%3A+%222035-04-30T15%3A59%3A00Z%22%2C%0A++++++%22sessionVisibleFromTime%22%3A+%222034-03-28T15%3A59%3A00Z%22%2C%0A++++++%22resultsVisibleFromTime%22%3A+%222036-05-01T15%3A59%3A00Z%22%2C%0A++++++%22timeZone%22%3A+%22Asia%2FSingapore%22%2C%0A++++++%22gracePeriod%22%3A+0%2C%0A++++++%22sentOpenEmail%22%3A+true%2C%0A++++++%22sentClosingEmail%22%3A+false%2C%0A++++++%22sentClosedEmail%22%3A+false%2C%0A++++++%22sentPublishedEmail%22%3A+false%2C%0A++++++%22isOpeningEmailEnabled%22%3A+true%2C%0A++++++%22isClosingEmailEnabled%22%3A+true%2C%0A++++++%22isPublishedEmailEnabled%22%3A+true%0A++++%7D%2C%0A++++%22SHomeUiT.CS2104%3AClosed+Feedback+Session%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22Closed+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22creatorEmail%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22instructions%22%3A+%22Please+please+fill+in+the+following+questions.%22%2C%0A++++++%22createdTime%22%3A+%222012-03-20T23%3A59%3A00Z%22%2C%0A++++++%22startTime%22%3A+%222012-04-01T15%3A59%3A00Z%22%2C%0A++++++%22endTime%22%3A+%222012-04-30T15%3A59%3A00Z%22%2C%0A++++++%22sessionVisibleFromTime%22%3A+%222012-03-28T15%3A59%3A00Z%22%2C%0A++++++%22resultsVisibleFromTime%22%3A+%222012-05-01T15%3A59%3A00Z%22%2C%0A++++++%22timeZone%22%3A+%22Asia%2FSingapore%22%2C%0A++++++%22gracePeriod%22%3A+0%2C%0A++++++%22sentOpenEmail%22%3A+true%2C%0A++++++%22sentClosingEmail%22%3A+false%2C%0A++++++%22sentClosedEmail%22%3A+false%2C%0A++++++%22sentPublishedEmail%22%3A+false%2C%0A++++++%22isOpeningEmailEnabled%22%3A+true%2C%0A++++++%22isClosingEmailEnabled%22%3A+true%2C%0A++++++%22isPublishedEmailEnabled%22%3A+true%0A++++%7D%2C%0A++++%22SHomeUiT.CS4221%3ASession+with+no+Student+Questions%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22Session+without+Student+Questions%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS4221%22%2C%0A++++++%22creatorEmail%22%3A+%22SHomeUiT.instr%40gmail.tmt%22%2C%0A++++++%22instructions%22%3A+%22Please+please+fill+in+the+following+questions.%22%2C%0A++++++%22createdTime%22%3A+%222012-03-20T23%3A59%3A00Z%22%2C%0A++++++%22startTime%22%3A+%222012-04-01T15%3A59%3A00Z%22%2C%0A++++++%22endTime%22%3A+%222035-04-30T15%3A59%3A00Z%22%2C%0A++++++%22sessionVisibleFromTime%22%3A+%222012-03-28T15%3A59%3A00Z%22%2C%0A++++++%22resultsVisibleFromTime%22%3A+%222012-05-01T15%3A59%3A00Z%22%2C%0A++++++%22timeZone%22%3A+%22Asia%2FSingapore%22%2C%0A++++++%22gracePeriod%22%3A+0%2C%0A++++++%22sentOpenEmail%22%3A+true%2C%0A++++++%22sentClosingEmail%22%3A+false%2C%0A++++++%22sentClosedEmail%22%3A+false%2C%0A++++++%22sentPublishedEmail%22%3A+false%2C%0A++++++%22isOpeningEmailEnabled%22%3A+true%2C%0A++++++%22isClosingEmailEnabled%22%3A+true%2C%0A++++++%22isPublishedEmailEnabled%22%3A+true%0A++++%7D%0A++%7D%2C%0A++%22feedbackQuestions%22%3A+%7B%0A++++%22SHomeUiT.CS2104%3AFirst+Feedback+Session%3AQ1%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22First+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22questionMetaData%22%3A+%22Rate+5+other+students%27+products%22%2C%0A++++++%22questionNumber%22%3A+1%2C%0A++++++%22questionType%22%3A+%22TEXT%22%2C%0A++++++%22giverType%22%3A+%22STUDENTS%22%2C%0A++++++%22recipientType%22%3A+%22STUDENTS%22%2C%0A++++++%22numberOfEntitiesToGiveFeedbackTo%22%3A+5%2C%0A++++++%22showResponsesTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%0A++++++%5D%2C%0A++++++%22showGiverNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%0A++++++%5D%2C%0A++++++%22showRecipientNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%0A++++++%5D%0A++++%7D%2C%0A++++%22SHomeUiT.CS2104%3AGraced+Feedback+Session%3AQ1%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22Graced+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22questionMetaData%22%3A+%22Rate+5+other+students%27+products%22%2C%0A++++++%22questionNumber%22%3A+1%2C%0A++++++%22questionType%22%3A+%22TEXT%22%2C%0A++++++%22giverType%22%3A+%22STUDENTS%22%2C%0A++++++%22recipientType%22%3A+%22STUDENTS%22%2C%0A++++++%22numberOfEntitiesToGiveFeedbackTo%22%3A+5%2C%0A++++++%22showResponsesTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%0A++++++%5D%2C%0A++++++%22showGiverNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%0A++++++%5D%2C%0A++++++%22showRecipientNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%0A++++++%5D%0A++++%7D%2C%0A++++%22SHomeUiT.CS2104%3AFuture+Feedback+Session%3AQ1%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22Future+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22questionMetaData%22%3A+%22Rate+5+other+students%27+products%22%2C%0A++++++%22questionNumber%22%3A+1%2C%0A++++++%22questionType%22%3A+%22TEXT%22%2C%0A++++++%22giverType%22%3A+%22STUDENTS%22%2C%0A++++++%22recipientType%22%3A+%22STUDENTS%22%2C%0A++++++%22numberOfEntitiesToGiveFeedbackTo%22%3A+5%2C%0A++++++%22showResponsesTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%0A++++++%5D%2C%0A++++++%22showGiverNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%0A++++++%5D%2C%0A++++++%22showRecipientNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%0A++++++%5D%0A++++%7D%2C%0A++++%22SHomeUiT.CS2104%3AClosed+Feedback+Session%3AQ1%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22Closed+Feedback+Session%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS2104%22%2C%0A++++++%22questionMetaData%22%3A+%22Rate+5+other+students%27+products%22%2C%0A++++++%22questionNumber%22%3A+1%2C%0A++++++%22questionType%22%3A+%22TEXT%22%2C%0A++++++%22giverType%22%3A+%22STUDENTS%22%2C%0A++++++%22recipientType%22%3A+%22STUDENTS%22%2C%0A++++++%22numberOfEntitiesToGiveFeedbackTo%22%3A+5%2C%0A++++++%22showResponsesTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%0A++++++%5D%2C%0A++++++%22showGiverNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%0A++++++%5D%2C%0A++++++%22showRecipientNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%0A++++++%5D%0A++++%7D%2C%0A++++%22SHomeUiT.CS4221%3AFeedback+Session+without+Student+Questions%3AQ1%22%3A+%7B%0A++++++%22feedbackSessionName%22%3A+%22Session+without+Student+Questions%22%2C%0A++++++%22courseId%22%3A+%22SHomeUiT.CS4221%22%2C%0A++++++%22questionMetaData%22%3A+%22This+is+a+session+without+questions+for+students%22%2C%0A++++++%22questionNumber%22%3A+1%2C%0A++++++%22questionType%22%3A+%22TEXT%22%2C%0A++++++%22giverType%22%3A+%22INSTRUCTORS%22%2C%0A++++++%22recipientType%22%3A+%22INSTRUCTORS%22%2C%0A++++++%22numberOfEntitiesToGiveFeedbackTo%22%3A+5%2C%0A++++++%22showResponsesTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%2C%0A++++++++%22STUDENTS%22%0A++++++%5D%2C%0A++++++%22showGiverNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%0A++++++%5D%2C%0A++++++%22showRecipientNameTo%22%3A+%5B%0A++++++++%22INSTRUCTORS%22%2C%0A++++++++%22RECEIVER%22%2C%0A++++++++%22STUDENTS%22%0A++++++%5D%0A++++%7D%0A++%7D%2C%0A++%22feedbackResponses%22%3A+%7B%7D%2C%0A++%22feedbackResponseComments%22%3A+%7B%7D%2C%0A++%22profiles%22%3A+%7B%0A++++%22SHomeUiT.student1InTestingSanitizationCourse%22%3A+%7B%0A++++++%22googleId%22%3A+%22student1InTestingSanitizationCourse%22%2C%0A++++++%22shortName%22%3A+%22Stud1%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22email%22%3A+%22weird%26%27%40gmail.tmt%22%2C%0A++++++%22institute%22%3A+%22inst%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22nationality%22%3A+%22American%22%2C%0A++++++%22gender%22%3A+%22OTHER%22%2C%0A++++++%22moreInfo%22%3A+%22I+am+just+a+student+%3AP%3Cscript%3E+alert%28%27hi%21%27%29%3B+%3C%2Fscript%3E%22%2C%0A++++++%22pictureKey%22%3A+%22%22%0A++++%7D%0A++%7D%0A%7D

        DataBundleLogic dataBundleLogic = DataBundleLogic.inst();
        DataBundle dataBundle = JsonUtils.fromJson(dataBundleJsonString, DataBundle.class);

        try {
            dataBundleLogic.removeDataBundle(dataBundle);
            dataBundleLogic.persistDataBundle(dataBundle);

        } catch (InvalidParametersException e) {
            return new JsonResult("Empty databundle detected");
        }

        return new JsonResult( "Data successfully removed and restored.", HttpStatus.SC_OK);
    }
}
