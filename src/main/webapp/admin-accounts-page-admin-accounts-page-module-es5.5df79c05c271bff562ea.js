function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"++8I":function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var n=s("vMQM"),c=s("fXoL"),r=s("mW1j"),o=function(){var t=function(){function t(e){_classCallCheck(this,t),this.httpRequestService=e}return _createClass(t,[{key:"loadInstructors",value:function(t){var e={courseid:t.courseId};return t.intent&&(e.intent=t.intent),this.httpRequestService.get(n.d.INSTRUCTORS,e)}},{key:"getInstructor",value:function(t){var e={courseid:t.courseId,intent:t.intent};return t.feedbackSessionName&&(e.fsname=t.feedbackSessionName),t.key&&(e.key=t.key),t.moderatedPerson&&(e.moderatedperson=t.moderatedPerson),t.previewAs&&(e.previewas=t.previewAs),this.httpRequestService.get(n.d.INSTRUCTOR,e)}},{key:"createInstructor",value:function(t){return this.httpRequestService.post(n.d.INSTRUCTOR,{courseid:t.courseId},t.requestBody)}},{key:"updateInstructor",value:function(t){return this.httpRequestService.put(n.d.INSTRUCTOR,{courseid:t.courseId},t.requestBody)}},{key:"deleteInstructor",value:function(t){var e={courseid:t.courseId};return t.instructorEmail&&(e.instructoremail=t.instructorEmail),t.instructorId&&(e.instructorid=t.instructorId),this.httpRequestService.delete(n.d.INSTRUCTOR,e)}},{key:"loadInstructorPrivilege",value:function(t){var e={courseid:t.courseId};return t.feedbackSessionName&&(e.fsname=t.feedbackSessionName),t.sectionName&&(e.sectionname=t.sectionName),t.instructorRole&&(e.instructorrole=t.instructorRole),t.instructorEmail&&(e.instructoremail=t.instructorEmail),t.instructorId&&(e.instructorid=t.instructorId),this.httpRequestService.get(n.d.INSTRUCTOR_PRIVILEGE,e)}},{key:"updateInstructorPrivilege",value:function(t){return this.httpRequestService.put(n.d.INSTRUCTOR_PRIVILEGE,{courseid:t.courseId,instructoremail:t.instructorEmail},t.requestBody)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.ec(r.a))},t.\u0275prov=c.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},vk7v:function(t,e,s){"use strict";s.r(e),s.d(e,"AdminAccountsPageModule",(function(){return T}));var n=s("ofXK"),c=s("tyNb"),r=s("aSpy"),o=s("nYR2"),i=s("fXoL"),u=s("++8I"),a=s("iRmZ"),d=s("Pvcr"),b=s("Uqoa"),l=s("PWrf"),f=s("vKUq"),g=s("Lcal");function v(t,e){if(1&t){var s=i.Xb();i.Wb(0,"button",15),i.ic("click",(function(){return i.Fc(s),i.kc(3).downgradeAccountToStudent()})),i.Rb(1,"i",16),i.Qc(2," Downgrade to Student "),i.Vb()}}function I(t,e){if(1&t){var s=i.Xb();i.Wb(0,"div",3),i.Wb(1,"div",4),i.Wb(2,"label",5),i.Qc(3,"Google ID:"),i.Vb(),i.Wb(4,"div",6),i.Qc(5),i.Vb(),i.Wb(6,"label",5),i.Qc(7,"Name:"),i.Vb(),i.Wb(8,"div",7),i.Qc(9),i.Vb(),i.Wb(10,"label",5),i.Qc(11,"Email:"),i.Vb(),i.Wb(12,"div",8),i.Qc(13),i.Vb(),i.Wb(14,"label",5),i.Qc(15,"Institute:"),i.Vb(),i.Wb(16,"div",9),i.Qc(17),i.Vb(),i.Wb(18,"label",5),i.Qc(19,"Is Instructor:"),i.Vb(),i.Wb(20,"div",10),i.Qc(21),i.Vb(),i.Wb(22,"div",11),i.Oc(23,v,3,0,"button",12),i.Wb(24,"button",13),i.ic("click",(function(){return i.Fc(s),i.kc(2).deleteAccount()})),i.Rb(25,"i",14),i.Qc(26," Delete Account "),i.Vb(),i.Vb(),i.Vb(),i.Vb()}if(2&t){var n=i.kc(2);i.Cb(5),i.Rc(n.accountInfo.googleId),i.Cb(4),i.Rc(n.accountInfo.name),i.Cb(4),i.Rc(n.accountInfo.email),i.Cb(4),i.Rc(n.accountInfo.institute),i.Cb(4),i.Rc(n.accountInfo.isInstructor),i.Cb(2),i.sc("ngIf",n.accountInfo.isInstructor)}}function h(t,e){if(1&t&&(i.Wb(0,"div"),i.Oc(1,I,27,6,"div",2),i.Vb()),2&t){var s=i.kc();i.Cb(1),i.sc("ngIf",s.accountInfo.googleId)}}function m(t,e){if(1&t){var s=i.Xb();i.Wb(0,"tr"),i.Wb(1,"td"),i.Qc(2),i.Vb(),i.Wb(3,"td"),i.Wb(4,"button",22),i.ic("click",(function(){i.Fc(s);var t=e.$implicit;return i.kc(3).removeInstructorFromCourse(t.courseId)})),i.Rb(5,"i",14),i.Qc(6," Remove From Course "),i.Vb(),i.Vb(),i.Vb()}if(2&t){var n=e.$implicit;i.Cb(2),i.Tc("[",n.courseId,"] ",n.courseName,"")}}function C(t,e){if(1&t&&(i.Wb(0,"div",19),i.Wb(1,"table",20),i.Wb(2,"thead"),i.Wb(3,"tr"),i.Wb(4,"th"),i.Qc(5,"Course"),i.Vb(),i.Wb(6,"th"),i.Qc(7,"Options"),i.Vb(),i.Vb(),i.Vb(),i.Wb(8,"tbody"),i.Oc(9,m,7,2,"tr",21),i.Vb(),i.Vb(),i.Vb()),2&t){var s=i.kc(2);i.Cb(9),i.sc("ngForOf",s.instructorCourses)}}function p(t,e){1&t&&(i.Wb(0,"div",23),i.Rb(1,"i",24),i.Qc(2," This account is not an instructor. "),i.Vb())}function S(t,e){1&t&&(i.Wb(0,"div",23),i.Rb(1,"i",24),i.Qc(2," No instructor courses found for this account. "),i.Vb())}function W(t,e){if(1&t&&(i.Wb(0,"div"),i.Oc(1,C,10,1,"div",17),i.Oc(2,p,3,0,"div",18),i.Oc(3,S,3,0,"div",18),i.Vb()),2&t){var s=i.kc();i.Cb(1),i.sc("ngIf",s.instructorCourses.length),i.Cb(1),i.sc("ngIf",!s.accountInfo.isInstructor),i.Cb(1),i.sc("ngIf",s.accountInfo.isInstructor&&!s.instructorCourses.length)}}function k(t,e){if(1&t){var s=i.Xb();i.Wb(0,"tr"),i.Wb(1,"td"),i.Qc(2),i.Vb(),i.Wb(3,"td"),i.Wb(4,"button",22),i.ic("click",(function(){i.Fc(s);var t=e.$implicit;return i.kc(3).removeStudentFromCourse(t.courseId)})),i.Rb(5,"i",14),i.Qc(6," Remove From Course "),i.Vb(),i.Vb(),i.Vb()}if(2&t){var n=e.$implicit;i.Cb(2),i.Tc("[",n.courseId,"] ",n.courseName,"")}}function V(t,e){if(1&t&&(i.Wb(0,"div",19),i.Wb(1,"table",25),i.Wb(2,"thead"),i.Wb(3,"tr"),i.Wb(4,"th"),i.Qc(5,"Course"),i.Vb(),i.Wb(6,"th"),i.Qc(7,"Options"),i.Vb(),i.Vb(),i.Vb(),i.Wb(8,"tbody"),i.Oc(9,k,7,2,"tr",21),i.Vb(),i.Vb(),i.Vb()),2&t){var s=i.kc(2);i.Cb(9),i.sc("ngForOf",s.studentCourses)}}function R(t,e){1&t&&(i.Wb(0,"div",23),i.Rb(1,"i",24),i.Qc(2," No student courses found for this account. "),i.Vb())}function y(t,e){if(1&t&&(i.Wb(0,"div"),i.Oc(1,V,10,1,"div",17),i.Oc(2,R,3,0,"div",18),i.Vb()),2&t){var s=i.kc();i.Cb(1),i.sc("ngIf",s.studentCourses.length),i.Cb(1),i.sc("ngIf",!s.studentCourses.length)}}var w,Q,O=[{path:"",component:(w=function(){function t(e,s,n,c,r,o,i,u){_classCallCheck(this,t),this.route=e,this.router=s,this.instructorService=n,this.studentService=c,this.navigationService=r,this.statusMessageService=o,this.accountService=i,this.courseService=u,this.instructorCourses=[],this.studentCourses=[],this.accountInfo={googleId:"",name:"",email:"",isInstructor:!1,institute:"",createdAtTimeStamp:0},this.isLoadingAccountInfo=!1,this.isLoadingStudentCourses=!1,this.isLoadingInstructorCourses=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.route.queryParams.subscribe((function(e){t.loadAccountInfo(e.instructorid)}))}},{key:"loadAccountInfo",value:function(t){var e=this;this.isLoadingAccountInfo=!0,this.accountService.getAccount(t).pipe(Object(o.a)((function(){return e.isLoadingAccountInfo=!1}))).subscribe((function(t){e.accountInfo=t}),(function(t){e.statusMessageService.showErrorToast(t.error.message)})),this.isLoadingStudentCourses=!0,this.courseService.getStudentCoursesInMasqueradeMode(t).pipe(Object(o.a)((function(){return e.isLoadingStudentCourses=!1}))).subscribe((function(t){e.studentCourses=t.courses}),(function(t){403!==t.status&&e.statusMessageService.showErrorToast(t.error.message)})),this.isLoadingInstructorCourses=!0,this.courseService.getInstructorCoursesInMasqueradeMode(t).pipe(Object(o.a)((function(){return e.isLoadingInstructorCourses=!1}))).subscribe((function(t){e.instructorCourses=t.courses}),(function(t){403!==t.status&&e.statusMessageService.showErrorToast(t.error.message)}))}},{key:"downgradeAccountToStudent",value:function(){var t=this,e=this.accountInfo.googleId;this.accountService.downgradeAccount(e).subscribe((function(){t.instructorCourses=[],t.loadAccountInfo(e),t.statusMessageService.showSuccessToast("Instructor account is successfully downgraded to student.")}),(function(e){t.statusMessageService.showErrorToast(e.error.message)}))}},{key:"deleteAccount",value:function(){var t=this,e=this.accountInfo.googleId;this.accountService.deleteAccount(e).subscribe((function(){t.navigationService.navigateWithSuccessMessage(t.router,"/web/admin/search",'Account "'.concat(e,'" is successfully deleted.'))}),(function(e){t.statusMessageService.showErrorToast(e.error.message)}))}},{key:"removeStudentFromCourse",value:function(t){var e=this;this.studentService.deleteStudent({courseId:t,googleId:this.accountInfo.googleId}).subscribe((function(){e.studentCourses=e.studentCourses.filter((function(e){return e.courseId!==t})),e.statusMessageService.showSuccessToast('Student is successfully deleted from course "'.concat(t,'"'))}),(function(t){e.statusMessageService.showErrorToast(t.error.message)}))}},{key:"removeInstructorFromCourse",value:function(t){var e=this;this.instructorService.deleteInstructor({courseId:t,instructorId:this.accountInfo.googleId}).subscribe((function(){e.instructorCourses=e.instructorCourses.filter((function(e){return e.courseId!==t})),e.statusMessageService.showSuccessToast('Instructor is successfully deleted from course "'.concat(t,'"'))}),(function(t){e.statusMessageService.showErrorToast(t.error.message)}))}}]),t}(),w.\u0275fac=function(t){return new(t||w)(i.Qb(c.a),i.Qb(c.d),i.Qb(u.a),i.Qb(a.a),i.Qb(d.a),i.Qb(b.a),i.Qb(l.a),i.Qb(f.a))},w.\u0275cmp=i.Kb({type:w,selectors:[["tm-admin-accounts-page"]],decls:7,vars:5,consts:[[4,"tmIsLoading"],[2,"margin-top","20px","margin-bottom","30px"],["class","card bg-light","style","margin-top: 30px;",4,"ngIf"],[1,"card","bg-light",2,"margin-top","30px"],[1,"card-body","row",2,"padding","25px 40px"],[1,"col-sm-2","control-label"],["id","account-google-id",1,"col-sm-10"],["id","account-name",1,"col-sm-10"],["id","account-email",1,"col-sm-10"],["id","account-institute",1,"col-sm-10"],["id","account-is-instructor",1,"col-sm-10"],[1,"mx-auto",2,"margin-top","20px"],["id","btn-downgrade-account","class","btn btn-sm btn-warning","style","margin-right: 10px;",3,"click",4,"ngIf"],["id","btn-delete-account",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash-alt"],["id","btn-downgrade-account",1,"btn","btn-sm","btn-warning",2,"margin-right","10px",3,"click"],[1,"fas","fa-times"],["class","card bg-light",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"card","bg-light"],["id","instructor-table",1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"alert","alert-warning"],[1,"fas","fa-exclamation-circle"],["id","student-table",1,"table","table-striped"]],template:function(t,e){1&t&&(i.Oc(0,h,2,1,"div",0),i.Wb(1,"h3",1),i.Qc(2),i.Vb(),i.Oc(3,W,4,3,"div",0),i.Wb(4,"h3",1),i.Qc(5),i.Vb(),i.Oc(6,y,3,2,"div",0)),2&t&&(i.sc("tmIsLoading",e.isLoadingAccountInfo),i.Cb(2),i.Sc(" Instructor For ",e.instructorCourses.length," Courses\n"),i.Cb(1),i.sc("tmIsLoading",e.isLoadingInstructorCourses),i.Cb(2),i.Sc(" Student For ",e.studentCourses.length," Courses\n"),i.Cb(1),i.sc("tmIsLoading",e.isLoadingStudentCourses))},directives:[g.a,n.u,n.t],styles:[".control-label[_ngcontent-%COMP%]{font-weight:600}"]}),w)}],T=((Q=function t(){_classCallCheck(this,t)}).\u0275mod=i.Ob({type:Q}),Q.\u0275inj=i.Nb({factory:function(t){return new(t||Q)},imports:[[n.c,c.h.forChild(O),r.a]]}),Q)}}]);