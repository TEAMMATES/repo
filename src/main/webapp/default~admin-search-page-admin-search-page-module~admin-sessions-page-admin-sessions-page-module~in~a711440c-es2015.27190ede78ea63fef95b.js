(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"4JDO":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));class i{static getTextFromHtml(e){const t=(new DOMParser).parseFromString(e,"text/html");return(t.documentElement.innerText||t.documentElement.textContent||e).replace(/\r?\n|\r/g," ")}static convertImageToLinkInHtml(e){const t=(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("img");if(!t.length)return"";let s=" Images Link: ";for(let i=0;i<t.length;i+=1){const e=t.item(i);e&&(s+=e.src+" ")}return s}static removeExtraSpace(e){return e.trim().replace(/\s+/g," ")}static integerToLowerCaseAlphabeticalIndex(e){let t="",s=e;for(;s>0;){s-=1;const e=s%26;t+=String.fromCharCode(e+97),s=(s-e)/26}return t}static removeAnonymousHash(e){return e.replace(/Anonymous (student|instructor|team) [0-9]{1,10}/,"Anonymous $1")}}},"5HvB":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s("7YQd"),n=s("fXoL");let r=(()=>{class e extends i.a{constructor(e){super(e),this.teamToRecipientToScores={}}calculateStatistics(){this.teamToRecipientToScores={};for(const e of this.responses){const{giver:t}=e,{recipient:s}=e,{recipientTeam:i}=e;this.teamToRecipientToScores[i]=this.teamToRecipientToScores[i]||{},this.teamToRecipientToScores[i][s]=this.teamToRecipientToScores[i][s]||{responses:[]},this.teamToRecipientToScores[i][s].responses.push({answer:e.responseDetails.answer,isSelf:t===s})}for(const e of Object.keys(this.teamToRecipientToScores))for(const t of Object.keys(this.teamToRecipientToScores[e])){const s=this.teamToRecipientToScores[e][t],i=s.responses.map(e=>e.answer);s.max=Math.max(...i),s.min=Math.min(...i);const n=i.reduce((e,t)=>e+t,0)/i.length;s.average=+n.toFixed(2);const r=s.responses.filter(e=>!e.isSelf).map(e=>e.answer);if(r.length){const e=r.reduce((e,t)=>e+t,0)/r.length;s.averageExcludingSelf=+e.toFixed(2)}else s.averageExcludingSelf=0}}}return e.\u0275fac=function(e){n.hc()},e.\u0275dir=n.Lb({type:e,features:[n.zb]}),e})()},"768o":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s("R8lv");var i=s("RmXC"),n=s("7YQd"),r=s("fXoL");let o=(()=>{class e extends n.a{constructor(e){super(e),this.statistics="",this.emailToTeamName={},this.emailToName={},this.emailToDiff={}}parseStatistics(){if(this.emailToTeamName={},this.emailToName={},this.questionOverallStatistics={results:{}},this.questionStatisticsForStudent={claimed:0,perceived:0,claimedOthers:{},claimedOthersValues:[],perceivedOthers:[]},this.statistics){const e=JSON.parse(this.statistics);if(this.isStudent){const t=Object.values(e.results);t.length&&(this.questionStatisticsForStudent=Object.assign(Object.assign({},t[0]),{claimedOthersValues:Object.values(t[0].claimedOthers).sort((e,t)=>t-e)}))}else{for(const e of this.responses)e.recipientEmail&&(this.emailToTeamName[e.recipientEmail]||(this.emailToTeamName[e.recipientEmail]=e.recipientTeam),this.emailToName[e.recipientEmail]||(this.emailToName[e.recipientEmail]=e.recipient));this.questionOverallStatistics=e;for(const e of Object.keys(this.emailToName)){const t=this.questionOverallStatistics.results[e],{claimed:s}=t,{perceived:n}=t;this.emailToDiff[e]=s<0||n<0?i.c:n-s}}}}}return e.\u0275fac=function(e){r.hc()},e.\u0275dir=r.Lb({type:e,inputs:{statistics:"statistics"},features:[r.zb]}),e})()},"7YQd":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s("R8lv"),n=s("fXoL");let r=(()=>{class e{constructor(e){this.responses=[],this.recipientType=i.c.NONE,this.isStudent=!1,this.question=e}ngOnInit(){}}return e.\u0275fac=function(e){n.hc()},e.\u0275dir=n.Lb({type:e,inputs:{responses:"responses",question:"question",recipientType:"recipientType",isStudent:"isStudent"}}),e})()},"BWB/":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s("RmXC"),n=s("7YQd"),r=s("fXoL");let o=(()=>{class e extends n.a{constructor(e){super(e),this.ranksReceivedPerOption={},this.rankPerOption={}}calculateStatistics(){this.ranksReceivedPerOption={},this.rankPerOption={};const e=this.question.options;for(const i of e)this.ranksReceivedPerOption[i]=[];for(const n of this.responses){const t=this.normalizeRanks(n.responseDetails.answers);for(let s=0;s<e.length;s+=1){const n=e[s],r=t[s];r!==i.h&&this.ranksReceivedPerOption[n].push(r)}}const t={};for(const i of Object.keys(this.ranksReceivedPerOption)){this.ranksReceivedPerOption[i].sort((e,t)=>e-t);const e=this.ranksReceivedPerOption[i],s=e.reduce((e,t)=>e+t,0);0!==e.length&&(t[i]=s/e.length)}const s=Object.keys(t).sort((e,s)=>t[e]-t[s]);for(let i=0;i<s.length;i+=1){const e=s[i];if(0===i){this.rankPerOption[e]=1;continue}const n=s[i-1];this.rankPerOption[e]=t[e]===t[n]?this.rankPerOption[n]:i+1}}normalizeRanks(e){const t={};t[i.h]=i.h;const s=JSON.parse(JSON.stringify(e));s.sort((e,t)=>e-t);let n=1;for(const i of s)t[i]||(t[i]=n,n+=1);return e.map(e=>t[e])}}return e.\u0275fac=function(e){r.hc()},e.\u0275dir=r.Lb({type:e,features:[r.zb]}),e})()},C58a:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var i=function(e){return e.EITHER="EITHER",e.GIVER="GIVER",e.EVALUEE="EVALUEE",e.BOTH="BOTH",e}({})},DL64:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s("R8lv"),n=s("7YQd"),r=s("fXoL");let o=(()=>{class e extends n.a{constructor(e){super(e),this.emailToTeamName={},this.emailToName={},this.pointsPerOption={},this.totalPointsPerOption={},this.averagePointsPerOption={}}calculateStatistics(){this.emailToTeamName={},this.emailToName={},this.pointsPerOption={},this.totalPointsPerOption={},this.averagePointsPerOption={};const e=this.recipientType===i.c.TEAMS||this.recipientType===i.c.TEAMS_EXCLUDING_SELF;for(const t of this.responses){const s=e?t.recipient:t.recipientEmail||t.recipient;this.pointsPerOption[s]=this.pointsPerOption[s]||[],this.pointsPerOption[s].push(t.responseDetails.answers[0]),this.emailToTeamName[s]||(this.emailToTeamName[s]=e?"":t.recipientTeam),this.emailToName[s]||(this.emailToName[s]=t.recipient)}for(const t of Object.keys(this.pointsPerOption)){this.pointsPerOption[t].sort((e,t)=>e-t);const e=this.pointsPerOption[t],s=e.reduce((e,t)=>e+t,0);this.totalPointsPerOption[t]=s,this.averagePointsPerOption[t]=+(0===e.length?0:s/e.length).toFixed(2)}}}return e.\u0275fac=function(e){r.hc()},e.\u0275dir=r.Lb({type:e,features:[r.zb]}),e})()},PTBt:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s("7YQd"),n=s("fXoL");let r=(()=>{class e extends i.a{constructor(e){super(e),this.pointsPerOption={},this.totalPointsPerOption={},this.averagePointsPerOption={}}calculateStatistics(){this.pointsPerOption={},this.totalPointsPerOption={},this.averagePointsPerOption={};const e=this.question.constSumOptions;for(const t of e)this.pointsPerOption[t]=[];for(const t of this.responses){const s=t.responseDetails.answers;for(let t=0;t<e.length;t+=1)this.pointsPerOption[e[t]].push(s[t])}for(const t of Object.keys(this.pointsPerOption)){this.pointsPerOption[t].sort((e,t)=>e-t);const e=this.pointsPerOption[t],s=e.reduce((e,t)=>e+t,0);this.totalPointsPerOption[t]=s,this.averagePointsPerOption[t]=+(0===e.length?0:s/e.length).toFixed(2)}}}return e.\u0275fac=function(e){n.hc()},e.\u0275dir=n.Lb({type:e,features:[n.zb]}),e})()},RmXC:function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"e",(function(){return a})),s.d(t,"g",(function(){return h})),s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return p})),s.d(t,"j",(function(){return l})),s.d(t,"f",(function(){return O}));var i=s("vMQM");const n=i.a.CONTRIBUTION_POINT_NOT_SUBMITTED,r=i.a.CONTRIBUTION_POINT_NOT_INITIALIZED,o=i.a.CONTRIBUTION_POINT_NOT_SURE,c=i.a.CONTRIBUTION_POINT_EQUAL_SHARE,a="",h=i.a.NUMERICAL_SCALE_ANSWER_NOT_SUBMITTED,u=i.a.RANK_OPTIONS_ANSWER_NOT_SUBMITTED,p=i.a.RANK_RECIPIENTS_ANSWER_NOT_SUBMITTED,l=-1,O=i.a.NO_VALUE},TpVY:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s("R8lv"),n=s("7YQd"),r=s("fXoL");let o=(()=>{class e extends n.a{constructor(e){super(e),this.emailToTeamName={},this.emailToName={},this.ranksReceivedPerOption={},this.selfRankPerOption={},this.rankPerOption={},this.rankPerOptionExcludeSelf={},this.rankPerOptionInTeam={},this.rankPerOptionInTeamExcludeSelf={}}calculateStatistics(){this.emailToTeamName={},this.emailToName={},this.ranksReceivedPerOption={},this.selfRankPerOption={},this.rankPerOption={},this.rankPerOptionExcludeSelf={},this.rankPerOptionInTeam={},this.rankPerOptionInTeamExcludeSelf={};const e={},t=this.recipientType===i.c.TEAMS||this.recipientType===i.c.TEAMS_EXCLUDING_SELF,s=this.recipientType===i.c.OWN_TEAM_MEMBERS||this.recipientType===i.c.OWN_TEAM_MEMBERS_INCLUDING_SELF,n={};for(const i of this.responses){const r=t?i.recipient:i.recipientEmail||i.recipient;this.ranksReceivedPerOption[r]=this.ranksReceivedPerOption[r]||[],this.ranksReceivedPerOption[r].push(i.responseDetails.answer),i.recipient===i.giver?this.selfRankPerOption[r]=i.responseDetails.answer:(e[r]=e[r]||[],e[r].push(i.responseDetails.answer)),this.emailToTeamName[r]||(this.emailToTeamName[r]=t?"":i.recipientTeam),this.emailToName[r]||(this.emailToName[r]=i.recipient),s&&(n[i.recipientTeam]=n[i.recipientTeam]||[],n[i.recipientTeam].includes(r)||n[i.recipientTeam].push(r))}for(const i of Object.keys(this.ranksReceivedPerOption))this.ranksReceivedPerOption[i].sort((e,t)=>e-t);this.rankPerOption=this.calculateRankPerOption(this.ranksReceivedPerOption),this.rankPerOptionExcludeSelf=this.calculateRankPerOption(e),s&&(this.rankPerOptionInTeam=this.calculateRankPerOptionInTeam(this.ranksReceivedPerOption,n),this.rankPerOptionInTeamExcludeSelf=this.calculateRankPerOptionInTeam(e,n))}calculateRankPerOption(e){const t={};for(const n of Object.keys(e)){const s=e[n],i=s.reduce((e,t)=>e+t,0);0!==s.length&&(t[n]=0===s.length?0:i/s.length)}const s=Object.keys(t).sort((e,s)=>t[e]-t[s]),i={};for(let n=0;n<s.length;n+=1){const e=s[n];if(0===n){i[e]=1;continue}const r=s[n-1];i[e]=t[e]===t[r]?i[r]:n+1}return i}calculateRankPerOptionInTeam(e,t){return Object.keys(t).map(e=>t[e]).map(t=>t.reduce((t,s)=>(t[s]=e[s]||[],t),{})).map(this.calculateRankPerOption).reduce((e,t)=>Object.assign(Object.assign({},e),t),{})}}return e.\u0275fac=function(e){r.hc()},e.\u0275dir=r.Lb({type:e,features:[r.zb]}),e})()},eoFM:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var i=s("C58a"),n=s("vMQM"),r=s("R8lv"),o=s("q1I8"),c=s("RmXC"),a=s("fXoL"),h=s("mW1j");let u=(()=>{class e{constructor(e){this.httpRequestService=e}getDefaultFeedbackResponseDetails(e){switch(e){case r.d.TEXT:return Object(o.s)();case r.d.RANK_OPTIONS:return Object(o.m)();case r.d.RANK_RECIPIENTS:return Object(o.o)();case r.d.CONTRIB:return Object(o.e)();case r.d.NUMSCALE:return Object(o.k)();case r.d.MCQ:return Object(o.g)();case r.d.MSQ:return Object(o.i)();case r.d.RUBRIC:return Object(o.q)();case r.d.CONSTSUM_OPTIONS:case r.d.CONSTSUM_RECIPIENTS:return Object(o.c)();default:throw new Error("Unknown question type "+e)}}isFeedbackResponseDetailsEmpty(e,t){switch(e){case r.d.TEXT:return 0===t.answer.length;case r.d.RANK_OPTIONS:return 0===t.answers.filter(e=>e!==c.h&&null!=e).length;case r.d.RANK_RECIPIENTS:const e=t;return e.answer===c.i||null==e.answer;case r.d.CONTRIB:const s=t;return s.answer===c.c||null==s.answer;case r.d.NUMSCALE:const i=t;return i.answer===c.g||null==i.answer;case r.d.MCQ:const n=t;return 0===n.answer.length&&!n.isOther;case r.d.MSQ:const o=t;return 0===o.answers.length&&!o.isOther;case r.d.RUBRIC:const a=t;return 0===a.answer.length||a.answer.every(e=>e===c.j);case r.d.CONSTSUM_OPTIONS:case r.d.CONSTSUM_RECIPIENTS:return 0===t.answers.length;default:return!0}}isFeedbackResponsesDisplayedOnSection(e,t,s){let n=!0;if(t)switch(s){case i.a.EITHER:n=e.giverSection===t||e.recipientSection===t;break;case i.a.GIVER:n=e.giverSection===t;break;case i.a.EVALUEE:n=e.recipientSection===t;break;case i.a.BOTH:n=e.giverSection===t&&e.recipientSection===t}return n}getFeedbackResponse(e){return this.httpRequestService.get(n.d.RESPONSES,{questionid:e.questionId,intent:e.intent,key:e.key,moderatedperson:e.moderatedPerson})}submitFeedbackResponses(e,t={},s){return this.httpRequestService.put(n.d.RESPONSES,Object.assign({questionid:e},t),s)}}return e.\u0275fac=function(t){return new(t||e)(a.ec(h.a))},e.\u0275prov=a.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},jA8U:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s("7YQd"),n=s("fXoL");let r=(()=>{class e extends i.a{constructor(e){super(e),this.answerFrequency={},this.percentagePerOption={},this.weightPerOption={},this.weightedPercentagePerOption={},this.perRecipientResponses={}}calculateStatistics(){this.answerFrequency={},this.percentagePerOption={},this.weightPerOption={},this.weightedPercentagePerOption={},this.perRecipientResponses={};for(const e of this.question.mcqChoices)this.answerFrequency[e]=0;this.question.otherEnabled&&(this.answerFrequency.Other=0);for(const e of this.responses){const t=e.responseDetails.isOther?"Other":e.responseDetails.answer;this.answerFrequency[t]=(this.answerFrequency[t]||0)+1}if(this.question.hasAssignedWeights){for(let t=0;t<this.question.mcqChoices.length;t+=1)this.weightPerOption[this.question.mcqChoices[t]]=this.question.mcqWeights[t];this.question.otherEnabled&&(this.weightPerOption.Other=this.question.mcqOtherWeight);let e=0;for(const t of Object.keys(this.answerFrequency))e+=this.weightPerOption[t]*this.answerFrequency[t];for(const t of Object.keys(this.weightPerOption)){const s=this.weightPerOption[t],i=this.answerFrequency[t];this.weightedPercentagePerOption[t]=+(0===e?0:i*s/e*100).toFixed(2)}}for(const e of Object.keys(this.answerFrequency))this.percentagePerOption[e]=+(100*this.answerFrequency[e]/this.responses.length).toFixed(2);if(this.question.hasAssignedWeights){const e={},t={};for(const s of this.responses){e[s.recipient]=e[s.recipient]||{};for(const t of this.question.mcqChoices)e[s.recipient][t]=0;this.question.otherEnabled&&(e[s.recipient].Other=0),t[s.recipient]=s.recipientTeam}for(const s of this.responses){const t=s.responseDetails.isOther?"Other":s.responseDetails.answer;e[s.recipient][t]=e[s.recipient][t]+1}for(const s of Object.keys(e)){const i=e[s];let n=0,r=0,o=0;for(const e of Object.keys(i)){const t=i[e];n+=t*this.weightPerOption[e],o+=t}r=o?n/o:0,this.perRecipientResponses[s]={recipient:s,total:+n.toFixed(5),average:+r.toFixed(2),recipientTeam:t[s],responses:e[s]}}}}}return e.\u0275fac=function(e){n.hc()},e.\u0275dir=n.Lb({type:e,features:[n.zb]}),e})()},khBm:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s("RmXC"),n=s("7YQd"),r=s("fXoL");let o=(()=>{class e extends n.a{constructor(e){super(e),this.subQuestions=[],this.choices=[],this.hasWeights=!1,this.weights=[],this.answers=[],this.percentages=[],this.subQuestionWeightAverage=[],this.answersExcludeSelf=[],this.percentagesExcludeSelf=[],this.subQuestionWeightAverageExcludeSelf=[],this.perRecipientStatsMap={}}calculateStatistics(){this.answers=[],this.percentages=[],this.answersExcludeSelf=[],this.percentagesExcludeSelf=[],this.subQuestionWeightAverage=[],this.subQuestionWeightAverageExcludeSelf=[],this.perRecipientStatsMap={},this.subQuestions=this.question.rubricSubQuestions,this.choices=this.question.rubricChoices,this.hasWeights=this.question.hasAssignedWeights,this.weights=this.question.rubricWeightsForEachCell;const e=[];for(const t of this.question.rubricSubQuestions){const t=[];for(const e of this.question.rubricChoices)t.push(0);e.push(t)}this.answers=JSON.parse(JSON.stringify(e)),this.answersExcludeSelf=JSON.parse(JSON.stringify(e));for(const t of this.responses)for(let e=0;e<t.responseDetails.answer.length;e+=1){const s=t.responseDetails.answer[e];s===i.j||this.isStudent&&"You"!==t.recipient||(this.answers[e][s]+=1,t.recipient!==t.giver&&(this.answersExcludeSelf[e][s]+=1))}if(this.percentages=this.calculatePercentages(this.answers),this.percentagesExcludeSelf=this.calculatePercentages(this.answersExcludeSelf),this.hasWeights&&(this.subQuestionWeightAverage=this.calculateSubQuestionWeightAverage(this.answers),this.subQuestionWeightAverageExcludeSelf=this.calculateSubQuestionWeightAverage(this.answersExcludeSelf)),this.hasWeights){for(const t of this.responses){this.perRecipientStatsMap[t.recipient]=this.perRecipientStatsMap[t.recipient]||{recipientName:t.recipient,recipientEmail:t.recipientEmail,recipientTeam:t.recipientTeam,answers:JSON.parse(JSON.stringify(e)),percentages:[],subQuestionTotalChosenWeight:this.subQuestions.map(()=>0),subQuestionWeightAverage:[]};for(let e=0;e<t.responseDetails.answer.length;e+=1){const s=t.responseDetails.answer[e];s!==i.j&&(this.perRecipientStatsMap[t.recipient].answers[e][s]+=1,this.perRecipientStatsMap[t.recipient].subQuestionTotalChosenWeight[e]+=+this.weights[e][s].toFixed(5))}}for(const e of Object.keys(this.perRecipientStatsMap)){const t=this.perRecipientStatsMap[e];t.percentages=this.calculatePercentages(t.answers),t.subQuestionWeightAverage=this.calculateSubQuestionWeightAverage(t.answers)}}}calculateSubQuestionWeightAverage(e){const t=e.map(e=>e.reduce((e,t)=>e+t,0));return e.map((e,s)=>+(0===t[s]?0:e.reduce((e,t,i)=>e+t*this.weights[s][i],0)/t[s]).toFixed(2))}calculatePercentages(e){const t=JSON.parse(JSON.stringify(e)),s=t.map(e=>e.reduce((e,t)=>e+t,0));for(let i=0;i<e.length;i+=1)for(let n=0;n<e[i].length;n+=1)t[i][n]=0===s[i]?0:+(t[i][n]/s[i]*100).toFixed(2);return t}}return e.\u0275fac=function(e){r.hc()},e.\u0275dir=r.Lb({type:e,features:[r.zb]}),e})()},q1I8:function(e,t,s){"use strict";s.d(t,"r",(function(){return n})),s.d(t,"s",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return h})),s.d(t,"c",(function(){return u})),s.d(t,"j",(function(){return p})),s.d(t,"k",(function(){return l})),s.d(t,"f",(function(){return O})),s.d(t,"g",(function(){return f})),s.d(t,"h",(function(){return T})),s.d(t,"i",(function(){return S})),s.d(t,"p",(function(){return d})),s.d(t,"q",(function(){return E})),s.d(t,"l",(function(){return m})),s.d(t,"m",(function(){return g})),s.d(t,"n",(function(){return P})),s.d(t,"o",(function(){return N}));var i=s("vMQM");const n=()=>JSON.parse(i.c.DEFAULT_TEXT_QUESTION_DETAILS),r=()=>JSON.parse(i.c.DEFAULT_TEXT_RESPONSE_DETAILS),o=()=>JSON.parse(i.c.DEFAULT_CONTRIBUTION_QUESTION_DETAILS),c=()=>JSON.parse(i.c.DEFAULT_CONTRIBUTION_RESPONSE_DETAILS),a=()=>JSON.parse(i.c.DEFAULT_CONSTSUM_OPTIONS_QUESTION_DETAILS),h=()=>JSON.parse(i.c.DEFAULT_CONSTSUM_RECIPIENTS_QUESTION_DETAILS),u=()=>JSON.parse(i.c.DEFAULT_CONSTSUM_RESPONSE_DETAILS),p=()=>JSON.parse(i.c.DEFAULT_NUMSCALE_QUESTION_DETAILS),l=()=>JSON.parse(i.c.DEFAULT_NUMSCALE_RESPONSE_DETAILS),O=()=>JSON.parse(i.c.DEFAULT_MCQ_QUESTION_DETAILS),f=()=>JSON.parse(i.c.DEFAULT_MCQ_RESPONSE_DETAILS),T=()=>JSON.parse(i.c.DEFAULT_MSQ_QUESTION_DETAILS),S=()=>JSON.parse(i.c.DEFAULT_MSQ_RESPONSE_DETAILS),d=()=>JSON.parse(i.c.DEFAULT_RUBRIC_QUESTION_DETAILS),E=()=>JSON.parse(i.c.DEFAULT_RUBRIC_RESPONSE_DETAILS),m=()=>JSON.parse(i.c.DEFAULT_RANK_OPTIONS_QUESTION_DETAILS),g=()=>JSON.parse(i.c.DEFAULT_RANK_OPTIONS_RESPONSE_DETAILS),P=()=>JSON.parse(i.c.DEFAULT_RANK_RECIPIENTS_QUESTION_DETAILS),N=()=>JSON.parse(i.c.DEFAULT_RANK_RECIPIENTS_RESPONSE_DETAILS)},sBl4:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var i=s("R8lv"),n=s("RmXC"),r=s("7YQd"),o=s("fXoL");let c=(()=>{class e extends r.a{constructor(e){super(e),this.answerFrequency={},this.percentagePerOption={},this.weightPerOption={},this.weightedPercentagePerOption={},this.perRecipientResponses={},this.hasAnswers=!1}calculateStatistics(){this.answerFrequency={},this.percentagePerOption={},this.weightPerOption={},this.weightedPercentagePerOption={},this.perRecipientResponses={};for(const i of this.question.msqChoices)this.answerFrequency[i]=0;this.question.otherEnabled&&(this.answerFrequency.Other=0);for(const i of this.responses)this.updateResponseCountPerOptionForResponse(i.responseDetails,this.answerFrequency);const e=Object.values(this.answerFrequency).reduce((e,t)=>e+t,0);if(this.hasAnswers=0!==e,!this.hasAnswers)return;if(this.question.hasAssignedWeights){for(let t=0;t<this.question.msqChoices.length;t+=1)this.weightPerOption[this.question.msqChoices[t]]=this.question.msqWeights[t];this.question.otherEnabled&&(this.weightPerOption.Other=this.question.msqOtherWeight);let e=0;for(const t of Object.keys(this.answerFrequency))e+=this.weightPerOption[t]*this.answerFrequency[t];for(const t of Object.keys(this.weightPerOption)){const s=this.weightPerOption[t],i=this.answerFrequency[t];this.weightedPercentagePerOption[t]=+(0===e?0:i*s/e*100).toFixed(2)}}for(const i of Object.keys(this.answerFrequency))this.percentagePerOption[i]=+(e?100*this.answerFrequency[i]/e:0).toFixed(2);if(!this.question.hasAssignedWeights)return;const t={},s={};for(const i of this.responses){t[i.recipient]=t[i.recipient]||{};for(const e of this.question.msqChoices)t[i.recipient][e]=0;this.question.otherEnabled&&(t[i.recipient].Other=0),s[i.recipient]=i.recipientTeam}for(const i of this.responses)this.updateResponseCountPerOptionForResponse(i.responseDetails,t[i.recipient]);for(const i of Object.keys(t)){const e=t[i];let n=0,r=0,o=0;for(const t of Object.keys(e)){const s=e[t];n+=s*this.weightPerOption[t],o+=s}r=o?n/o:0,this.perRecipientResponses[i]={recipient:i,total:+n.toFixed(5),average:+r.toFixed(2),recipientTeam:s[i],responses:t[i]}}}updateResponseCountPerOptionForResponse(e,t){e.isOther&&(t.Other=(t.Other||0)+1);for(const s of e.answers)s!==n.e&&(-1===this.question.msqChoices.indexOf(s)&&this.question.generateOptionsFor===i.c.NONE||(t[s]=(t[s]||0)+1))}}return e.\u0275fac=function(e){o.hc()},e.\u0275dir=o.Lb({type:e,features:[o.zb]}),e})()}}]);