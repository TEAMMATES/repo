<div class="card">
  <div class="card-header comment-table-header" *ngIf="!model.isAddingNewComment">
    <button (click)="handleAddingNewCommentEvent()" type="button" class="btn btn-secondary btn-sm float-right">
      <i class="fas fa-comment"></i>&nbsp;<i class="fas fa-plus"></i>
    </button>
  </div>

  <ul class="list-group list-group-flush" >
    <li class="list-group-item" *ngFor="let comment of model.commentRows; let i = index; trackBy: trackByIndex">
      <tm-comment-row *ngIf="comment.originalComment" [model]="comment" [isVisibilityOptionEnabled]="true"
                      [isDisabled]="false" [mode]="CommentRowMode.EDIT"
                      [questionShowResponsesTo]="questionShowResponsesTo"
                      [response]="response"
                      (modelChange)="triggerCommentRowChange(i, $event)"
                      (deleteCommentEvent)="triggerDeleteCommentEvent(i)"
                      (saveCommentEvent)="triggerUpdateCommentEvent(i)"
                      (closeEditingEvent)="handleCloseEditingCommentRowEvent(i)"
      ></tm-comment-row>
    </li>
    <!-- "Add new comment" row -->
    <li class="list-group-item" *ngIf="model.isAddingNewComment">
      <tm-comment-row [model]="model.newCommentRow" [isDisabled]="false" [isVisibilityOptionEnabled]="true"
                      [mode]="CommentRowMode.ADD"
                      [questionShowResponsesTo]="questionShowResponsesTo"
                      [response]="response"
                      [shouldHideClosingButton]="shouldHideClosingButtonForNewComment"
                      (modelChange)="triggerModelChange('newCommentRow', $event)"
                      (saveCommentEvent)="triggerSaveNewCommentEvent()"
                      (closeEditingEvent)="triggerModelChange('isAddingNewComment', false)"
      ></tm-comment-row>
    </li>
  </ul>
</div>
