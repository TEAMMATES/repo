(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"++8I":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("vMQM"),i=s("fXoL"),o=s("mW1j");let r=(()=>{class e{constructor(e){this.httpRequestService=e}loadInstructors(e){const t={courseid:e.courseId};return e.intent&&(t.intent=e.intent),this.httpRequestService.get(n.d.INSTRUCTORS,t)}getInstructor(e){const t={courseid:e.courseId,intent:e.intent};return e.feedbackSessionName&&(t.fsname=e.feedbackSessionName),e.key&&(t.key=e.key),e.moderatedPerson&&(t.moderatedperson=e.moderatedPerson),e.previewAs&&(t.previewas=e.previewAs),this.httpRequestService.get(n.d.INSTRUCTOR,t)}createInstructor(e){return this.httpRequestService.post(n.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}updateInstructor(e){return this.httpRequestService.put(n.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}deleteInstructor(e){const t={courseid:e.courseId};return e.instructorEmail&&(t.instructoremail=e.instructorEmail),e.instructorId&&(t.instructorid=e.instructorId),this.httpRequestService.delete(n.d.INSTRUCTOR,t)}loadInstructorPrivilege(e){const t={courseid:e.courseId};return e.feedbackSessionName&&(t.fsname=e.feedbackSessionName),e.sectionName&&(t.sectionname=e.sectionName),e.instructorRole&&(t.instructorrole=e.instructorRole),e.instructorEmail&&(t.instructoremail=e.instructorEmail),e.instructorId&&(t.instructorid=e.instructorId),this.httpRequestService.get(n.d.INSTRUCTOR_PRIVILEGE,t)}updateInstructorPrivilege(e){return this.httpRequestService.put(n.d.INSTRUCTOR_PRIVILEGE,{courseid:e.courseId,instructoremail:e.instructorEmail},e.requestBody)}}return e.\u0275fac=function(t){return new(t||e)(i.ec(o.a))},e.\u0275prov=i.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"6ss9":function(e,t,s){"use strict";s.r(t),s.d(t,"InstructorStudentRecordsPageModule",(function(){return G}));var n=s("ofXK"),i=s("tyNb"),o=s("1kSV"),r=s("KryH"),c=s("bYKa"),a=s("mYbV"),d=s("aSpy"),u=s("RPsU"),l=s("UZZV"),m=s("gEaU"),f=s("nYR2"),b=s("5+tZ"),h=s("lJxs"),p=s("dOUP"),S=s("R8lv"),g=s("9jjE"),v=s("p6cw"),I=s("JUCI"),R=s("gMOI"),C=s("fXoL"),k=s("Rjy1"),y=s("MbNv"),E=s("iRmZ"),T=s("++8I"),N=s("I8MS"),O=s("Uqoa"),L=s("r0mR"),w=s("Babz"),q=s("Lcal"),P=s("ZOy6"),F=s("hBZu"),M=s("zAMY"),V=s("Cg8i");function U(e,t){if(1&e&&C.Rb(0,"tm-student-profile",6),2&e){const e=C.kc();C.sc("studentProfile",e.studentProfile)("photoUrl",e.photoUrl)}}function x(e,t){if(1&e&&C.Rb(0,"tm-more-info",7),2&e){const e=C.kc();C.sc("studentName",e.studentName)("moreInfoText",e.studentProfile.moreInfo)}}function Q(e,t){if(1&e){const e=C.Xb();C.Wb(0,"tm-grq-rgq-view-responses",18),C.ic("saveNewCommentEvent",(function(t){C.Fc(e);const s=C.kc(2).$implicit;return C.kc(2).saveNewComment(t,s.feedbackSession.timeZone)}))("deleteCommentEvent",(function(t){return C.Fc(e),C.kc(4).deleteComment(t)}))("updateCommentEvent",(function(t){C.Fc(e);const s=C.kc(2).$implicit;return C.kc(2).updateComment(t,s.feedbackSession.timeZone)})),C.Vb()}if(2&e){const e=C.kc(2).$implicit,t=C.kc(2);C.sc("session",e.feedbackSession)("responses",e.responsesReceivedByStudent)("groupByTeam",!1)("isGrq",!1)("instructorCommentTableModel",t.instructorCommentTableModel)("isExpandAll",!0)}}function W(e,t){if(1&e&&(C.Wb(0,"div",19),C.Qc(1),C.Vb()),2&e){const e=C.kc(4);C.Cb(1),C.Tc(" No feedback responses for ",e.studentName," (",e.studentTeam,") found. ")}}function B(e,t){if(1&e){const e=C.Xb();C.Wb(0,"tm-grq-rgq-view-responses",18),C.ic("saveNewCommentEvent",(function(t){C.Fc(e);const s=C.kc(2).$implicit;return C.kc(2).saveNewComment(t,s.feedbackSession.timeZone)}))("deleteCommentEvent",(function(t){return C.Fc(e),C.kc(4).deleteComment(t)}))("updateCommentEvent",(function(t){C.Fc(e);const s=C.kc(2).$implicit;return C.kc(2).updateComment(t,s.feedbackSession.timeZone)})),C.Vb()}if(2&e){const e=C.kc(2).$implicit,t=C.kc(2);C.sc("session",e.feedbackSession)("responses",e.responsesGivenByStudent)("groupByTeam",!1)("isGrq",!0)("instructorCommentTableModel",t.instructorCommentTableModel)("isExpandAll",!0)}}function X(e,t){if(1&e&&(C.Wb(0,"div"),C.Qc(1),C.Vb()),2&e){const e=C.kc(4);C.Cb(1),C.Tc(" No feedback responses from ",e.studentName," (",e.studentTeam,") found. ")}}function j(e,t){if(1&e&&(C.Wb(0,"div",14),C.Oc(1,Q,1,6,"tm-grq-rgq-view-responses",15),C.Oc(2,W,2,2,"div",16),C.Oc(3,B,1,6,"tm-grq-rgq-view-responses",15),C.Oc(4,X,2,2,"div",17),C.Vb()),2&e){const e=C.kc().$implicit;C.sc("@collapseAnim",void 0),C.Cb(1),C.sc("ngIf",e.responsesReceivedByStudent.length>0),C.Cb(1),C.sc("ngIf",0===e.responsesReceivedByStudent.length),C.Cb(1),C.sc("ngIf",e.responsesGivenByStudent.length>0),C.Cb(1),C.sc("ngIf",0===e.responsesGivenByStudent.length)}}function A(e,t){if(1&e&&(C.Wb(0,"div",9),C.Wb(1,"div",10),C.ic("click",(function(){const e=t.$implicit;return e.isCollapsed=!e.isCollapsed})),C.Wb(2,"strong"),C.Qc(3),C.Vb(),C.Wb(4,"div",11),C.Rb(5,"tm-panel-chevron",12),C.Vb(),C.Vb(),C.Oc(6,j,5,5,"div",13),C.Vb()),2&e){const e=t.$implicit;C.Cb(3),C.Sc("Feedback Session: ",e.feedbackSession.feedbackSessionName,""),C.Cb(2),C.sc("isExpanded",!e.isCollapsed),C.Cb(1),C.sc("ngIf",!e.isCollapsed)}}function Z(e,t){if(1&e&&(C.Wb(0,"div"),C.Oc(1,A,7,3,"div",8),C.Vb()),2&e){const e=C.kc();C.Cb(1),C.sc("ngForOf",e.sessionTabs)}}const $=[{path:"",component:(()=>{class e extends R.a{constructor(e,t,s,n,i,o,r,c,a,d){super(d,a,c,r),this.route=e,this.studentProfileService=t,this.feedbackSessionsService=s,this.studentService=n,this.instructorService=i,this.commentsToCommentTableModel=o,this.courseId="",this.studentName="",this.studentEmail="",this.studentTeam="",this.studentSection="",this.instructorCommentTableModel={},this.studentProfile={name:"",shortName:"",email:"",institute:"",nationality:"",gender:S.h.OTHER,moreInfo:""},this.sessionTabs=[],this.photoUrl="",this.isStudentLoading=!1,this.hasStudentLoadingFailed=!1,this.isStudentProfileLoading=!1,this.hasStudentProfileLoadingFailed=!1,this.isStudentResultsLoading=!1,this.hasStudentResultsLoadingFailed=!1}ngOnInit(){this.route.queryParams.subscribe(e=>{this.courseId=e.courseid,this.studentEmail=e.studentemail,this.loadStudentRecords(),this.loadStudentResults(),this.photoUrl=p.a.backendUrl+"/webapi/student/profilePic?"+`courseid=${this.courseId}&studentemail=${this.studentEmail}`,this.instructorService.getInstructor({courseId:e.courseid,intent:g.b.FULL_DETAIL}).subscribe(e=>{this.currInstructorName=e.name})},e=>{this.statusMessageService.showErrorToast(e.error.message)})}loadStudentRecords(){this.hasStudentLoadingFailed=!1,this.hasStudentProfileLoadingFailed=!1,this.isStudentLoading=!0,this.isStudentProfileLoading=!0,this.studentService.getStudent(this.courseId,this.studentEmail).pipe(Object(f.a)(()=>this.isStudentLoading=!1)).subscribe(e=>{this.studentName=e.name,this.studentTeam=e.teamName,this.studentSection=e.sectionName},e=>{this.hasStudentLoadingFailed=!0,this.statusMessageService.showErrorToast(e.error.message)}),this.studentProfileService.getStudentProfile(this.studentEmail,this.courseId).pipe(Object(f.a)(()=>this.isStudentProfileLoading=!1)).subscribe(e=>{this.studentProfile=e},e=>{this.hasStudentProfileLoadingFailed=!0,this.statusMessageService.showErrorToast(e.error.message)})}loadStudentResults(){this.sessionTabs=[],this.hasStudentResultsLoadingFailed=!1,this.isStudentResultsLoading=!0,this.feedbackSessionsService.getFeedbackSessionsForInstructor(this.courseId).pipe(Object(b.a)(e=>e.feedbackSessions),Object(b.a)(e=>this.feedbackSessionsService.getFeedbackSessionResults({courseId:this.courseId,feedbackSessionName:e.feedbackSessionName,groupBySection:this.studentSection,intent:g.b.INSTRUCTOR_RESULT}).pipe(Object(h.a)(t=>(t.questions.sort((e,t)=>e.feedbackQuestion.questionNumber-t.feedbackQuestion.questionNumber),{results:t,feedbackSession:e})))),Object(f.a)(()=>this.isStudentResultsLoading=!1)).subscribe(({results:e,feedbackSession:t})=>{const s=JSON.parse(JSON.stringify(e.questions));s.forEach(e=>{e.allResponses=e.allResponses.filter(e=>!e.isMissingResponse&&e.giverEmail===this.studentEmail)});const n=s.filter(e=>e.allResponses.length>0),i=JSON.parse(JSON.stringify(e.questions));i.forEach(e=>{e.allResponses=e.allResponses.filter(e=>!e.isMissingResponse&&e.recipientEmail===this.studentEmail)});const o=i.filter(e=>e.allResponses.length>0);this.sessionTabs.push({feedbackSession:t,responsesGivenByStudent:n,responsesReceivedByStudent:o,isCollapsed:!1}),e.questions.forEach(e=>this.preprocessComments(e.allResponses))},e=>{this.hasStudentResultsLoadingFailed=!0,this.statusMessageService.showErrorToast(e.error.message)},()=>this.sortFeedbackSessions())}preprocessComments(e){const t=null!=this.sessionTabs[0]?this.sessionTabs[0].feedbackSession.timeZone:"";e.forEach(e=>{this.instructorCommentTableModel[e.responseId]=this.commentsToCommentTableModel.transform(e.instructorComments,!1,t),this.sortComments(this.instructorCommentTableModel[e.responseId]),e.instructorComments=[]})}sortFeedbackSessions(){this.sessionTabs.sort((e,t)=>this.tableComparatorService.compare(v.a.SESSION_NAME,v.b.ASC,e.feedbackSession.feedbackSessionName,t.feedbackSession.feedbackSessionName))}}return e.\u0275fac=function(t){return new(t||e)(C.Qb(i.a),C.Qb(k.a),C.Qb(y.a),C.Qb(E.a),C.Qb(T.a),C.Qb(c.a),C.Qb(N.a),C.Qb(O.a),C.Qb(L.a),C.Qb(r.a))},e.\u0275cmp=C.Kb({type:e,selectors:[["tm-instructor-student-records-page"]],features:[C.zb],decls:11,vars:9,consts:[["id","records-header"],[1,"text-muted"],[3,"shouldShowRetry","message","retryEvent"],[3,"studentProfile","photoUrl",4,"tmIsLoading"],[3,"studentName","moreInfoText",4,"tmIsLoading"],[4,"tmIsLoading"],[3,"studentProfile","photoUrl"],[3,"studentName","moreInfoText"],["class","card card-default mb-4",4,"ngFor","ngForOf"],[1,"card","card-default","mb-4"],[1,"card-header","cursor-pointer",3,"click"],[1,"card-header-btn-toolbar"],[3,"isExpanded"],["class","card-body",4,"ngIf"],[1,"card-body"],[3,"session","responses","groupByTeam","section","sectionType","isGrq","instructorCommentTableModel","isExpandAll","saveNewCommentEvent","deleteCommentEvent","updateCommentEvent",4,"ngIf"],["class","mb-3",4,"ngIf"],[4,"ngIf"],[3,"session","responses","groupByTeam","section","sectionType","isGrq","instructorCommentTableModel","isExpandAll","saveNewCommentEvent","deleteCommentEvent","updateCommentEvent"],[1,"mb-3"]],template:function(e,t){1&e&&(C.Wb(0,"h1",0),C.Qc(1),C.Wb(2,"small",1),C.Qc(3),C.Vb(),C.Vb(),C.Wb(4,"tm-loading-retry",2),C.ic("retryEvent",(function(){return t.loadStudentRecords()})),C.Oc(5,U,1,2,"tm-student-profile",3),C.Oc(6,x,1,2,"tm-more-info",4),C.Vb(),C.Wb(7,"h2"),C.Qc(8,"Records in feedback sessions"),C.Vb(),C.Wb(9,"tm-loading-retry",2),C.ic("retryEvent",(function(){return t.loadStudentResults()})),C.Oc(10,Z,2,1,"div",5),C.Vb()),2&e&&(C.Cb(1),C.Sc("",t.studentName,"'s Records"),C.Cb(2),C.Sc(" - ",t.courseId,""),C.Cb(1),C.sc("shouldShowRetry",t.hasStudentLoadingFailed||t.hasStudentProfileLoadingFailed)("message","Failed to load student records"),C.Cb(1),C.sc("tmIsLoading",t.isStudentProfileLoading),C.Cb(1),C.sc("tmIsLoading",t.isStudentLoading),C.Cb(3),C.sc("shouldShowRetry",t.hasStudentResultsLoadingFailed)("message","Failed to load student results"),C.Cb(1),C.sc("tmIsLoading",t.isStudentResultsLoading))},directives:[w.a,q.a,P.a,F.a,n.t,M.a,n.u,V.a],styles:[""],data:{animation:[I.a]}}),e})()}];let G=(()=>{class e{}return e.\u0275mod=C.Ob({type:e}),e.\u0275inj=C.Nb({factory:function(t){return new(t||e)},providers:[r.a,c.a],imports:[[n.c,m.a,o.d,l.a,i.h.forChild($),d.a,a.a,u.a]]}),e})()},Babz:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("fXoL"),i=s("ofXK");function o(e,t){if(1&e){const e=n.Xb();n.Wb(0,"div",2),n.Wb(1,"p",3),n.Qc(2),n.Vb(),n.Wb(3,"button",4),n.ic("click",(function(){return n.Fc(e),n.kc().retryEvent.emit()})),n.Rb(4,"i",5),n.Qc(5,"\xa0Retry"),n.Vb(),n.Vb()}if(2&e){const e=n.kc();n.Cb(2),n.Rc(e.message)}}function r(e,t){1&e&&n.qc(0)}const c=["*"];let a=(()=>{class e{constructor(){this.message="",this.shouldShowRetry=!1,this.retryEvent=new n.n}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Kb({type:e,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:c,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(e,t){if(1&e&&(n.rc(),n.Oc(0,o,6,1,"div",0),n.Oc(1,r,1,0,"ng-template",null,1,n.Pc)),2&e){const e=n.Cc(2);n.sc("ngIf",t.shouldShowRetry)("ngIfElse",e)}},directives:[i.u],styles:[""]}),e})()},RPsU:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("ofXK"),i=s("fXoL");let o=(()=>{class e{}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[n.c]]}),e})()},mYbV:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("ofXK"),i=s("fXoL");let o=(()=>{class e{}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(t){return new(t||e)},imports:[[n.c]]}),e})()},zAMY:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("fXoL"),i=s("ofXK");function o(e,t){1&e&&n.Rb(0,"i",3)}function r(e,t){1&e&&n.Rb(0,"i",4)}let c=(()=>{class e{constructor(){this.isExpanded=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Kb({type:e,selectors:[["tm-panel-chevron"]],inputs:{isExpanded:"isExpanded"},decls:3,vars:2,consts:[[1,"chevron"],["class","fas fa-chevron-down",4,"ngIf"],["class","fas fa-chevron-up",4,"ngIf"],[1,"fas","fa-chevron-down"],[1,"fas","fa-chevron-up"]],template:function(e,t){1&e&&(n.Wb(0,"div",0),n.Oc(1,o,1,0,"i",1),n.Oc(2,r,1,0,"i",2),n.Vb()),2&e&&(n.Cb(1),n.sc("ngIf",!t.isExpanded),n.Cb(1),n.sc("ngIf",t.isExpanded))},directives:[i.u],styles:[".chevron[_ngcontent-%COMP%]{display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}"]}),e})()}}]);