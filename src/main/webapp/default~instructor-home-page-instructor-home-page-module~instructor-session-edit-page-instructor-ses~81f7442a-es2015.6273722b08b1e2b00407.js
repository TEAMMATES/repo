(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"++8I":function(e,s,t){"use strict";t.d(s,"a",(function(){return r}));var o=t("vMQM"),n=t("fXoL"),i=t("mW1j");let r=(()=>{class e{constructor(e){this.httpRequestService=e}loadInstructors(e){const s={courseid:e.courseId};return e.intent&&(s.intent=e.intent),this.httpRequestService.get(o.d.INSTRUCTORS,s)}getInstructor(e){const s={courseid:e.courseId,intent:e.intent};return e.feedbackSessionName&&(s.fsname=e.feedbackSessionName),e.key&&(s.key=e.key),e.moderatedPerson&&(s.moderatedperson=e.moderatedPerson),e.previewAs&&(s.previewas=e.previewAs),this.httpRequestService.get(o.d.INSTRUCTOR,s)}createInstructor(e){return this.httpRequestService.post(o.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}updateInstructor(e){return this.httpRequestService.put(o.d.INSTRUCTOR,{courseid:e.courseId},e.requestBody)}deleteInstructor(e){const s={courseid:e.courseId};return e.instructorEmail&&(s.instructoremail=e.instructorEmail),e.instructorId&&(s.instructorid=e.instructorId),this.httpRequestService.delete(o.d.INSTRUCTOR,s)}loadInstructorPrivilege(e){const s={courseid:e.courseId};return e.feedbackSessionName&&(s.fsname=e.feedbackSessionName),e.sectionName&&(s.sectionname=e.sectionName),e.instructorRole&&(s.instructorrole=e.instructorRole),e.instructorEmail&&(s.instructoremail=e.instructorEmail),e.instructorId&&(s.instructorid=e.instructorId),this.httpRequestService.get(o.d.INSTRUCTOR_PRIVILEGE,s)}updateInstructorPrivilege(e){return this.httpRequestService.put(o.d.INSTRUCTOR_PRIVILEGE,{courseid:e.courseId,instructoremail:e.instructorEmail},e.requestBody)}}return e.\u0275fac=function(s){return new(s||e)(n.ec(i.a))},e.\u0275prov=n.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"/Tzu":function(e,s,t){"use strict";t.d(s,"a",(function(){return o}));var o=function(e){return e[e.WARNING=0]="WARNING",e[e.DANGER=1]="DANGER",e[e.INFO=2]="INFO",e[e.NEUTRAL=3]="NEUTRAL",e[e.LOAD=4]="LOAD",e}({})},"1GcU":function(e,s,t){"use strict";t.d(s,"a",(function(){return r}));var o=t("ofXK"),n=t("3Pt+"),i=t("fXoL");let r=(()=>{class e{}return e.\u0275mod=i.Ob({type:e}),e.\u0275inj=i.Nb({factory:function(s){return new(s||e)},imports:[[o.c,n.j]]}),e})()},"7qkN":function(e,s,t){"use strict";t.d(s,"a",(function(){return o}));var o=function(e){return e.SHOW_RESPONSE="SHOW_RESPONSE",e.SHOW_GIVER_NAME="SHOW_GIVER_NAME",e.SHOW_RECIPIENT_NAME="SHOW_RECIPIENT_NAME",e}({})},"84gB":function(e,s,t){"use strict";t.d(s,"a",(function(){return b}));var o=t("uBDz"),n=t("fXoL"),i=t("1kSV"),r=t("3Pt+"),c=t("ofXK");function a(e,s){1&e&&(n.Wb(0,"span",19),n.Qc(1),n.Vb()),2&e&&(n.Cb(1),n.Sc(" ","{Session currently in this course}"," "))}const u=function(e){return{"text-danger":e}};function d(e,s){if(1&e){const e=n.Xb();n.Wb(0,"div",14),n.Wb(1,"label",15),n.Wb(2,"input",16),n.ic("click",(function(){n.Fc(e);const t=s.$implicit;return n.kc().select(t.courseId)})),n.Vb(),n.Qc(3," ["),n.Wb(4,"span",17),n.Qc(5),n.Vb(),n.Qc(6),n.Oc(7,a,2,1,"span",18),n.Vb(),n.Vb()}if(2&e){const e=s.$implicit,t=n.kc();n.Cb(2),n.sc("checked",t.copyToCourseSet.has(e.courseId)),n.Cb(2),n.sc("ngClass",n.wc(5,u,t.sessionToCopyCourseId===e.courseId)),n.Cb(1),n.Rc(e.courseId),n.Cb(1),n.Sc("] : ",e.courseName," "),n.Cb(1),n.sc("ngIf",t.sessionToCopyCourseId===e.courseId)}}let b=(()=>{class e{constructor(e){this.activeModal=e,this.FEEDBACK_SESSION_NAME_MAX_LENGTH=o.a,this.courseCandidates=[],this.sessionToCopyCourseId="",this.newFeedbackSessionName="",this.copyToCourseSet=new Set}ngOnInit(){}copy(){this.activeModal.close({newFeedbackSessionName:this.newFeedbackSessionName,copyToCourseList:Array.from(this.copyToCourseSet)})}select(e){this.copyToCourseSet.has(e)?this.copyToCourseSet.delete(e):this.copyToCourseSet.add(e)}}return e.\u0275fac=function(s){return new(s||e)(n.Qb(i.a))},e.\u0275cmp=n.Kb({type:e,selectors:[["tm-copy-session-modal"]],inputs:{courseCandidates:"courseCandidates",sessionToCopyCourseId:"sessionToCopyCourseId"},decls:24,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"text-secondary"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],["id","copy-course-modal",1,"modal-body"],[1,"row"],[1,"col-12"],[1,"form-group"],["id","copy-session-name","type","text",1,"form-control",3,"ngModel","maxlength","ngModelChange"],["class","form-check",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["id","btn-confirm-copy-course","type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"form-check"],[1,"form-check-label"],["type","checkbox","name","copySessionChooseCourse",1,"form-check-input",3,"checked","click"],[3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(e,s){1&e&&(n.Wb(0,"div",0),n.Wb(1,"h5",1),n.Wb(2,"div"),n.Qc(3,"Copy this feedback session to other courses"),n.Vb(),n.Wb(4,"small",2),n.Qc(5,"(Select the course(s) you want to copy this feedback session to)"),n.Vb(),n.Vb(),n.Wb(6,"button",3),n.ic("click",(function(){return s.activeModal.dismiss()})),n.Rb(7,"i",4),n.Vb(),n.Vb(),n.Wb(8,"div",5),n.Wb(9,"div",6),n.Wb(10,"div",7),n.Wb(11,"div",8),n.Wb(12,"label"),n.Wb(13,"b"),n.Qc(14,"Name for copied session"),n.Vb(),n.Vb(),n.Wb(15,"input",9),n.ic("ngModelChange",(function(e){return s.newFeedbackSessionName=e})),n.Vb(),n.Wb(16,"span"),n.Qc(17),n.Vb(),n.Vb(),n.Oc(18,d,8,7,"div",10),n.Vb(),n.Vb(),n.Vb(),n.Wb(19,"div",11),n.Wb(20,"button",12),n.ic("click",(function(){return s.activeModal.dismiss()})),n.Qc(21,"Cancel"),n.Vb(),n.Wb(22,"button",13),n.ic("click",(function(){return s.copy()})),n.Qc(23,"Copy"),n.Vb(),n.Vb()),2&e&&(n.Cb(15),n.sc("ngModel",s.newFeedbackSessionName)("maxlength",s.FEEDBACK_SESSION_NAME_MAX_LENGTH),n.Cb(2),n.Sc("",s.FEEDBACK_SESSION_NAME_MAX_LENGTH-s.newFeedbackSessionName.length," characters left"),n.Cb(1),n.sc("ngForOf",s.courseCandidates),n.Cb(4),n.sc("disabled",!s.newFeedbackSessionName||s.copyToCourseSet.size<1))},directives:[r.c,r.p,r.s,r.k,c.t,c.r,c.u],styles:[""]}),e})()},BBzn:function(e,s,t){"use strict";t.d(s,"a",(function(){return S}));var o=t("Iab2"),n=t("LRne"),i=t("Cfvw"),r=t("GyhO"),c=t("eIep"),a=t("bOdf"),u=t("NJ9Y"),d=t("nYR2"),b=t("JIr8"),l=t("GJmQ"),p=t("9jjE"),f=t("UT40"),h=t("p6cw"),m=t("wuQz"),g=t("/Tzu");class S{constructor(e,s,t,o,n,i,r,c,a,u){this.router=e,this.instructorService=s,this.statusMessageService=t,this.navigationService=o,this.feedbackSessionsService=n,this.feedbackQuestionsService=i,this.tableComparatorService=r,this.ngbModal=c,this.simpleModalService=a,this.progressBarService=u,this.isResultActionLoading=!1,this.failedToCopySessions={},this.publishUnpublishRetryAttempts=f.a}copyFeedbackSession(e,s,t){let o;return this.feedbackSessionsService.createFeedbackSession(t,{feedbackSessionName:s,instructions:e.instructions,submissionStartTimestamp:e.submissionStartTimestamp,submissionEndTimestamp:e.submissionEndTimestamp,gracePeriod:e.gracePeriod,sessionVisibleSetting:e.sessionVisibleSetting,customSessionVisibleTimestamp:e.customSessionVisibleTimestamp,responseVisibleSetting:e.responseVisibleSetting,customResponseVisibleTimestamp:e.customResponseVisibleTimestamp,isClosingEmailEnabled:e.isClosingEmailEnabled,isPublishedEmailEnabled:e.isPublishedEmailEnabled}).pipe(Object(c.a)(s=>(o=s,this.feedbackQuestionsService.getFeedbackQuestions({courseId:e.courseId,feedbackSessionName:e.feedbackSessionName,intent:p.b.FULL_DETAIL}))),Object(c.a)(e=>0===e.questions.length?Object(n.a)(o):Object(i.a)(e.questions).pipe(Object(a.a)(e=>this.feedbackQuestionsService.createFeedbackQuestion(o.courseId,o.feedbackSessionName,{questionNumber:e.questionNumber,questionBrief:e.questionBrief,questionDescription:e.questionDescription,questionDetails:e.questionDetails,questionType:e.questionType,giverType:e.giverType,recipientType:e.recipientType,numberOfEntitiesToGiveFeedbackToSetting:e.numberOfEntitiesToGiveFeedbackToSetting,customNumberOfEntitiesToGiveFeedbackTo:e.customNumberOfEntitiesToGiveFeedbackTo,showResponsesTo:e.showResponsesTo,showGiverNameTo:e.showGiverNameTo,showRecipientNameTo:e.showRecipientNameTo})),Object(u.a)(),Object(c.a)(()=>Object(n.a)(o)))))}sortModelsBy(e,s){return(t,o)=>{let n,i;switch(e){case h.a.SESSION_NAME:n=t.feedbackSession.feedbackSessionName,i=o.feedbackSession.feedbackSessionName;break;case h.a.COURSE_ID:n=t.feedbackSession.courseId,i=o.feedbackSession.courseId;break;case h.a.SESSION_START_DATE:n=String(t.feedbackSession.submissionStartTimestamp),i=String(o.feedbackSession.submissionStartTimestamp);break;case h.a.SESSION_END_DATE:n=String(t.feedbackSession.submissionEndTimestamp),i=String(o.feedbackSession.submissionEndTimestamp);break;case h.a.SESSION_CREATION_DATE:n=String(t.feedbackSession.createdAtTimestamp),i=String(o.feedbackSession.createdAtTimestamp);break;case h.a.SESSION_DELETION_DATE:n=String(t.feedbackSession.deletedAtTimestamp),i=String(o.feedbackSession.deletedAtTimestamp);break;default:n="",i=""}return this.tableComparatorService.compare(e,s,n,i)}}loadResponseRate(e){e.isLoadingResponseRate=!0,this.feedbackSessionsService.loadSessionStatistics(e.feedbackSession.courseId,e.feedbackSession.feedbackSessionName).pipe(Object(d.a)(()=>e.isLoadingResponseRate=!1)).subscribe(s=>{e.responseRate=`${s.submittedTotal} / ${s.expectedTotal}`},e=>{this.statusMessageService.showErrorToast(e.error.message)})}editSession(e){this.navigationService.navigateByURLWithParamEncoding(this.router,"/web/instructor/sessions/edit",{courseid:e.feedbackSession.courseId,fsname:e.feedbackSession.feedbackSessionName})}createSessionCopyRequestsFromRowModel(e,s){const t=[];return s.copyToCourseList.forEach(o=>{t.push(this.copyFeedbackSession(e.feedbackSession,s.newFeedbackSessionName,o).pipe(Object(b.a)(e=>(this.failedToCopySessions[o]=e.error.message,Object(n.a)(e)))))}),t}createSessionCopyRequestsFromModal(e,s,t){const o=[];return e.copyToCourseList.forEach(i=>{o.push(this.feedbackSessionsService.getFeedbackSession({courseId:s,feedbackSessionName:t,intent:p.b.FULL_DETAIL}).pipe(Object(c.a)(s=>this.copyFeedbackSession(s,e.newFeedbackSessionName,i)),Object(b.a)(e=>(this.failedToCopySessions[i]=e.error.message,Object(n.a)(e)))))}),o}copySingleSession(e){e.subscribe(e=>{0===Object.keys(this.failedToCopySessions).length?this.navigationService.navigateWithSuccessMessage(this.router,"/web/instructor/sessions/edit","The feedback session has been copied. Please modify settings/questions as necessary.",{courseid:e.courseId,fsname:e.feedbackSessionName}):this.statusMessageService.showErrorToast(this.getCopyErrorMessage())},e=>{this.statusMessageService.showErrorToast(e.error.message)})}showCopyStatusMessage(){Object.keys(this.failedToCopySessions).length>0?this.statusMessageService.showErrorToast(this.getCopyErrorMessage()):this.statusMessageService.showSuccessToast("Feedback session copied successfully to all courses.")}getCopyErrorMessage(){return Object.keys(this.failedToCopySessions).map(e=>`Error copying to ${e}: ${this.failedToCopySessions[e]}`).join(" ")}submitSessionAsInstructor(e){this.navigationService.navigateByURLWithParamEncoding(this.router,"/web/instructor/sessions/submission",{courseid:e.feedbackSession.courseId,fsname:e.feedbackSession.feedbackSessionName})}viewSessionResult(e){this.navigationService.navigateByURLWithParamEncoding(this.router,"/web/instructor/sessions/result",{courseid:e.feedbackSession.courseId,fsname:e.feedbackSession.feedbackSessionName})}downloadSessionResult(e){this.feedbackQuestionsService.getFeedbackQuestions({courseId:e.feedbackSession.courseId,feedbackSessionName:e.feedbackSession.feedbackSessionName,intent:p.b.INSTRUCTOR_RESULT}).subscribe(s=>{this.downloadSessionResultHelper(s.questions,e)})}downloadSessionResultHelper(e,s){this.isResultActionLoading=!0;const t=`${s.feedbackSession.courseId}_${s.feedbackSession.feedbackSessionName}_result.csv`;let n,i=!1;const c=[],a=this.simpleModalService.openLoadingModal("Download Progress",g.a.LOAD,"Downloading the results of your feedback session...");a.result.then(()=>{this.isResultActionLoading=!1,i=!0}),Object(r.a)(...e.map(e=>this.feedbackSessionsService.downloadSessionResults(s.feedbackSession.courseId,s.feedbackSession.feedbackSessionName,p.b.INSTRUCTOR_RESULT,!0,!0,e.feedbackQuestionId))).pipe(Object(d.a)(()=>this.isResultActionLoading=!1)).pipe(Object(l.a)(()=>this.isResultActionLoading&&!i)).subscribe({next:s=>{c.push(s);const t=Math.round(100*c.length/e.length);this.progressBarService.updateProgress(t)},complete:()=>{i||(a.close(),n=new Blob(c,{type:"text/csv"}),Object(o.saveAs)(n,t))},error:e=>{this.statusMessageService.showErrorToast(e.error.message),a.close()}})}publishSession(e){this.isResultActionLoading=!0,this.feedbackSessionsService.publishFeedbackSession(e.feedbackSession.courseId,e.feedbackSession.feedbackSessionName).pipe(Object(d.a)(()=>this.isResultActionLoading=!1)).subscribe(s=>{e.feedbackSession=s,e.responseRate="",this.statusMessageService.showSuccessToast("The feedback session has been published. Please allow up to 1 hour for all the notification emails to be sent out.")},e=>{this.statusMessageService.showErrorToast(e.error.message),this.publishUnpublishRetryAttempts?this.publishUnpublishRetryAttempts-=1:this.openErrorReportModal(e)})}unpublishSession(e){this.isResultActionLoading=!0,this.feedbackSessionsService.unpublishFeedbackSession(e.feedbackSession.courseId,e.feedbackSession.feedbackSessionName).pipe(Object(d.a)(()=>this.isResultActionLoading=!1)).subscribe(s=>{e.feedbackSession=s,e.responseRate="",this.statusMessageService.showSuccessToast("The feedback session has been unpublished.")},e=>{this.statusMessageService.showErrorToast(e.error.message),this.publishUnpublishRetryAttempts?this.publishUnpublishRetryAttempts-=1:this.openErrorReportModal(e)})}openErrorReportModal(e){const s=this.ngbModal.open(m.a);s.componentInstance.requestId=e.error.requestId,s.componentInstance.errorMessage=e.error.message}}},GJmQ:function(e,s,t){"use strict";t.d(s,"a",(function(){return n}));var o=t("7o/Q");function n(e,s=!1){return t=>t.lift(new i(e,s))}class i{constructor(e,s){this.predicate=e,this.inclusive=s}call(e,s){return s.subscribe(new r(e,this.predicate,this.inclusive))}}class r extends o.a{constructor(e,s,t){super(e),this.predicate=s,this.inclusive=t,this.index=0}_next(e){const s=this.destination;let t;try{t=this.predicate(e,this.index++)}catch(o){return void s.error(o)}this.nextOrComplete(e,t)}nextOrComplete(e,s){const t=this.destination;Boolean(s)?t.next(e):(this.inclusive&&t.next(e),t.complete())}}},Iab2:function(e,s,t){var o,n;void 0===(n="function"==typeof(o=function(){"use strict";function s(e,s,t){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){i(o.response,s,t)},o.onerror=function(){console.error("could not download file")},o.send()}function t(e){var s=new XMLHttpRequest;s.open("HEAD",e,!1);try{s.send()}catch(e){}return 200<=s.status&&299>=s.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(s){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype?function(e,i,r){var c=n.URL||n.webkitURL,a=document.createElement("a");a.download=i=i||e.name||"download",a.rel="noopener","string"==typeof e?(a.href=e,a.origin===location.origin?o(a):t(a.href)?s(e,i,r):o(a,a.target="_blank")):(a.href=c.createObjectURL(e),setTimeout((function(){c.revokeObjectURL(a.href)}),4e4),setTimeout((function(){o(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,s){return void 0===s?s={autoBom:!1}:"object"!=typeof s&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,i),n);else if(t(e))s(e,n,i);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){o(r)}))}}:function(e,t,o,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return s(e,t,o);var r="application/octet-stream"===e.type,c=/constructor/i.test(n.HTMLElement)||n.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||r&&c)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var d=n.URL||n.webkitURL,b=d.createObjectURL(e);i?i.location=b:location.href=b,i=null,setTimeout((function(){d.revokeObjectURL(b)}),4e4)}});n.saveAs=i.saveAs=i,e.exports=i})?o.apply(s,[]):o)||(e.exports=n)},JUCI:function(e,s,t){"use strict";t.d(s,"a",(function(){return n}));var o=t("R0Ic");const n=Object(o.j)("collapseAnim",[Object(o.i)(":leave",[Object(o.h)({height:"*",overflow:"hidden"}),Object(o.e)("300ms ease-in-out",Object(o.h)({height:0,opacity:0}))]),Object(o.i)(":enter",[Object(o.h)({height:"0",overflow:"hidden"}),Object(o.e)("300ms ease-in-out",Object(o.h)({height:"*",opacity:1}))])])},UT40:function(e,s,t){"use strict";t.d(s,"a",(function(){return o}));const o=3},ax2R:function(e,s,t){"use strict";t.d(s,"a",(function(){return i}));var o=t("XNiG"),n=t("fXoL");let i=(()=>{class e{constructor(){this.progressPercentage=new o.a}updateProgress(e){this.progressPercentage.next(e)}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=n.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},eQqG:function(e,s,t){"use strict";t.d(s,"a",(function(){return k}));var o=t("fXoL"),n=t("/Tzu"),i=t("1kSV"),r=t("ofXK"),c=t("ax2R");let a=(()=>{class e{constructor(e){this.progressBarService=e,this.progressPercentage=0}ngOnInit(){this.getProgress()}getProgress(){this.progressBarService.progressPercentage.subscribe(e=>{this.progressPercentage=e})}}return e.\u0275fac=function(s){return new(s||e)(o.Qb(c.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["tm-progress-bar"]],decls:2,vars:3,consts:[["type","info","height","26px","showValue","true",3,"value","striped","animated"]],template:function(e,s){1&e&&(o.Wb(0,"div"),o.Rb(1,"ngb-progressbar",0),o.Vb()),2&e&&(o.Cb(1),o.sc("value",s.progressPercentage)("striped",!0)("animated",!0))},directives:[i.q],encapsulation:2}),e})();function u(e,s){1&e&&o.Rb(0,"i",16)}function d(e,s){1&e&&o.Rb(0,"i",17)}function b(e,s){1&e&&o.Rb(0,"i",18)}function l(e,s){1&e&&o.Sb(0)}function p(e,s){if(1&e&&(o.Wb(0,"div"),o.Oc(1,l,1,0,"ng-container",19),o.Vb()),2&e){const e=o.kc();o.Cb(1),o.sc("ngTemplateOutlet",e.content)}}function f(e,s){if(1&e&&o.Rb(0,"div",20),2&e){const e=o.kc();o.sc("innerHTML",e.content,o.Gc)}}function h(e,s){1&e&&(o.Wb(0,"div",21),o.Rb(1,"tm-progress-bar"),o.Vb())}function m(e,s){if(1&e){const e=o.Xb();o.Wb(0,"button",22),o.ic("click",(function(){return o.Fc(e),o.kc().activeModal.dismiss()})),o.Qc(1),o.Vb()}if(2&e){const e=o.kc();o.Cb(1),o.Sc(" ",e.cancelMessage," ")}}const g=function(e){return{"display-none":e}},S=function(e,s,t,o){return{"alert-danger":e,"alert-warning":s,"alert-info":t,"bg-white":o}},v=function(e,s,t,o){return{"btn-danger":e,"btn-warning":s,"btn-info":t,"btn-primary":o}};let y=(()=>{class e{constructor(e){this.activeModal=e,this.SimpleModalType=n.a,this.header="",this.content="",this.type=n.a.NEUTRAL,this.isInformationOnly=!1,this.confirmMessage="Yes",this.cancelMessage="No, cancel the operation"}get isTemplate(){return this.content instanceof o.L}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)(o.Qb(i.a))},e.\u0275cmp=o.Kb({type:e,selectors:[["tm-confirmation-modal"]],inputs:{header:"header",content:"content",type:"type",isInformationOnly:"isInformationOnly",confirmMessage:"confirmMessage",cancelMessage:"cancelMessage"},decls:18,vars:24,consts:[[1,"transparent-overlay",3,"ngClass"],[1,"modal-header",3,"ngClass"],[1,"modal-title"],["class","fas fa-times-circle",4,"ngIf"],["class","fas fa-exclamation-circle",4,"ngIf"],["class","fas fa-info-circle",4,"ngIf"],[1,"margin-left-5px",3,"innerHTML"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","progress-bar-container",4,"ngIf"],[1,"modal-footer"],["type","button","class","btn btn-light modal-btn-cancel",3,"click",4,"ngIf"],["type","button",1,"btn","modal-btn-ok","z-index-1",3,"ngClass","click"],[1,"fas","fa-times-circle"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-info-circle"],[4,"ngTemplateOutlet"],[3,"innerHTML"],[1,"progress-bar-container"],["type","button",1,"btn","btn-light","modal-btn-cancel",3,"click"]],template:function(e,s){1&e&&(o.Rb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div"),o.Wb(3,"h5",2),o.Oc(4,u,1,0,"i",3),o.Oc(5,d,1,0,"i",4),o.Oc(6,b,1,0,"i",5),o.Rb(7,"span",6),o.Vb(),o.Vb(),o.Wb(8,"button",7),o.ic("click",(function(){return s.type===s.SimpleModalType.LOAD?s.activeModal.close():s.activeModal.dismiss()})),o.Rb(9,"i",8),o.Vb(),o.Vb(),o.Wb(10,"div",9),o.Oc(11,p,2,1,"div",10),o.Oc(12,f,1,1,"div",11),o.Oc(13,h,2,0,"div",12),o.Vb(),o.Wb(14,"div",13),o.Oc(15,m,2,1,"button",14),o.Wb(16,"button",15),o.ic("click",(function(){return s.activeModal.close()})),o.Qc(17),o.Vb(),o.Vb()),2&e&&(o.sc("ngClass",o.wc(12,g,s.type!==s.SimpleModalType.LOAD)),o.Cb(1),o.sc("ngClass",o.zc(14,S,s.type===s.SimpleModalType.DANGER,s.type===s.SimpleModalType.WARNING,s.type===s.SimpleModalType.INFO||s.type===s.SimpleModalType.LOAD,s.type===s.SimpleModalType.NEUTRAL)),o.Cb(3),o.sc("ngIf",s.type===s.SimpleModalType.DANGER),o.Cb(1),o.sc("ngIf",s.type===s.SimpleModalType.WARNING),o.Cb(1),o.sc("ngIf",s.type===s.SimpleModalType.INFO||s.type===s.SimpleModalType.LOAD),o.Cb(1),o.sc("innerHTML",s.header,o.Gc),o.Cb(4),o.sc("ngIf",s.isTemplate),o.Cb(1),o.sc("ngIf",!s.isTemplate),o.Cb(1),o.sc("ngIf",s.type===s.SimpleModalType.LOAD),o.Cb(2),o.sc("ngIf",!s.isInformationOnly),o.Cb(1),o.sc("ngClass",o.zc(19,v,s.type===s.SimpleModalType.DANGER||s.type===s.SimpleModalType.LOAD,s.type===s.SimpleModalType.WARNING,s.type===s.SimpleModalType.INFO,s.type===s.SimpleModalType.NEUTRAL)),o.Cb(1),o.Rc(s.confirmMessage))},directives:[r.r,r.u,r.B,a],styles:[".margin-left-5px[_ngcontent-%COMP%]{margin-left:5px}.progress-bar-container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:2px}.transparent-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;visibility:false;z-index:0}.display-none[_ngcontent-%COMP%]{display:none}.z-index-1[_ngcontent-%COMP%]{z-index:1}"]}),e})(),k=(()=>{class e{constructor(e){this.ngbModal=e}open(e,s,t,o){const n=this.ngbModal.open(y);return n.componentInstance.header=e,n.componentInstance.content=t,n.componentInstance.type=s,o&&Object.entries(o).map(([e,s])=>{n.componentInstance[e]=s}),n}openConfirmationModal(e,s,t,o){const n=Object.assign({isInformationOnly:!1,confirmMessage:"Yes",cancelMessage:"No, cancel the operation"},o);return this.open(e,s,t,n)}openInformationModal(e,s,t,o){const n=Object.assign({isInformationOnly:!0,confirmMessage:"OK"},o);return this.open(e,s,t,n)}openLoadingModal(e,s,t,o){const n=Object.assign({isInformationOnly:!0,confirmMessage:"Abort"},o);return this.open(e,s,t,n)}}return e.\u0275fac=function(s){return new(s||e)(o.ec(i.m))},e.\u0275prov=o.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},pTm8:function(e,s,t){"use strict";t.d(s,"a",(function(){return i}));var o=t("R8lv"),n=t("fXoL");let i=(()=>{class e{transform(e){switch(e){case o.e.PUBLISHED:return"Published";case o.e.NOT_PUBLISHED:return"Not Published";default:return"Unknown"}}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275pipe=n.Pb({name:"publishStatusName",type:e,pure:!0}),e})()},wuQz:function(e,s,t){"use strict";t.d(s,"a",(function(){return g}));var o=t("dOUP"),n=t("fXoL"),i=t("vMQM"),r=t("mW1j");let c=(()=>{class e{constructor(e){this.httpRequestService=e}sendErrorReport(e){return this.httpRequestService.post(i.d.ERROR_REPORT,{},e.request)}}return e.\u0275fac=function(s){return new(s||e)(n.ec(r.a))},e.\u0275prov=n.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var a=t("1kSV"),u=t("Uqoa"),d=t("ofXK"),b=t("3Pt+");function l(e,s){1&e&&(n.Wb(0,"div"),n.Wb(1,"p"),n.Qc(2," We are sorry that this happened. Please help us troubleshoot the problem by providing us some additional details using the form below: "),n.Vb(),n.Vb())}function p(e,s){if(1&e&&(n.Wb(0,"div"),n.Wb(1,"p"),n.Qc(2," We are sorry that this happened. It is likely that your browser could not create or access cookies for authorization. If cookies are disabled in your browser, please turn on your cookies before trying again. Alternatively, you could also try emptying your browser's cache, or switching to a different browser. "),n.Vb(),n.Wb(3,"p"),n.Qc(4," For further support, please contact our email address at "),n.Wb(5,"a",6),n.Qc(6),n.Vb(),n.Qc(7,". "),n.Vb(),n.Vb()),2&e){const e=n.kc();n.Cb(5),n.uc("href","mailto:",e.supportEmail,"",n.Ic),n.Cb(1),n.Rc(e.supportEmail)}}function f(e,s){if(1&e){const e=n.Xb();n.Wb(0,"button",13),n.ic("click",(function(){return n.Fc(e),n.kc(2).sendErrorReport()})),n.Qc(1,"Send Error Report"),n.Vb()}if(2&e){const e=n.kc(2);n.sc("disabled",!e.sendButtonEnabled)}}function h(e,s){1&e&&(n.Wb(0,"div"),n.Qc(1," Your error report has been recorded. We will follow up with you in due course, usually, within 24 hours. "),n.Vb())}function m(e,s){if(1&e){const e=n.Xb();n.Wb(0,"div",7),n.Wb(1,"div",8),n.Wb(2,"label"),n.Qc(3,"Request ID:"),n.Vb(),n.Rb(4,"br"),n.Wb(5,"em"),n.Qc(6,"Note: This field is filled by the system and not modifiable."),n.Vb(),n.Wb(7,"input",9),n.ic("ngModelChange",(function(s){return n.Fc(e),n.kc().requestId=s})),n.Vb(),n.Vb(),n.Wb(8,"div",8),n.Wb(9,"label"),n.Qc(10,"Subject:"),n.Vb(),n.Rb(11,"br"),n.Wb(12,"em"),n.Qc(13,"Note: This field is pre-filled for convenience. Feel free to change it to suit your needs."),n.Vb(),n.Wb(14,"input",10),n.ic("ngModelChange",(function(s){return n.Fc(e),n.kc().subject=s})),n.Vb(),n.Vb(),n.Wb(15,"div",8),n.Wb(16,"label"),n.Qc(17,"Content:"),n.Vb(),n.Wb(18,"textarea",11),n.ic("ngModelChange",(function(s){return n.Fc(e),n.kc().content=s})),n.Vb(),n.Vb(),n.Oc(19,f,2,1,"button",12),n.Oc(20,h,2,0,"div",4),n.Vb()}if(2&e){const e=n.kc();n.Cb(7),n.sc("ngModel",e.requestId)("disabled",!0),n.Cb(7),n.sc("ngModel",e.subject),n.Cb(4),n.sc("ngModel",e.content),n.Cb(1),n.sc("ngIf",!e.errorReportSubmitted),n.Cb(1),n.sc("ngIf",e.errorReportSubmitted)}}let g=(()=>{class e{constructor(e,s,t){this.errorReportService=e,this.ngbActiveModal=s,this.statusMessageService=t,this.errorMessage="",this.subject="User-submitted Error Report",this.content="",this.requestId="",this.sendButtonEnabled=!0,this.errorReportEnabled=!0,this.errorReportSubmitted=!1,this.csrfErrorMessages=["Missing CSRF token.","Invalid CSRF token."],this.supportEmail=o.a.supportEmail}ngOnInit(){this.csrfErrorMessages.includes(this.errorMessage)&&(this.errorReportEnabled=!1)}sendErrorReport(){const e={requestId:this.requestId,subject:this.subject,content:this.content};this.sendButtonEnabled=!1,this.errorReportService.sendErrorReport({request:e}).subscribe(()=>{this.errorReportSubmitted=!0,this.statusMessageService.showSuccessToast("Your error report has been successfully sent"),this.ngbActiveModal.close()},e=>{this.sendButtonEnabled=!0,this.statusMessageService.showErrorToast(e.error.message)})}}return e.\u0275fac=function(s){return new(s||e)(n.Qb(c),n.Qb(a.a),n.Qb(u.a))},e.\u0275cmp=n.Kb({type:e,selectors:[["tm-error-report"]],decls:11,vars:4,consts:[[1,"container","error-container"],[1,"row"],[1,"col-md-12"],["id","error-message"],[4,"ngIf"],["id","error-report",4,"ngIf"],[3,"href"],["id","error-report"],[1,"form-group"],["type","text",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Tell us the steps you took that led you to this error page",1,"form-control",3,"ngModel","ngModelChange"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"btn","btn-success",3,"disabled","click"]],template:function(e,s){1&e&&(n.Wb(0,"div",0),n.Wb(1,"h2"),n.Qc(2,"Uh oh! Something went wrong."),n.Vb(),n.Rb(3,"hr"),n.Wb(4,"div",1),n.Wb(5,"div",2),n.Wb(6,"p",3),n.Qc(7),n.Vb(),n.Oc(8,l,3,0,"div",4),n.Oc(9,p,8,2,"div",4),n.Vb(),n.Vb(),n.Oc(10,m,21,6,"div",5),n.Vb()),2&e&&(n.Cb(7),n.Sc(' The server returns the following error message: "',s.errorMessage,'". '),n.Cb(1),n.sc("ngIf",s.errorReportEnabled),n.Cb(1),n.sc("ngIf",!s.errorReportEnabled),n.Cb(1),n.sc("ngIf",s.errorReportEnabled))},directives:[d.u,b.c,b.p,b.s],styles:[".error-container[_ngcontent-%COMP%]{padding:3%}"]}),e})()}}]);