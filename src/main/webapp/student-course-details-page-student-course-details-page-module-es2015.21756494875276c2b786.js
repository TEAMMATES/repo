(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{"++8I":function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var i=s("vMQM"),r=s("fXoL"),n=s("mW1j");let c=(()=>{class t{constructor(t){this.httpRequestService=t}loadInstructors(t){const e={courseid:t.courseId};return t.intent&&(e.intent=t.intent),this.httpRequestService.get(i.d.INSTRUCTORS,e)}getInstructor(t){const e={courseid:t.courseId,intent:t.intent};return t.feedbackSessionName&&(e.fsname=t.feedbackSessionName),t.key&&(e.key=t.key),t.moderatedPerson&&(e.moderatedperson=t.moderatedPerson),t.previewAs&&(e.previewas=t.previewAs),this.httpRequestService.get(i.d.INSTRUCTOR,e)}createInstructor(t){return this.httpRequestService.post(i.d.INSTRUCTOR,{courseid:t.courseId},t.requestBody)}updateInstructor(t){return this.httpRequestService.put(i.d.INSTRUCTOR,{courseid:t.courseId},t.requestBody)}deleteInstructor(t){const e={courseid:t.courseId};return t.instructorEmail&&(e.instructoremail=t.instructorEmail),t.instructorId&&(e.instructorid=t.instructorId),this.httpRequestService.delete(i.d.INSTRUCTOR,e)}loadInstructorPrivilege(t){const e={courseid:t.courseId};return t.feedbackSessionName&&(e.fsname=t.feedbackSessionName),t.sectionName&&(e.sectionname=t.sectionName),t.instructorRole&&(e.instructorrole=t.instructorRole),t.instructorEmail&&(e.instructoremail=t.instructorEmail),t.instructorId&&(e.instructorid=t.instructorId),this.httpRequestService.get(i.d.INSTRUCTOR_PRIVILEGE,e)}updateInstructorPrivilege(t){return this.httpRequestService.put(i.d.INSTRUCTOR_PRIVILEGE,{courseid:t.courseId,instructoremail:t.instructorEmail},t.requestBody)}}return t.\u0275fac=function(e){return new(e||t)(r.ec(n.a))},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"+kil":function(t,e,s){"use strict";s.r(e),s.d(e,"StudentCourseDetailsPageModule",(function(){return B}));var i=s("ofXK"),r=s("tyNb"),n=s("mYbV"),c=s("aSpy"),o=s("SEFB"),a=s("nYR2"),d=s("dOUP"),b=s("R8lv"),u=s("p6cw"),l=s("fXoL"),m=s("I8MS"),h=s("++8I"),g=s("Rjy1"),f=s("iRmZ"),p=s("vKUq"),S=s("Uqoa"),I=s("Babz"),v=s("Lcal"),V=s("WbH0");function W(t,e){if(1&t&&(l.Wb(0,"h1",5),l.Qc(1),l.Vb()),2&t){const t=l.kc();l.Cb(1),l.Sc("Team Details for ",t.course.courseId,"")}}function C(t,e){if(1&t&&(l.Ub(0),l.Wb(1,"div",11),l.Wb(2,"div",12),l.Wb(3,"label"),l.Qc(4,"Course ID:"),l.Vb(),l.Vb(),l.Wb(5,"div",13),l.Wb(6,"span",14),l.Qc(7),l.Vb(),l.Vb(),l.Vb(),l.Wb(8,"div",11),l.Wb(9,"div",12),l.Wb(10,"label"),l.Qc(11,"Course name:"),l.Vb(),l.Vb(),l.Wb(12,"div",13),l.Wb(13,"span",15),l.Qc(14),l.Vb(),l.Vb(),l.Vb(),l.Tb()),2&t){const t=l.kc(3);l.Cb(7),l.Rc(t.course.courseId),l.Cb(7),l.Rc(t.course.courseName)}}function T(t,e){if(1&t&&(l.Wb(0,"div"),l.Qc(1),l.Wb(2,"a",18),l.Qc(3),l.Vb(),l.Vb()),2&t){const t=e.$implicit;l.Cb(1),l.Sc(" ",t.displayedToStudentsAs,": "),l.Cb(1),l.uc("href","mailto:",t.email,"",l.Ic),l.Cb(1),l.Tc("",t.name," (",t.email,")")}}function y(t,e){if(1&t&&(l.Ub(0),l.Wb(1,"div",11),l.Wb(2,"div",12),l.Wb(3,"label"),l.Qc(4,"Instructors:"),l.Vb(),l.Vb(),l.Wb(5,"div",16),l.Oc(6,T,4,4,"div",17),l.Vb(),l.Vb(),l.Tb()),2&t){const t=l.kc(3);l.Cb(6),l.sc("ngForOf",t.instructorDetails)}}function N(t,e){if(1&t&&(l.Ub(0),l.Wb(1,"div",11),l.Wb(2,"div",12),l.Wb(3,"label"),l.Qc(4,"Your section:"),l.Vb(),l.Vb(),l.Wb(5,"div",13),l.Wb(6,"span",19),l.Qc(7),l.Vb(),l.Vb(),l.Vb(),l.Wb(8,"div",11),l.Wb(9,"div",12),l.Wb(10,"label"),l.Qc(11,"Your team:"),l.Vb(),l.Vb(),l.Wb(12,"div",13),l.Wb(13,"span",20),l.Qc(14),l.Vb(),l.Vb(),l.Vb(),l.Wb(15,"div",11),l.Wb(16,"div",12),l.Wb(17,"label"),l.Qc(18,"Your name:"),l.Vb(),l.Vb(),l.Wb(19,"div",13),l.Wb(20,"span",21),l.Qc(21),l.Vb(),l.Vb(),l.Vb(),l.Wb(22,"div",11),l.Wb(23,"div",12),l.Wb(24,"label"),l.Qc(25,"Your email:"),l.Vb(),l.Vb(),l.Wb(26,"div",13),l.Wb(27,"span",22),l.Qc(28),l.Vb(),l.Vb(),l.Vb(),l.Tb()),2&t){const t=l.kc(3);l.Cb(7),l.Rc(t.student.sectionName),l.Cb(7),l.Rc(t.student.teamName),l.Cb(7),l.Rc(t.student.name),l.Cb(7),l.Rc(t.student.email)}}function O(t,e){if(1&t&&(l.Wb(0,"div",8),l.Wb(1,"div",9),l.Oc(2,C,15,2,"ng-container",10),l.Oc(3,y,7,1,"ng-container",10),l.Oc(4,N,29,4,"ng-container",10),l.Vb(),l.Vb()),2&t){const t=l.kc(2);l.Cb(2),l.sc("ngIf",t.course.courseId),l.Cb(1),l.sc("ngIf",t.instructorDetails&&t.instructorDetails.length),l.Cb(1),l.sc("ngIf",t.student.courseId)}}function E(t,e){if(1&t&&(l.Wb(0,"div",6),l.Oc(1,O,5,3,"div",7),l.Vb()),2&t){const t=l.kc();l.Cb(1),l.sc("tmIsLoading",t.isLoadingCourse||t.isLoadingInstructor||t.isLoadingStudent)}}function R(t,e){if(1&t){const t=l.Xb();l.Wb(0,"div",23),l.Wb(1,"div",24),l.Wb(2,"h5",25),l.Wb(3,"strong"),l.Qc(4," Sort By: "),l.Vb(),l.Vb(),l.Wb(5,"div",26),l.Wb(6,"button",27),l.ic("click",(function(){l.Fc(t);const e=l.kc();return e.sortTeammatesBy(e.SortBy.RESPONDENT_NAME)})),l.Qc(7,"Name"),l.Vb(),l.Wb(8,"button",28),l.ic("click",(function(){l.Fc(t);const e=l.kc();return e.sortTeammatesBy(e.SortBy.RESPONDENT_EMAIL)})),l.Qc(9,"Email"),l.Vb(),l.Wb(10,"button",28),l.ic("click",(function(){l.Fc(t);const e=l.kc();return e.sortTeammatesBy(e.SortBy.STUDENT_GENDER)})),l.Qc(11,"Gender"),l.Vb(),l.Wb(12,"button",28),l.ic("click",(function(){l.Fc(t);const e=l.kc();return e.sortTeammatesBy(e.SortBy.INSTITUTION)})),l.Qc(13,"Institution"),l.Vb(),l.Wb(14,"button",28),l.ic("click",(function(){l.Fc(t);const e=l.kc();return e.sortTeammatesBy(e.SortBy.NATIONALITY)})),l.Qc(15,"Nationality"),l.Vb(),l.Vb(),l.Vb(),l.Vb()}if(2&t){const t=l.kc();l.Cb(6),l.sc("disabled",t.isSelectedForSorting(t.SortBy.RESPONDENT_NAME)),l.Cb(2),l.sc("disabled",t.isSelectedForSorting(t.SortBy.RESPONDENT_EMAIL)),l.Cb(2),l.sc("disabled",t.isSelectedForSorting(t.SortBy.STUDENT_GENDER)),l.Cb(2),l.sc("disabled",t.isSelectedForSorting(t.SortBy.INSTITUTION)),l.Cb(2),l.sc("disabled",t.isSelectedForSorting(t.SortBy.NATIONALITY))}}function L(t,e){1&t&&(l.Wb(0,"div",32),l.Wb(1,"strong"),l.Qc(2,"Your teammates:"),l.Vb(),l.Vb())}function k(t,e){if(1&t&&(l.Wb(0,"div"),l.Wb(1,"label"),l.Qc(2,"Gender:"),l.Vb(),l.Qc(3),l.lc(4,"genderFormat"),l.Vb()),2&t){const t=l.kc().$implicit;l.Cb(3),l.Sc(" ",l.mc(4,1,t.gender)," ")}}function P(t,e){if(1&t&&(l.Wb(0,"div"),l.Wb(1,"label"),l.Qc(2,"Nationality:"),l.Vb(),l.Qc(3),l.Vb()),2&t){const t=l.kc().$implicit;l.Cb(3),l.Sc(" ",t.nationality," ")}}function Q(t,e){if(1&t&&(l.Wb(0,"div"),l.Wb(1,"label"),l.Qc(2,"Institute:"),l.Vb(),l.Qc(3),l.Vb()),2&t){const t=l.kc().$implicit;l.Cb(3),l.Sc(" ",t.institute," ")}}function w(t,e){if(1&t){const t=l.Xb();l.Wb(0,"tr"),l.Wb(1,"td",33),l.Wb(2,"img",34),l.ic("error",(function(){l.Fc(t);const s=e.$implicit;return l.kc(2).setDefaultPic(s)})),l.Vb(),l.Vb(),l.Wb(3,"td",35),l.Wb(4,"div"),l.Wb(5,"label"),l.Qc(6,"Name:"),l.Vb(),l.Qc(7),l.Vb(),l.Wb(8,"div"),l.Wb(9,"label"),l.Qc(10,"Email:"),l.Vb(),l.Qc(11,"\xa0"),l.Wb(12,"a",18),l.Qc(13),l.Vb(),l.Vb(),l.Oc(14,k,5,3,"div",10),l.Oc(15,P,4,1,"div",10),l.Oc(16,Q,4,1,"div",10),l.Vb(),l.Vb()}if(2&t){const t=e.$implicit,s=e.index;l.Cb(2),l.tc("src",t.photoUrl,l.Ic),l.Cb(1),l.uc("id","teammates-details-",s,""),l.Cb(4),l.Sc(" ",t.name," "),l.Cb(5),l.uc("href","mailto:",t.email,"",l.Ic),l.Cb(1),l.Rc(t.email),l.Cb(1),l.sc("ngIf",t.gender),l.Cb(1),l.sc("ngIf",t.nationality),l.Cb(1),l.sc("ngIf",t.institute)}}function F(t,e){if(1&t&&(l.Wb(0,"div",6),l.Wb(1,"div",29),l.Oc(2,L,3,0,"div",30),l.Wb(3,"div",31),l.Wb(4,"table"),l.Wb(5,"tbody"),l.Oc(6,w,17,8,"tr",17),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&t){const t=l.kc();l.Cb(2),l.sc("ngIf",t.teammateProfiles.length),l.Cb(4),l.sc("ngForOf",t.teammateProfiles)}}const M=[{path:"",component:(()=>{class t{constructor(t,e,s,i,r,n,c){this.tableComparatorService=t,this.route=e,this.instructorService=s,this.studentProfileService=i,this.studentService=r,this.courseService=n,this.statusMessageService=c,this.Gender=b.h,this.SortBy=u.a,this.teammateProfilesSortBy=u.a.NONE,this.student={email:"",courseId:"",name:"",lastName:"",comments:"",joinState:b.j.NOT_JOINED,teamName:"",sectionName:""},this.course={courseId:"",courseName:"",timeZone:"UTC",creationTimestamp:0,deletionTimestamp:0},this.courseId="",this.instructorDetails=[],this.teammateProfiles=[],this.isLoadingCourse=!1,this.isLoadingStudent=!1,this.isLoadingInstructor=!1,this.isLoadingTeammates=!1,this.hasLoadingFailed=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{this.courseId=t.courseid,this.loadStudent(t.courseid),this.loadCourse(t.courseid),this.loadInstructors(t.courseid)})}loadCourse(t){this.isLoadingCourse=!0,this.courseService.getCourseAsStudent(t).pipe(Object(a.a)(()=>this.isLoadingCourse=!1)).subscribe(t=>{this.course=t},t=>{this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(t.error.message)})}loadStudent(t){this.isLoadingStudent=!0,this.studentService.getStudent(t).pipe(Object(a.a)(()=>this.isLoadingStudent=!1)).subscribe(e=>{this.student=e,this.loadTeammates(t,e.teamName)},t=>{this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(t.error.message)})}loadTeammates(t,e){this.isLoadingTeammates=!0,this.teammateProfiles=[],this.studentService.getStudentsFromCourseAndTeam(t,e).subscribe(e=>{1===e.students.length&&e.students[0].email===this.student.email&&(this.isLoadingTeammates=!1),e.students.forEach(e=>{e.email!==this.student.email&&this.studentProfileService.getStudentProfile(e.email,t).pipe(Object(a.a)(()=>this.isLoadingTeammates=!1)).subscribe(s=>{const i=d.a.backendUrl+"/webapi/student/profilePic"+`?courseid=${t}&studentemail=${e.email}`,r=Object.assign(Object.assign({},s),{email:e.email,name:e.name,photoUrl:i});this.teammateProfiles.push(r)},t=>{this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(t.error.message)})})},t=>{this.isLoadingTeammates=!1,this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(t.error.message)})}loadInstructors(t){this.isLoadingInstructor=!0,this.instructorService.loadInstructors({courseId:t}).pipe(Object(a.a)(()=>this.isLoadingInstructor=!1)).subscribe(t=>{this.instructorDetails=t.instructors},t=>{this.hasLoadingFailed=!0,this.statusMessageService.showErrorToast(t.error.message)})}setDefaultPic(t){t.photoUrl="/assets/images/profile_picture_default.png"}isSelectedForSorting(t){return this.teammateProfilesSortBy===t}sortTeammatesBy(t){this.teammateProfilesSortBy=t,this.teammateProfiles.length>1&&this.teammateProfiles.sort(this.sortPanelsBy(t))}sortPanelsBy(t){return(e,s)=>{let i,r;switch(t){case u.a.RESPONDENT_NAME:i=e.name,r=s.name;break;case u.a.RESPONDENT_EMAIL:i=e.email,r=s.email;break;case u.a.STUDENT_GENDER:i=e.gender,r=s.gender;break;case u.a.INSTITUTION:i=e.institute,r=s.institute;break;case u.a.NATIONALITY:i=e.nationality,r=s.nationality;break;default:i="",r=""}return this.tableComparatorService.compare(t,u.b.ASC,i,r)}}retryLoading(){this.hasLoadingFailed=!1,this.loadCourse(this.courseId),this.loadInstructors(this.courseId),this.loadStudent(this.courseId)}}return t.\u0275fac=function(e){return new(e||t)(l.Qb(m.a),l.Qb(r.a),l.Qb(h.a),l.Qb(g.a),l.Qb(f.a),l.Qb(p.a),l.Qb(S.a))},t.\u0275cmp=l.Kb({type:t,selectors:[["tm-student-course-details-page"]],decls:5,vars:6,consts:[["class","page-title",4,"ngIf"],[3,"shouldShowRetry","message","retryEvent"],["class","section",4,"ngIf"],["class","card bg-light mb-4",4,"ngIf"],["class","section",4,"tmIsLoading"],[1,"page-title"],[1,"section"],["class","card",4,"tmIsLoading"],[1,"card"],[1,"card-body","fill-plain"],[4,"ngIf"],[1,"row"],[1,"col-3","text-right"],[1,"col-9"],["id","course-id"],["id","course-name"],["id","instructors",1,"col-9",2,"margin-bottom",".5rem"],[4,"ngFor","ngForOf"],[3,"href"],["id","student-section"],["id","student-team"],["id","student-name"],["id","student-email"],[1,"card","bg-light","mb-4"],[1,"card-body"],[1,"d-inline"],["data-toggle","buttons",1,"btn-group"],["id","sort-name",1,"btn","btn-light",3,"disabled","click"],[1,"btn","btn-light",3,"disabled","click"],[1,"row","top-padded"],["class","col-md-2",4,"ngIf"],[1,"col-md-10"],[1,"col-md-2"],[1,"team-member-photo-cell"],[1,"profile-pic",3,"src","error"],[1,"team-member-profile-cell",3,"id"]],template:function(t,e){1&t&&(l.Oc(0,W,2,1,"h1",0),l.Wb(1,"tm-loading-retry",1),l.ic("retryEvent",(function(){return e.retryLoading()})),l.Oc(2,E,2,1,"div",2),l.Oc(3,R,16,5,"div",3),l.Vb(),l.Oc(4,F,7,2,"div",4)),2&t&&(l.sc("ngIf",e.course.courseId),l.Cb(1),l.sc("shouldShowRetry",e.hasLoadingFailed)("message","Failed to load details"),l.Cb(1),l.sc("ngIf",e.course.courseId),l.Cb(1),l.sc("ngIf",!e.isLoadingTeammates&&e.teammateProfiles.length),l.Cb(1),l.sc("tmIsLoading",e.isLoadingTeammates))},directives:[i.u,I.a,v.a,i.t],pipes:[V.a],styles:[".page-title[_ngcontent-%COMP%]{margin-bottom:30px}.section[_ngcontent-%COMP%]{margin-bottom:40px}.profile-pic[_ngcontent-%COMP%]{max-width:100%;max-height:150px}.fill-plain[_ngcontent-%COMP%]{background-color:#eaeff5}label[_ngcontent-%COMP%]{font-weight:700}.top-padded[_ngcontent-%COMP%]{margin-top:20px}.team-member-photo-cell[_ngcontent-%COMP%]{padding-bottom:10px}.team-member-profile-cell[_ngcontent-%COMP%]{padding-left:30px;vertical-align:middle}.team-member-profile-cell[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:2px}"]}),t})()}];let B=(()=>{class t{}return t.\u0275mod=l.Ob({type:t}),t.\u0275inj=l.Nb({factory:function(e){return new(e||t)},imports:[[i.c,r.h.forChild(M),o.a,c.a,n.a]]}),t})()},Babz:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var i=s("fXoL"),r=s("ofXK");function n(t,e){if(1&t){const t=i.Xb();i.Wb(0,"div",2),i.Wb(1,"p",3),i.Qc(2),i.Vb(),i.Wb(3,"button",4),i.ic("click",(function(){return i.Fc(t),i.kc().retryEvent.emit()})),i.Rb(4,"i",5),i.Qc(5,"\xa0Retry"),i.Vb(),i.Vb()}if(2&t){const t=i.kc();i.Cb(2),i.Rc(t.message)}}function c(t,e){1&t&&i.qc(0)}const o=["*"];let a=(()=>{class t{constructor(){this.message="",this.shouldShowRetry=!1,this.retryEvent=new i.n}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Kb({type:t,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:o,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(t,e){if(1&t&&(i.rc(),i.Oc(0,n,6,1,"div",0),i.Oc(1,c,1,0,"ng-template",null,1,i.Pc)),2&t){const t=i.Cc(2);i.sc("ngIf",e.shouldShowRetry)("ngIfElse",t)}},directives:[r.u],styles:[""]}),t})()},WbH0:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s("R8lv"),r=s("fXoL");let n=(()=>{class t{transform(t){switch(t){case i.h.MALE:return"Male";case i.h.FEMALE:return"Female";case i.h.OTHER:return"Not Specified";default:return"Unknown"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Pb({name:"genderFormat",type:t,pure:!0}),t})()},mYbV:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s("ofXK"),r=s("fXoL");let n=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},imports:[[i.c]]}),t})()}}]);