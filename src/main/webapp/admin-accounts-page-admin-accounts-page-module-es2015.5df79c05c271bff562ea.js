(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"++8I":function(t,s,e){"use strict";e.d(s,"a",(function(){return n}));var c=e("vMQM"),o=e("fXoL"),r=e("mW1j");let n=(()=>{class t{constructor(t){this.httpRequestService=t}loadInstructors(t){const s={courseid:t.courseId};return t.intent&&(s.intent=t.intent),this.httpRequestService.get(c.d.INSTRUCTORS,s)}getInstructor(t){const s={courseid:t.courseId,intent:t.intent};return t.feedbackSessionName&&(s.fsname=t.feedbackSessionName),t.key&&(s.key=t.key),t.moderatedPerson&&(s.moderatedperson=t.moderatedPerson),t.previewAs&&(s.previewas=t.previewAs),this.httpRequestService.get(c.d.INSTRUCTOR,s)}createInstructor(t){return this.httpRequestService.post(c.d.INSTRUCTOR,{courseid:t.courseId},t.requestBody)}updateInstructor(t){return this.httpRequestService.put(c.d.INSTRUCTOR,{courseid:t.courseId},t.requestBody)}deleteInstructor(t){const s={courseid:t.courseId};return t.instructorEmail&&(s.instructoremail=t.instructorEmail),t.instructorId&&(s.instructorid=t.instructorId),this.httpRequestService.delete(c.d.INSTRUCTOR,s)}loadInstructorPrivilege(t){const s={courseid:t.courseId};return t.feedbackSessionName&&(s.fsname=t.feedbackSessionName),t.sectionName&&(s.sectionname=t.sectionName),t.instructorRole&&(s.instructorrole=t.instructorRole),t.instructorEmail&&(s.instructoremail=t.instructorEmail),t.instructorId&&(s.instructorid=t.instructorId),this.httpRequestService.get(c.d.INSTRUCTOR_PRIVILEGE,s)}updateInstructorPrivilege(t){return this.httpRequestService.put(c.d.INSTRUCTOR_PRIVILEGE,{courseid:t.courseId,instructoremail:t.instructorEmail},t.requestBody)}}return t.\u0275fac=function(s){return new(s||t)(o.ec(r.a))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},vk7v:function(t,s,e){"use strict";e.r(s),e.d(s,"AdminAccountsPageModule",(function(){return T}));var c=e("ofXK"),o=e("tyNb"),r=e("aSpy"),n=e("nYR2"),i=e("fXoL"),u=e("++8I"),a=e("iRmZ"),d=e("Pvcr"),b=e("Uqoa"),l=e("PWrf"),g=e("vKUq"),h=e("Lcal");function I(t,s){if(1&t){const t=i.Xb();i.Wb(0,"button",15),i.ic("click",(function(){return i.Fc(t),i.kc(3).downgradeAccountToStudent()})),i.Rb(1,"i",16),i.Qc(2," Downgrade to Student "),i.Vb()}}function f(t,s){if(1&t){const t=i.Xb();i.Wb(0,"div",3),i.Wb(1,"div",4),i.Wb(2,"label",5),i.Qc(3,"Google ID:"),i.Vb(),i.Wb(4,"div",6),i.Qc(5),i.Vb(),i.Wb(6,"label",5),i.Qc(7,"Name:"),i.Vb(),i.Wb(8,"div",7),i.Qc(9),i.Vb(),i.Wb(10,"label",5),i.Qc(11,"Email:"),i.Vb(),i.Wb(12,"div",8),i.Qc(13),i.Vb(),i.Wb(14,"label",5),i.Qc(15,"Institute:"),i.Vb(),i.Wb(16,"div",9),i.Qc(17),i.Vb(),i.Wb(18,"label",5),i.Qc(19,"Is Instructor:"),i.Vb(),i.Wb(20,"div",10),i.Qc(21),i.Vb(),i.Wb(22,"div",11),i.Oc(23,I,3,0,"button",12),i.Wb(24,"button",13),i.ic("click",(function(){return i.Fc(t),i.kc(2).deleteAccount()})),i.Rb(25,"i",14),i.Qc(26," Delete Account "),i.Vb(),i.Vb(),i.Vb(),i.Vb()}if(2&t){const t=i.kc(2);i.Cb(5),i.Rc(t.accountInfo.googleId),i.Cb(4),i.Rc(t.accountInfo.name),i.Cb(4),i.Rc(t.accountInfo.email),i.Cb(4),i.Rc(t.accountInfo.institute),i.Cb(4),i.Rc(t.accountInfo.isInstructor),i.Cb(2),i.sc("ngIf",t.accountInfo.isInstructor)}}function m(t,s){if(1&t&&(i.Wb(0,"div"),i.Oc(1,f,27,6,"div",2),i.Vb()),2&t){const t=i.kc();i.Cb(1),i.sc("ngIf",t.accountInfo.googleId)}}function v(t,s){if(1&t){const t=i.Xb();i.Wb(0,"tr"),i.Wb(1,"td"),i.Qc(2),i.Vb(),i.Wb(3,"td"),i.Wb(4,"button",22),i.ic("click",(function(){i.Fc(t);const e=s.$implicit;return i.kc(3).removeInstructorFromCourse(e.courseId)})),i.Rb(5,"i",14),i.Qc(6," Remove From Course "),i.Vb(),i.Vb(),i.Vb()}if(2&t){const t=s.$implicit;i.Cb(2),i.Tc("[",t.courseId,"] ",t.courseName,"")}}function C(t,s){if(1&t&&(i.Wb(0,"div",19),i.Wb(1,"table",20),i.Wb(2,"thead"),i.Wb(3,"tr"),i.Wb(4,"th"),i.Qc(5,"Course"),i.Vb(),i.Wb(6,"th"),i.Qc(7,"Options"),i.Vb(),i.Vb(),i.Vb(),i.Wb(8,"tbody"),i.Oc(9,v,7,2,"tr",21),i.Vb(),i.Vb(),i.Vb()),2&t){const t=i.kc(2);i.Cb(9),i.sc("ngForOf",t.instructorCourses)}}function S(t,s){1&t&&(i.Wb(0,"div",23),i.Rb(1,"i",24),i.Qc(2," This account is not an instructor. "),i.Vb())}function p(t,s){1&t&&(i.Wb(0,"div",23),i.Rb(1,"i",24),i.Qc(2," No instructor courses found for this account. "),i.Vb())}function W(t,s){if(1&t&&(i.Wb(0,"div"),i.Oc(1,C,10,1,"div",17),i.Oc(2,S,3,0,"div",18),i.Oc(3,p,3,0,"div",18),i.Vb()),2&t){const t=i.kc();i.Cb(1),i.sc("ngIf",t.instructorCourses.length),i.Cb(1),i.sc("ngIf",!t.accountInfo.isInstructor),i.Cb(1),i.sc("ngIf",t.accountInfo.isInstructor&&!t.instructorCourses.length)}}function V(t,s){if(1&t){const t=i.Xb();i.Wb(0,"tr"),i.Wb(1,"td"),i.Qc(2),i.Vb(),i.Wb(3,"td"),i.Wb(4,"button",22),i.ic("click",(function(){i.Fc(t);const e=s.$implicit;return i.kc(3).removeStudentFromCourse(e.courseId)})),i.Rb(5,"i",14),i.Qc(6," Remove From Course "),i.Vb(),i.Vb(),i.Vb()}if(2&t){const t=s.$implicit;i.Cb(2),i.Tc("[",t.courseId,"] ",t.courseName,"")}}function R(t,s){if(1&t&&(i.Wb(0,"div",19),i.Wb(1,"table",25),i.Wb(2,"thead"),i.Wb(3,"tr"),i.Wb(4,"th"),i.Qc(5,"Course"),i.Vb(),i.Wb(6,"th"),i.Qc(7,"Options"),i.Vb(),i.Vb(),i.Vb(),i.Wb(8,"tbody"),i.Oc(9,V,7,2,"tr",21),i.Vb(),i.Vb(),i.Vb()),2&t){const t=i.kc(2);i.Cb(9),i.sc("ngForOf",t.studentCourses)}}function w(t,s){1&t&&(i.Wb(0,"div",23),i.Rb(1,"i",24),i.Qc(2," No student courses found for this account. "),i.Vb())}function Q(t,s){if(1&t&&(i.Wb(0,"div"),i.Oc(1,R,10,1,"div",17),i.Oc(2,w,3,0,"div",18),i.Vb()),2&t){const t=i.kc();i.Cb(1),i.sc("ngIf",t.studentCourses.length),i.Cb(1),i.sc("ngIf",!t.studentCourses.length)}}const O=[{path:"",component:(()=>{class t{constructor(t,s,e,c,o,r,n,i){this.route=t,this.router=s,this.instructorService=e,this.studentService=c,this.navigationService=o,this.statusMessageService=r,this.accountService=n,this.courseService=i,this.instructorCourses=[],this.studentCourses=[],this.accountInfo={googleId:"",name:"",email:"",isInstructor:!1,institute:"",createdAtTimeStamp:0},this.isLoadingAccountInfo=!1,this.isLoadingStudentCourses=!1,this.isLoadingInstructorCourses=!1}ngOnInit(){this.route.queryParams.subscribe(t=>{this.loadAccountInfo(t.instructorid)})}loadAccountInfo(t){this.isLoadingAccountInfo=!0,this.accountService.getAccount(t).pipe(Object(n.a)(()=>this.isLoadingAccountInfo=!1)).subscribe(t=>{this.accountInfo=t},t=>{this.statusMessageService.showErrorToast(t.error.message)}),this.isLoadingStudentCourses=!0,this.courseService.getStudentCoursesInMasqueradeMode(t).pipe(Object(n.a)(()=>this.isLoadingStudentCourses=!1)).subscribe(t=>{this.studentCourses=t.courses},t=>{403!==t.status&&this.statusMessageService.showErrorToast(t.error.message)}),this.isLoadingInstructorCourses=!0,this.courseService.getInstructorCoursesInMasqueradeMode(t).pipe(Object(n.a)(()=>this.isLoadingInstructorCourses=!1)).subscribe(t=>{this.instructorCourses=t.courses},t=>{403!==t.status&&this.statusMessageService.showErrorToast(t.error.message)})}downgradeAccountToStudent(){const t=this.accountInfo.googleId;this.accountService.downgradeAccount(t).subscribe(()=>{this.instructorCourses=[],this.loadAccountInfo(t),this.statusMessageService.showSuccessToast("Instructor account is successfully downgraded to student.")},t=>{this.statusMessageService.showErrorToast(t.error.message)})}deleteAccount(){const t=this.accountInfo.googleId;this.accountService.deleteAccount(t).subscribe(()=>{this.navigationService.navigateWithSuccessMessage(this.router,"/web/admin/search",`Account "${t}" is successfully deleted.`)},t=>{this.statusMessageService.showErrorToast(t.error.message)})}removeStudentFromCourse(t){this.studentService.deleteStudent({courseId:t,googleId:this.accountInfo.googleId}).subscribe(()=>{this.studentCourses=this.studentCourses.filter(s=>s.courseId!==t),this.statusMessageService.showSuccessToast(`Student is successfully deleted from course "${t}"`)},t=>{this.statusMessageService.showErrorToast(t.error.message)})}removeInstructorFromCourse(t){this.instructorService.deleteInstructor({courseId:t,instructorId:this.accountInfo.googleId}).subscribe(()=>{this.instructorCourses=this.instructorCourses.filter(s=>s.courseId!==t),this.statusMessageService.showSuccessToast(`Instructor is successfully deleted from course "${t}"`)},t=>{this.statusMessageService.showErrorToast(t.error.message)})}}return t.\u0275fac=function(s){return new(s||t)(i.Qb(o.a),i.Qb(o.d),i.Qb(u.a),i.Qb(a.a),i.Qb(d.a),i.Qb(b.a),i.Qb(l.a),i.Qb(g.a))},t.\u0275cmp=i.Kb({type:t,selectors:[["tm-admin-accounts-page"]],decls:7,vars:5,consts:[[4,"tmIsLoading"],[2,"margin-top","20px","margin-bottom","30px"],["class","card bg-light","style","margin-top: 30px;",4,"ngIf"],[1,"card","bg-light",2,"margin-top","30px"],[1,"card-body","row",2,"padding","25px 40px"],[1,"col-sm-2","control-label"],["id","account-google-id",1,"col-sm-10"],["id","account-name",1,"col-sm-10"],["id","account-email",1,"col-sm-10"],["id","account-institute",1,"col-sm-10"],["id","account-is-instructor",1,"col-sm-10"],[1,"mx-auto",2,"margin-top","20px"],["id","btn-downgrade-account","class","btn btn-sm btn-warning","style","margin-right: 10px;",3,"click",4,"ngIf"],["id","btn-delete-account",1,"btn","btn-sm","btn-danger",3,"click"],[1,"fas","fa-trash-alt"],["id","btn-downgrade-account",1,"btn","btn-sm","btn-warning",2,"margin-right","10px",3,"click"],[1,"fas","fa-times"],["class","card bg-light",4,"ngIf"],["class","alert alert-warning",4,"ngIf"],[1,"card","bg-light"],["id","instructor-table",1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"alert","alert-warning"],[1,"fas","fa-exclamation-circle"],["id","student-table",1,"table","table-striped"]],template:function(t,s){1&t&&(i.Oc(0,m,2,1,"div",0),i.Wb(1,"h3",1),i.Qc(2),i.Vb(),i.Oc(3,W,4,3,"div",0),i.Wb(4,"h3",1),i.Qc(5),i.Vb(),i.Oc(6,Q,3,2,"div",0)),2&t&&(i.sc("tmIsLoading",s.isLoadingAccountInfo),i.Cb(2),i.Sc(" Instructor For ",s.instructorCourses.length," Courses\n"),i.Cb(1),i.sc("tmIsLoading",s.isLoadingInstructorCourses),i.Cb(2),i.Sc(" Student For ",s.studentCourses.length," Courses\n"),i.Cb(1),i.sc("tmIsLoading",s.isLoadingStudentCourses))},directives:[h.a,c.u,c.t],styles:[".control-label[_ngcontent-%COMP%]{font-weight:600}"]}),t})()}];let T=(()=>{class t{}return t.\u0275mod=i.Ob({type:t}),t.\u0275inj=i.Nb({factory:function(s){return new(s||t)},imports:[[c.c,o.h.forChild(O),r.a]]}),t})()}}]);