(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+Olu":function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var n=s("fXoL"),i=s("JUCI"),o=s("ZbLK"),c=s("h3mH"),r=s("ofXK"),a=s("zAMY"),d=s("Lcal"),b=s("Cg8i");const u=function(){return[]};function l(e,t){if(1&e){const e=n.Xb();n.Wb(0,"div",8),n.Wb(1,"tm-grq-rgq-view-responses",9),n.ic("instructorCommentTableModelChange",(function(t){return n.Fc(e),n.kc(3).triggerInstructorCommentTableModelChange(t)}))("updateCommentEvent",(function(t){return n.Fc(e),n.kc(3).triggerUpdateCommentEvent(t)}))("deleteCommentEvent",(function(t){return n.Fc(e),n.kc(3).triggerDeleteCommentEvent(t)}))("saveNewCommentEvent",(function(t){return n.Fc(e),n.kc(3).triggerSaveNewCommentEvent(t)})),n.Vb(),n.Vb()}if(2&e){const e=n.kc(2).$implicit,t=n.kc();n.Cb(1),n.sc("responses",e.value.questions||n.vc(11,u))("sectionOfView",e.key)("section",t.section)("sectionType",t.sectionType)("indicateMissingResponses",t.indicateMissingResponses)("groupByTeam",t.groupByTeam)("showStatistics",t.showStatistics)("isGrq",!0)("session",t.session)("isExpandAll",t.isExpandAll)("instructorCommentTableModel",t.instructorCommentTableModel)}}function m(e,t){if(1&e&&(n.Wb(0,"div"),n.Oc(1,l,2,12,"div",7),n.Vb()),2&e){const e=n.kc().$implicit;n.sc("@collapseAnim",void 0),n.Cb(1),n.sc("tmIsLoading",!e.value.hasPopulated)}}function p(e,t){if(1&e){const e=n.Xb();n.Wb(0,"div",1),n.Wb(1,"div",2),n.Wb(2,"div",3),n.ic("click",(function(){n.Fc(e);const s=t.$implicit;return n.kc().toggleAndLoadTab.emit(s.key)})),n.Qc(3),n.Wb(4,"div",4),n.Rb(5,"tm-panel-chevron",5),n.Vb(),n.Vb(),n.Oc(6,m,2,2,"div",6),n.Vb(),n.Vb()}if(2&e){const e=t.$implicit;n.Cb(3),n.Sc(" ","None"===e.key?"No specific section":e.key," "),n.Cb(2),n.sc("isExpanded",e.value.isTabExpanded),n.Cb(1),n.sc("ngIf",e.value.isTabExpanded)}}let f=(()=>{class e extends o.a{constructor(){super(c.a.GRQ),this.loadSection=new n.n,this.responses={}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Kb({type:e,selectors:[["tm-instructor-session-result-grq-view"]],inputs:{responses:"responses"},outputs:{loadSection:"loadSection"},features:[n.zb],decls:2,vars:3,consts:[["id","section-panel",4,"ngFor","ngForOf"],["id","section-panel"],[1,"card","margin-bottom-15px","alert-success-border"],["id","section-header",1,"card-header","alert-success","cursor-pointer",3,"click"],[1,"card-header-btn-toolbar"],[3,"isExpanded"],[4,"ngIf"],["class","card-body",4,"tmIsLoading"],[1,"card-body"],[2,"margin-bottom","20px",3,"responses","sectionOfView","section","sectionType","indicateMissingResponses","groupByTeam","showStatistics","isGrq","session","isExpandAll","instructorCommentTableModel","instructorCommentTableModelChange","updateCommentEvent","deleteCommentEvent","saveNewCommentEvent"]],template:function(e,t){1&e&&(n.Oc(0,p,7,3,"div",0),n.lc(1,"keyvalue")),2&e&&n.sc("ngForOf",n.mc(1,1,t.responses))},directives:[r.t,a.a,r.u,d.a,b.a],pipes:[r.m],styles:[".card-body[_ngcontent-%COMP%]{padding:0 1rem 1rem}.margin-bottom-15px[_ngcontent-%COMP%]{margin-bottom:15px}.alert-success-border[_ngcontent-%COMP%]{border-color:#c3e6cb}"],data:{animation:[i.a]}}),e})()},"R1+E":function(e,t,s){"use strict";s.d(t,"a",(function(){return T}));var n=s("ofXK"),i=s("3Pt+"),o=s("tyNb"),c=s("1kSV"),r=s("KryH"),a=s("bYKa"),d=s("aSpy"),b=s("RPsU"),u=s("jtMr"),l=s("aK3w"),m=s("SEFB"),p=s("XWfC"),f=s("VZAO"),h=s("fXoL");let g=(()=>{class e{}return e.\u0275mod=h.Ob({type:e}),e.\u0275inj=h.Nb({factory:function(t){return new(t||e)},providers:[c.a],imports:[[p.a,n.c,m.a,o.h,f.a,u.a]]}),e})();var C=s("r4OI");let E=(()=>{class e{}return e.\u0275mod=h.Ob({type:e}),e.\u0275inj=h.Nb({factory:function(t){return new(t||e)},imports:[[n.c,l.a,g,u.a,C.a,m.a,c.d,b.a]]}),e})();var v=s("UZZV"),S=s("TOej");let T=(()=>{class e{}return e.\u0275mod=h.Ob({type:e}),e.\u0275inj=h.Nb({factory:function(t){return new(t||e)},providers:[r.a,a.a],imports:[[n.c,i.j,c.d,c.y,o.h,l.a,g,E,v.a,C.a,d.a,b.a,S.a]]}),e})()},ZbLK:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("fXoL"),i=s("R8lv"),o=s("C58a"),c=s("h3mH");let r=(()=>{class e{constructor(e){this.viewType=e,this.section="",this.sectionType=o.a.EITHER,this.groupByTeam=!0,this.showStatistics=!0,this.indicateMissingResponses=!0,this.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:i.o.AT_OPEN,responseVisibleSetting:i.n.AT_VISIBLE,submissionStatus:i.f.OPEN,publishStatus:i.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},this.instructorCommentTableModel={},this.isExpandAll=!1,this.toggleAndLoadTab=new n.n,this.instructorCommentTableModelChange=new n.n,this.saveNewCommentEvent=new n.n,this.deleteCommentEvent=new n.n,this.updateCommentEvent=new n.n}ngOnInit(){}triggerInstructorCommentTableModelChange(e){this.instructorCommentTableModelChange.emit(e)}triggerDeleteCommentEvent(e){this.deleteCommentEvent.emit(e)}triggerUpdateCommentEvent(e){this.updateCommentEvent.emit(e)}triggerSaveNewCommentEvent(e){this.saveNewCommentEvent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(c.a))},e.\u0275dir=n.Lb({type:e,inputs:{section:"section",sectionType:"sectionType",groupByTeam:"groupByTeam",showStatistics:"showStatistics",indicateMissingResponses:"indicateMissingResponses",session:"session",instructorCommentTableModel:"instructorCommentTableModel",isExpandAll:"isExpandAll"},outputs:{toggleAndLoadTab:"toggleAndLoadTab",instructorCommentTableModelChange:"instructorCommentTableModelChange",saveNewCommentEvent:"saveNewCommentEvent",deleteCommentEvent:"deleteCommentEvent",updateCommentEvent:"updateCommentEvent"}}),e})()},aLv3:function(e,t,s){"use strict";s.d(t,"a",(function(){return y}));var n=s("fXoL"),i=s("R8lv"),o=s("p6cw"),c=s("5hkX"),r=s("JUCI"),a=s("1kSV"),d=s("I8MS"),b=s("zAMY"),u=s("ofXK"),l=s("W872");function m(e,t){1&e&&n.Rb(0,"i",14)}function p(e,t){1&e&&n.Rb(0,"i",15)}function f(e,t){1&e&&n.Rb(0,"i",14)}function h(e,t){1&e&&n.Rb(0,"i",15)}const g=function(e,t,s){return{courseid:e,fsname:t,moderatedperson:s}};function C(e,t){if(1&e&&(n.Wb(0,"a",18),n.Qc(1," Submit responses "),n.Vb()),2&e){const e=n.kc().$implicit,t=n.kc(3);n.sc("queryParams",n.yc(1,g,t.session.courseId,t.session.feedbackSessionName,e.email))}}function E(e,t){1&e&&(n.Wb(0,"a",19),n.Qc(1,"Submit response"),n.Vb())}function v(e,t){if(1&e&&(n.Wb(0,"tr"),n.Wb(1,"td"),n.Qc(2),n.Vb(),n.Wb(3,"td"),n.Qc(4),n.Vb(),n.Wb(5,"td"),n.Oc(6,C,2,5,"a",16),n.Oc(7,E,2,0,"ng-template",null,17,n.Pc),n.Vb(),n.Vb()),2&e){const e=t.$implicit,s=n.Cc(8),i=n.kc(3);n.Cb(2),n.Rc(e.teamName),n.Cb(2),n.Rc(e.name),n.Cb(2),n.sc("ngIf",!i.isDisplayOnly)("ngIfElse",s)}}function S(e,t){if(1&e){const e=n.Xb();n.Wb(0,"div"),n.Wb(1,"table",6),n.Wb(2,"thead"),n.Wb(3,"tr"),n.Wb(4,"th",7),n.ic("click",(function(){n.Fc(e);const t=n.kc(2);return t.sortParticipantsBy(t.SortBy.TEAM_NAME)})),n.Qc(5," Team "),n.Wb(6,"span",8),n.Rb(7,"i",9),n.Oc(8,m,1,0,"i",10),n.Oc(9,p,1,0,"i",11),n.Vb(),n.Vb(),n.Wb(10,"th",12),n.ic("click",(function(){n.Fc(e);const t=n.kc(2);return t.sortParticipantsBy(t.SortBy.RESPONDENT_NAME)})),n.Qc(11," Name "),n.Wb(12,"span",8),n.Rb(13,"i",9),n.Oc(14,f,1,0,"i",10),n.Oc(15,h,1,0,"i",11),n.Vb(),n.Vb(),n.Wb(16,"th"),n.Qc(17,"Actions"),n.Vb(),n.Vb(),n.Vb(),n.Wb(18,"tbody"),n.Oc(19,v,9,4,"tr",13),n.Vb(),n.Vb(),n.Vb()}if(2&e){const e=n.kc(2);n.Cb(8),n.sc("ngIf",e.sortBy===e.SortBy.TEAM_NAME&&e.sortOrder===e.SortOrder.DESC),n.Cb(1),n.sc("ngIf",e.sortBy===e.SortBy.TEAM_NAME&&e.sortOrder===e.SortOrder.ASC),n.Cb(5),n.sc("ngIf",e.sortBy===e.SortBy.RESPONDENT_NAME&&e.sortOrder===e.SortOrder.DESC),n.Cb(1),n.sc("ngIf",e.sortBy===e.SortBy.RESPONDENT_NAME&&e.sortOrder===e.SortOrder.ASC),n.Cb(4),n.sc("ngForOf",e.noResponseStudentsInSection)}}function T(e,t){1&e&&(n.Wb(0,"div"),n.Wb(1,"i"),n.Qc(2,"All students have responded to some questions in this session."),n.Vb(),n.Vb())}function R(e,t){if(1&e&&(n.Wb(0,"div"),n.Wb(1,"div",5),n.Oc(2,S,20,5,"div",4),n.Oc(3,T,3,0,"div",4),n.Vb(),n.Vb()),2&e){const e=n.kc();n.sc("@collapseAnim",void 0),n.Cb(2),n.sc("ngIf",e.noResponseStudentsInSection.length),n.Cb(1),n.sc("ngIf",!e.noResponseStudentsInSection.length)}}let y=(()=>{class e{constructor(e,t){this.ngbModal=e,this.tableComparatorService=t,this.FeedbackSessionSubmissionStatus=i.f,this.SortBy=o.a,this.SortOrder=o.b,this.isDisplayOnly=!1,this.allStudents=[],this.noResponseStudents=[],this.section="",this.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:i.o.AT_OPEN,responseVisibleSetting:i.n.AT_VISIBLE,submissionStatus:i.f.OPEN,publishStatus:i.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},this.isTabExpanded=!1,this.sortBy=o.a.NONE,this.sortOrder=o.b.ASC,this.noResponseStudentsInSection=[],this.studentsToRemindEvent=new n.n}ngOnInit(){this.filterStudentsBySection()}ngOnChanges(){this.filterStudentsBySection()}filterStudentsBySection(){this.noResponseStudentsInSection=this.section?this.noResponseStudents.filter(e=>e.sectionName===this.section):this.noResponseStudents}openSendReminderModal(e){e.stopPropagation();const t=this.session.courseId,s=this.session.feedbackSessionName,n=this.noResponseStudents.map(e=>e.email),i=new Set(n),o=this.ngbModal.open(c.a);o.componentInstance.courseId=t,o.componentInstance.feedbackSessionName=s,o.componentInstance.studentListInfoTableRowModels=this.allStudents.map(e=>({email:e.email,name:e.name,teamName:e.teamName,sectionName:e.sectionName,hasSubmittedSession:!i.has(e.email),isSelected:i.has(e.email)})),o.result.then(e=>{this.studentsToRemindEvent.emit(e)},()=>{})}toggleTab(){this.isTabExpanded=!this.isTabExpanded}expandTab(){this.isTabExpanded=!0}collapseTab(){this.isTabExpanded=!1}sortParticipantsBy(e){this.sortBy=e,this.sortOrder=this.sortOrder===o.b.ASC?o.b.DESC:o.b.ASC,this.noResponseStudentsInSection.sort((e,t)=>{let s,n;switch(this.sortBy){case o.a.TEAM_NAME:s=e.teamName,n=t.teamName;break;case o.a.RESPONDENT_NAME:s=e.name,n=t.name;break;default:s="",n=""}return this.tableComparatorService.compare(this.sortBy,this.sortOrder,s,n)})}}return e.\u0275fac=function(t){return new(t||e)(n.Qb(a.m),n.Qb(d.a))},e.\u0275cmp=n.Kb({type:e,selectors:[["tm-instructor-session-no-response-panel"]],inputs:{isDisplayOnly:"isDisplayOnly",allStudents:"allStudents",noResponseStudents:"noResponseStudents",section:"section",session:"session"},outputs:{studentsToRemindEvent:"studentsToRemindEvent"},features:[n.Ab],decls:7,vars:3,consts:[["id","no-response-panel",1,"card-header","bg-secondary","text-white","cursor-pointer",3,"click"],[1,"card-header-btn-toolbar"],["id","btn-remind-all","type","button",1,"btn","btn-secondary","btn-sm","button",3,"disabled","click"],[3,"isExpanded"],[4,"ngIf"],[1,"card-body","p-0"],["id","no-response-table",1,"table","table-striped"],[1,"cursor-pointer",3,"click"],[1,"fa-stack"],[1,"fas","fa-sort"],["class","fas fa-sort-down",4,"ngIf"],["class","fas fa-sort-up",4,"ngIf"],["id","sort-by-name",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[1,"fas","fa-sort-down"],[1,"fas","fa-sort-up"],["tmRouterLink","/web/sessions/submission","rel","noopener noreferrer","target","_blank","class","btn btn-light btn-sm button",3,"queryParams",4,"ngIf","ngIfElse"],["displayOnlySubmitResponseButton",""],["tmRouterLink","/web/sessions/submission","rel","noopener noreferrer","target","_blank",1,"btn","btn-light","btn-sm","button",3,"queryParams"],[1,"btn","btn-light","btn-sm","button"]],template:function(e,t){1&e&&(n.Wb(0,"div",0),n.ic("click",(function(){return t.toggleTab()})),n.Qc(1," Participants who have not responded to any question "),n.Wb(2,"div",1),n.Wb(3,"button",2),n.ic("click",(function(e){return!t.isDisplayOnly&&t.openSendReminderModal(e),e.stopPropagation()})),n.Qc(4," Remind All "),n.Vb(),n.Rb(5,"tm-panel-chevron",3),n.Vb(),n.Vb(),n.Oc(6,R,4,3,"div",4)),2&e&&(n.Cb(3),n.sc("disabled",t.session.submissionStatus!==t.FeedbackSessionSubmissionStatus.OPEN),n.Cb(2),n.sc("isExpanded",t.isTabExpanded),n.Cb(1),n.sc("ngIf",t.isTabExpanded))},directives:[b.a,u.u,u.t,l.a],styles:[""],data:{animation:[r.a]}}),e})()},bEAN:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n=s("fXoL"),i=s("JUCI"),o=s("ZbLK"),c=s("h3mH"),r=s("ofXK"),a=s("CdkP"),d=s("zAMY"),b=s("Lcal"),u=s("xZXz"),l=s("uWR1");function m(e,t){if(1&e&&n.Rb(0,"tm-single-statistics",12),2&e){const e=n.kc(3).$implicit,t=n.kc();n.sc("question",e.question.questionDetails)("statistics",e.statistics)("responses",e.responses)("recipientType",e.question.recipientType)("section",t.section)("sectionType",t.sectionType)}}function p(e,t){if(1&e){const e=n.Xb();n.Wb(0,"div",8),n.Wb(1,"div",9),n.Oc(2,m,1,6,"tm-single-statistics",10),n.Vb(),n.Wb(3,"div",9),n.Wb(4,"tm-per-question-view-responses",11),n.ic("instructorCommentTableModelChange",(function(t){return n.Fc(e),n.kc(3).triggerInstructorCommentTableModelChange(t)}))("updateCommentEvent",(function(t){return n.Fc(e),n.kc(3).triggerUpdateCommentEvent(t)}))("deleteCommentEvent",(function(t){return n.Fc(e),n.kc(3).triggerDeleteCommentEvent(t)}))("saveNewCommentEvent",(function(t){return n.Fc(e),n.kc(3).triggerSaveNewCommentEvent(t)})),n.Vb(),n.Vb(),n.Vb()}if(2&e){const e=n.kc(2).$implicit,t=n.kc();n.Cb(2),n.sc("ngIf",t.showStatistics),n.Cb(2),n.sc("responses",e.responses)("section",t.section)("sectionType",t.sectionType)("session",t.session)("statistics",e.statistics)("indicateMissingResponses",t.indicateMissingResponses)("question",e.question)("isDisplayOnly",t.isDisplayOnly)("instructorCommentTableModel",t.instructorCommentTableModel)}}function f(e,t){if(1&e&&(n.Wb(0,"div"),n.Oc(1,p,5,10,"div",7),n.Vb()),2&e){const e=n.kc().$implicit;n.sc("@collapseAnim",void 0),n.Cb(1),n.sc("tmIsLoading",!e.hasPopulated)}}function h(e,t){if(1&e){const e=n.Xb();n.Wb(0,"div",1),n.Wb(1,"div",2),n.ic("click",(function(){n.Fc(e);const s=t.$implicit;return n.kc().toggleAndLoadTab.emit(s.question.feedbackQuestionId)})),n.Wb(2,"tm-question-text-with-info",3),n.ic("downloadQuestionResultEvent",(function(){n.Fc(e);const s=t.$implicit;return n.kc().triggerDownloadQuestionResult({questionNumber:s.question.questionNumber,questionId:s.question.feedbackQuestionId})})),n.Vb(),n.Wb(3,"div",4),n.Rb(4,"tm-panel-chevron",5),n.Vb(),n.Vb(),n.Oc(5,f,2,2,"div",6),n.Vb()}if(2&e){const e=t.$implicit;n.Cb(2),n.sc("questionNumber",e.question.questionNumber)("questionDetails",e.question.questionDetails)("shouldShowDownloadQuestionResult",!0),n.Cb(2),n.sc("isExpanded",e.isTabExpanded),n.Cb(1),n.sc("ngIf",e.isTabExpanded)}}let g=(()=>{class e extends o.a{constructor(){super(c.a.QUESTION),this.loadQuestion=new n.n,this.questions={},this.isDisplayOnly=!1,this.downloadQuestionResult=new n.n,this.questionsOrder=[]}ngOnInit(){this.sortQuestion()}ngOnChanges(){this.sortQuestion()}sortQuestion(){this.questionsOrder=Object.values(this.questions).sort((e,t)=>e.question.questionNumber-t.question.questionNumber)}triggerDownloadQuestionResult(e){this.downloadQuestionResult.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Kb({type:e,selectors:[["tm-instructor-session-result-question-view"]],inputs:{questions:"questions",isDisplayOnly:"isDisplayOnly"},outputs:{loadQuestion:"loadQuestion",downloadQuestionResult:"downloadQuestionResult"},features:[n.zb,n.Ab],decls:1,vars:1,consts:[["id","question-panel","class","card margin-bottom-15px",4,"ngFor","ngForOf"],["id","question-panel",1,"card","margin-bottom-15px"],["id","question-header",1,"card-header","bg-info","text-white","cursor-pointer",3,"click"],[3,"questionNumber","questionDetails","shouldShowDownloadQuestionResult","downloadQuestionResultEvent"],[1,"card-header-btn-toolbar"],[3,"isExpanded"],[4,"ngIf"],["class","card-body",4,"tmIsLoading"],[1,"card-body"],[1,"stats-table"],[3,"question","statistics","responses","recipientType","section","sectionType",4,"ngIf"],[3,"responses","section","sectionType","session","statistics","indicateMissingResponses","question","isDisplayOnly","instructorCommentTableModel","instructorCommentTableModelChange","updateCommentEvent","deleteCommentEvent","saveNewCommentEvent"],[3,"question","statistics","responses","recipientType","section","sectionType"]],template:function(e,t){1&e&&n.Oc(0,h,6,5,"div",0),2&e&&n.sc("ngForOf",t.questionsOrder)},directives:[r.t,a.a,d.a,r.u,b.a,u.a,l.a],styles:[".margin-bottom-15px[_ngcontent-%COMP%]{margin-bottom:15px}.card-header[_ngcontent-%COMP%]{cursor:pointer}.card-body[_ngcontent-%COMP%]{width:inherit;display:block;overflow-x:auto;padding:1rem}.stats-table[_ngcontent-%COMP%]{min-width:800px}"],data:{animation:[i.a]}}),e})()},h3mH:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var n=function(e){return e.QUESTION="QUESTION",e.GRQ="GRQ",e.RGQ="RGQ",e.GQR="GQR",e.RQG="RQG",e}({})},xZXz:function(e,t,s){"use strict";s.d(t,"a",(function(){return H}));var n=s("R8lv"),i=s("p6cw"),o=s("C58a"),c=s("YlBL"),r=s("fXoL"),a=s("I8MS"),d=s("YxrJ"),b=s("eoFM"),u=s("1kSV"),l=s("ofXK"),m=s("/SeH"),p=s("yHMj"),f=s("ZOO3"),h=s("EUNV"),g=s("OxLm");function C(e,t){1&e&&r.Rb(0,"i",13)}function E(e,t){1&e&&r.Rb(0,"i",14)}function v(e,t){if(1&e){const e=r.Xb();r.Wb(0,"th",8),r.ic("click",(function(){r.Fc(e);const t=r.kc(2);return t.sortResponses(t.SortBy.GIVER_TEAM)})),r.Qc(1," Team "),r.Wb(2,"span",9),r.Rb(3,"i",10),r.Oc(4,C,1,0,"i",11),r.Oc(5,E,1,0,"i",12),r.Vb(),r.Vb()}if(2&e){const e=r.kc(2);r.Cb(4),r.sc("ngIf",e.sortBy===e.SortBy.GIVER_TEAM&&e.sortOrder===e.SortOrder.DESC),r.Cb(1),r.sc("ngIf",e.sortBy===e.SortBy.GIVER_TEAM&&e.sortOrder===e.SortOrder.ASC)}}function S(e,t){1&e&&r.Rb(0,"i",13)}function T(e,t){1&e&&r.Rb(0,"i",14)}function R(e,t){if(1&e){const e=r.Xb();r.Wb(0,"th",8),r.ic("click",(function(){r.Fc(e);const t=r.kc(2);return t.sortResponses(t.SortBy.GIVER_NAME)})),r.Qc(1," Giver "),r.Wb(2,"span",9),r.Rb(3,"i",10),r.Oc(4,S,1,0,"i",11),r.Oc(5,T,1,0,"i",12),r.Vb(),r.Vb()}if(2&e){const e=r.kc(2);r.Cb(4),r.sc("ngIf",e.sortBy===e.SortBy.GIVER_NAME&&e.sortOrder===e.SortOrder.DESC),r.Cb(1),r.sc("ngIf",e.sortBy===e.SortBy.GIVER_NAME&&e.sortOrder===e.SortOrder.ASC)}}function y(e,t){1&e&&r.Rb(0,"i",13)}function O(e,t){1&e&&r.Rb(0,"i",14)}function I(e,t){if(1&e){const e=r.Xb();r.Wb(0,"th",8),r.ic("click",(function(){r.Fc(e);const t=r.kc(2);return t.sortResponses(t.SortBy.RECIPIENT_TEAM)})),r.Qc(1," Team "),r.Wb(2,"span",9),r.Rb(3,"i",10),r.Oc(4,y,1,0,"i",11),r.Oc(5,O,1,0,"i",12),r.Vb(),r.Vb()}if(2&e){const e=r.kc(2);r.Cb(4),r.sc("ngIf",e.sortBy===e.SortBy.RECIPIENT_TEAM&&e.sortOrder===e.SortOrder.DESC),r.Cb(1),r.sc("ngIf",e.sortBy===e.SortBy.RECIPIENT_TEAM&&e.sortOrder===e.SortOrder.ASC)}}function w(e,t){1&e&&r.Rb(0,"i",13)}function k(e,t){1&e&&r.Rb(0,"i",14)}function M(e,t){if(1&e){const e=r.Xb();r.Wb(0,"th",8),r.ic("click",(function(){r.Fc(e);const t=r.kc(2);return t.sortResponses(t.SortBy.RECIPIENT_NAME)})),r.Qc(1," Recipient "),r.Wb(2,"span",9),r.Rb(3,"i",10),r.Oc(4,w,1,0,"i",11),r.Oc(5,k,1,0,"i",12),r.Vb(),r.Vb()}if(2&e){const e=r.kc(2);r.Cb(4),r.sc("ngIf",e.sortBy===e.SortBy.RECIPIENT_NAME&&e.sortOrder===e.SortOrder.DESC),r.Cb(1),r.sc("ngIf",e.sortBy===e.SortBy.RECIPIENT_NAME&&e.sortOrder===e.SortOrder.ASC)}}function N(e,t){1&e&&(r.Wb(0,"th"),r.Qc(1,"Comment for Response"),r.Vb())}function V(e,t){if(1&e&&(r.Wb(0,"td"),r.Qc(1),r.Vb()),2&e){const e=r.kc().$implicit;r.Cb(1),r.Rc(e.giverTeam)}}function A(e,t){if(1&e&&(r.Wb(0,"td"),r.Rb(1,"tm-student-name-with-photo",19),r.Vb()),2&e){const e=r.kc().$implicit,t=r.kc(2);r.Cb(1),r.sc("name",e.giver)("email",e.giverEmail)("courseId",t.session.courseId)}}function q(e,t){if(1&e&&(r.Wb(0,"td"),r.Qc(1),r.Vb()),2&e){const e=r.kc().$implicit;r.Cb(1),r.Sc(" ","-"===e.recipientTeam?"No Specific Team":e.recipientTeam," ")}}function W(e,t){if(1&e&&(r.Wb(0,"td"),r.Rb(1,"tm-student-name-with-photo",19),r.Vb()),2&e){const e=r.kc().$implicit,t=r.kc(2);r.Cb(1),r.sc("name",e.recipient)("email",e.recipientEmail)("courseId",t.session.courseId)}}function B(e,t){if(1&e&&(r.Rb(0,"div",21),r.lc(1,"safeHtml")),2&e){const e=r.kc(2).$implicit;r.sc("innerHTML",r.mc(1,1,e.participantComment.commentText),r.Gc)}}function Q(e,t){if(1&e&&(r.Wb(0,"td"),r.Oc(1,B,2,3,"div",20),r.Vb()),2&e){const e=r.kc().$implicit;r.Cb(1),r.sc("ngIf",e.participantComment)}}function P(e,t){if(1&e&&r.Rb(0,"tm-response-moderation-button",22),2&e){const e=r.kc().$implicit,t=r.kc(2);r.sc("session",t.session)("relatedGiverEmail",e.relatedGiverEmail)("moderatedQuestionId",t.question.feedbackQuestionId)("isGiverInstructor","INSTRUCTORS"===t.question.giverType)}}function x(e,t){if(1&e&&(r.Wb(0,"span",25),r.Qc(1),r.Vb()),2&e){const e=r.kc(2).$implicit,t=r.kc(2);r.Cb(1),r.Rc(t.instructorCommentTableModel[e.responseId].commentRows.length)}}function _(e,t){if(1&e){const e=r.Xb();r.Wb(0,"button",23),r.ic("click",(function(){r.Fc(e);const t=r.kc().$implicit,s=r.kc(2),n=r.Cc(3);return s.showCommentTableModel(t,n)})),r.Qc(1,"Add Comment "),r.Oc(2,x,2,1,"span",24),r.Vb()}if(2&e){const e=r.kc().$implicit,t=r.kc(2);r.sc("disabled",t.isDisplayOnly),r.Cb(2),r.sc("ngIf",t.instructorCommentTableModel[e.responseId].commentRows.length)}}function D(e,t){if(1&e&&(r.Wb(0,"tr"),r.Oc(1,V,2,1,"td",0),r.Oc(2,A,2,3,"td",0),r.Oc(3,q,2,1,"td",0),r.Oc(4,W,2,3,"td",0),r.Wb(5,"td"),r.Rb(6,"tm-single-response",15),r.Vb(),r.Oc(7,Q,2,1,"td",0),r.Wb(8,"td",16),r.Oc(9,P,1,4,"tm-response-moderation-button",17),r.Oc(10,_,3,2,"button",18),r.Vb(),r.Vb()),2&e){const e=t.$implicit,s=r.kc(2);r.Hb("color-neutral",e.isMissingResponse),r.Cb(1),r.sc("ngIf",s.showGiver),r.Cb(1),r.sc("ngIf",s.showGiver),r.Cb(1),r.sc("ngIf",s.showRecipient),r.Cb(1),r.sc("ngIf",s.showRecipient),r.Cb(2),r.sc("responseDetails",e.responseDetails)("questionDetails",s.question.questionDetails)("giverEmail",e.giverEmail)("recipientEmail",e.recipientEmail)("statistics",s.statistics),r.Cb(1),r.sc("ngIf",s.canResponseHasComment),r.Cb(2),r.sc("ngIf",e.relatedGiverEmail),r.Cb(1),r.sc("ngIf",!e.isMissingResponse&&"CONTRIB"!==s.question.questionType)}}const F=function(e){return{"actions-cell-narrow":e}};function G(e,t){if(1&e&&(r.Wb(0,"div"),r.Wb(1,"table",3),r.Wb(2,"thead"),r.Wb(3,"tr",4),r.Oc(4,v,6,2,"th",5),r.Oc(5,R,6,2,"th",5),r.Oc(6,I,6,2,"th",5),r.Oc(7,M,6,2,"th",5),r.Wb(8,"th"),r.Qc(9,"Response"),r.Vb(),r.Oc(10,N,2,0,"th",0),r.Wb(11,"th",6),r.Qc(12,"Actions"),r.Vb(),r.Vb(),r.Vb(),r.Wb(13,"tbody"),r.Oc(14,D,11,14,"tr",7),r.Vb(),r.Vb(),r.Vb()),2&e){const e=r.kc();r.Cb(4),r.sc("ngIf",e.showGiver),r.Cb(1),r.sc("ngIf",e.showGiver),r.Cb(1),r.sc("ngIf",e.showRecipient),r.Cb(1),r.sc("ngIf",e.showRecipient),r.Cb(3),r.sc("ngIf",e.canResponseHasComment),r.Cb(1),r.sc("ngClass",r.wc(7,F,"CONTRIB"===e.question.questionType)),r.Cb(3),r.sc("ngForOf",e.responsesToShow)}}function L(e,t){1&e&&(r.Wb(0,"div",26),r.Wb(1,"i"),r.Qc(2,"There are no responses for this question or you may not have the permission to see the response."),r.Vb(),r.Vb())}function X(e,t){if(1&e){const e=r.Xb();r.Wb(0,"tm-comment-table-modal",28),r.ic("modelChange",(function(t){r.Fc(e);const s=r.kc(2);return s.triggerModelChangeForSingleResponse(s.currResponseToAdd.responseId,t)}))("saveNewCommentEvent",(function(){r.Fc(e);const t=r.kc(2);return t.triggerSaveNewCommentEvent(t.currResponseToAdd.responseId)}))("updateCommentEvent",(function(t){r.Fc(e);const s=r.kc(2);return s.triggerUpdateCommentEvent(s.currResponseToAdd.responseId,t)}))("deleteCommentEvent",(function(t){r.Fc(e);const s=r.kc(2);return s.triggerDeleteCommentEvent(s.currResponseToAdd.responseId,t)})),r.Vb()}if(2&e){const e=r.kc().$implicit,t=r.kc();r.sc("questionShowResponsesTo",t.question.showResponsesTo)("activeModal",e)("model",t.instructorCommentTableModel[t.currResponseToAdd.responseId])("response",t.currResponseToAdd)}}function $(e,t){if(1&e&&r.Oc(0,X,1,4,"tm-comment-table-modal",27),2&e){const e=r.kc();r.sc("ngIf",e.currResponseToAdd)}}let H=(()=>{class e extends c.a{constructor(e,t,s,c){super(),this.tableComparatorService=e,this.questionsService=t,this.feedbackResponsesService=s,this.ngbModal=c,this.SortBy=i.a,this.SortOrder=i.b,this.responses=[],this.section="",this.sectionType=o.a.EITHER,this.groupByTeam=!0,this.indicateMissingResponses=!0,this.showGiver=!0,this.showRecipient=!0,this.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:n.o.AT_OPEN,responseVisibleSetting:n.n.AT_VISIBLE,submissionStatus:n.f.OPEN,publishStatus:n.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},this.isDisplayOnly=!1,this.statistics="",this.responsesToShow=[],this.sortBy=i.a.NONE,this.sortOrder=i.b.ASC}ngOnInit(){this.filterResponses()}ngOnChanges(){this.filterResponses()}filterResponses(){const e=[];for(const t of this.responses)!this.indicateMissingResponses&&t.isMissingResponse||this.feedbackResponsesService.isFeedbackResponsesDisplayedOnSection(t,this.section,this.sectionType)&&e.push(t);e.some(e=>!e.isMissingResponse)?(this.responsesToShow=e,this.sortResponses(this.sortBy)):this.responsesToShow=[]}sortResponses(e){e!==i.a.NONE&&this.sortBy===e?this.sortOrder=this.sortOrder===i.b.ASC?i.b.DESC:i.b.ASC:(this.sortBy=e,this.sortOrder=i.b.ASC),this.responsesToShow.sort(this.sortResponsesBy(e,this.sortOrder))}sortResponsesBy(e,t){return e===i.a.NONE?(e,s)=>this.tableComparatorService.compare(i.a.GIVER_TEAM,t,e.giverTeam,s.giverTeam)||this.tableComparatorService.compare(i.a.GIVER_NAME,t,e.giver,s.giver)||this.tableComparatorService.compare(i.a.RECIPIENT_TEAM,t,e.recipientTeam,s.recipientTeam)||this.tableComparatorService.compare(i.a.RECIPIENT_NAME,t,e.recipient,s.recipient):(s,n)=>{let o,c;switch(e){case i.a.GIVER_TEAM:o=s.giverTeam,c=n.giverTeam;break;case i.a.GIVER_NAME:o=s.giver,c=n.giver;break;case i.a.RECIPIENT_TEAM:o=s.recipientTeam,c=n.recipientTeam;break;case i.a.RECIPIENT_NAME:o=s.recipient,c=n.recipient;break;default:o="",c=""}return this.tableComparatorService.compare(e,t,o,c)}}showCommentTableModel(e,t){const s=this.ngbModal.open(t);this.currResponseToAdd=e,s.result.then(()=>{},()=>{this.currResponseToAdd=void 0})}get canResponseHasComment(){return this.questionsService.isAllowedToHaveParticipantComment(this.question.questionType)}}return e.\u0275fac=function(t){return new(t||e)(r.Qb(a.a),r.Qb(d.a),r.Qb(b.a),r.Qb(u.m))},e.\u0275cmp=r.Kb({type:e,selectors:[["tm-per-question-view-responses"]],inputs:{responses:"responses",section:"section",sectionType:"sectionType",groupByTeam:"groupByTeam",indicateMissingResponses:"indicateMissingResponses",showGiver:"showGiver",showRecipient:"showRecipient",session:"session",isDisplayOnly:"isDisplayOnly",statistics:"statistics"},features:[r.zb,r.Ab],decls:4,vars:2,consts:[[4,"ngIf"],["id","no-responses",4,"ngIf"],["commentTableModal",""],["id","response-table",1,"table","table-bordered"],[1,"header"],["class","sortable-header",3,"click",4,"ngIf"],[1,"text-center","no-print","actions-cell",3,"ngClass"],[3,"color-neutral",4,"ngFor","ngForOf"],[1,"sortable-header",3,"click"],[1,"fa-stack"],[1,"fas","fa-sort"],["class","fas fa-sort-down",4,"ngIf"],["class","fas fa-sort-up",4,"ngIf"],[1,"fas","fa-sort-down"],[1,"fas","fa-sort-up"],[3,"responseDetails","questionDetails","giverEmail","recipientEmail","statistics"],[1,"text-center","no-print"],["btnStyle","LIGHT",3,"session","relatedGiverEmail","moderatedQuestionId","isGiverInstructor",4,"ngIf"],["id","btn-add-comment","class","btn btn-light btn-sm btn-margin-left",3,"disabled","click",4,"ngIf"],[3,"name","email","courseId"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["btnStyle","LIGHT",3,"session","relatedGiverEmail","moderatedQuestionId","isGiverInstructor"],["id","btn-add-comment",1,"btn","btn-light","btn-sm","btn-margin-left",3,"disabled","click"],["class","badge badge-secondary",4,"ngIf"],[1,"badge","badge-secondary"],["id","no-responses"],[3,"questionShowResponsesTo","activeModal","model","response","modelChange","saveNewCommentEvent","updateCommentEvent","deleteCommentEvent",4,"ngIf"],[3,"questionShowResponsesTo","activeModal","model","response","modelChange","saveNewCommentEvent","updateCommentEvent","deleteCommentEvent"]],template:function(e,t){1&e&&(r.Oc(0,G,15,9,"div",0),r.Oc(1,L,3,0,"div",1),r.Oc(2,$,1,1,"ng-template",null,2,r.Pc)),2&e&&(r.sc("ngIf",t.responsesToShow.length),r.Cb(1),r.sc("ngIf",!t.responsesToShow.length))},directives:[l.u,l.r,l.t,m.a,p.a,f.a,h.a],pipes:[g.a],styles:[".sortable-header[_ngcontent-%COMP%]{cursor:pointer;min-width:120px}.color-neutral[_ngcontent-%COMP%]{color:grey}.actions-cell[_ngcontent-%COMP%], .actions-cell-narrow[_ngcontent-%COMP%]{min-width:160px}@media (min-width:1000px){.actions-cell[_ngcontent-%COMP%]{min-width:300px}.actions-cell-narrow[_ngcontent-%COMP%]{min-width:160px}}"]}),e})()}}]);