<div class="card bg-light top-padded" *ngIf="accountRequests.length">
    <div class="card-header bg-primary text-white">
      <div *ngIf="searchString; else pendingRequests">
        <strong>Account Requests Found</strong>
      </div>
      <ng-template #pendingRequests>
        <strong>Pending Account Requests</strong>
      </ng-template>
      <div *ngIf="searchString" class="card-header-btn-toolbar">
        <button id="show-account-request-links" class="btn btn-light btn-sm" style="margin-right: 10px;" type="button" (click)="showAllAccountRequestsLinks()">Expand All</button>
        <button id="hide-account-request-links" class="btn btn-light btn-sm" type="button" (click)="hideAllAccountRequestsLinks()">Collapse All</button>
      </div>
    </div>
<div class="table-responsive">
    <table class="table table-striped data-table" id="search-table-account-request">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Status</th>
          <th>Institute, Country</th>
          <th>Created At</th>
          <th *ngIf="searchString">Registered At</th>
          <th>Comments</th>
          <th>Options</th>
        </tr>
      </thead>
      <tbody>
        <ng-container *ngFor="let accountRequest of accountRequests; let i = index">
          <tr>
            <td [innerHtml]="accountRequest.name | highlighter:searchString:true">
              <br>
              <div class="col-sm-1">
                <button *ngIf="!accountRequest.showLinks" class="btn" aria-label="Expand">
                  <i class="fas fa-chevron-circle-down" style="color: blue;"></i>
                </button>
                <button *ngIf="accountRequest.showLinks" class="btn" aria-label="Collapse">
                  <i class="fas fa-chevron-circle-up" style="color: blue;"></i>
                </button>
              </div>
            </td>
            <td [innerHtml]="accountRequest.email | highlighter:searchString:true">{{ accountRequest.email }}</td>
            <td>{{ accountRequest.status }}</td>
            <td [innerHtml]="accountRequest.instituteAndCountry | highlighter:searchString:true">{{ accountRequest.instituteAndCountry }}</td>
            <td id="timestamp-box">{{ accountRequest.createdAtText }}</td>
            <td *ngIf="searchString" id="timestamp-box">{{ accountRequest.registeredAtText || 'Not Registered Yet' }}</td>
            <td>
              <div id="comment-box">
                {{ accountRequest.comments }}
                </div>
            </td>
            <td class="align-middle">
              <div class="d-flex flex-row align-items-center justify-content-center gap-2">
              <div class="ngb-tooltip-class" [ngbTooltip]="accountRequest.registeredAtText && 'Account requests of registered instructors cannot be deleted'">
                <a id="delete-account-request-{{i}}" href="javascript:;" (click)="$event.stopPropagation(); deleteAccountRequest(accountRequest)">
                  <i class="fa-solid fa-trash"></i>
                </a>
              </div>
              <div>
                <a id="view-account-request-{{i}}" href="javascript:;" (click)="$event.stopPropagation(); viewAccountRequest(accountRequest)">
                    <i class="fa-solid fa-eye"></i>
                </a>
              </div>
              <div *ngIf="searchString" class="ngb-tooltip-class" [ngbTooltip]="accountRequest.registeredAtText && 'Account requests of registered instructors cannot be deleted'">
                <button id="reset-account-request-{{i}}" class="btn btn-primary" [disabled]="!accountRequest.registeredAtText" (click)="$event.stopPropagation(); resetAccountRequest(accountRequest);">Reset</button>
              </div>
              </div>
            </td>
          </tr>
          <tr *ngIf="accountRequest.showLinks && searchString">
            <td colspan="100">
              <ul class="list-group" *ngIf="accountRequest.showLinks" @collapseAnim>
                <li class="list-group-item list-group-item-info">
                  <strong>Account Registration Link</strong>
                  <input [value]="accountRequest.registrationLink" disabled class="form-control">
                </li>
              </ul>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
