function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var s=0,i=function(){};return{s:i,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){a=!0,o=e},f:function(){try{r||null==n.return||n.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,s=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+Olu":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var s=n("fXoL"),i=n("JUCI"),o=n("ZbLK"),r=n("h3mH"),a=n("ofXK"),c=n("zAMY"),u=n("Lcal"),l=n("Cg8i"),d=function(){return[]};function b(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",8),s.Wb(1,"tm-grq-rgq-view-responses",9),s.ic("instructorCommentTableModelChange",(function(e){return s.Fc(n),s.kc(3).triggerInstructorCommentTableModelChange(e)}))("updateCommentEvent",(function(e){return s.Fc(n),s.kc(3).triggerUpdateCommentEvent(e)}))("deleteCommentEvent",(function(e){return s.Fc(n),s.kc(3).triggerDeleteCommentEvent(e)}))("saveNewCommentEvent",(function(e){return s.Fc(n),s.kc(3).triggerSaveNewCommentEvent(e)})),s.Vb(),s.Vb()}if(2&e){var i=s.kc(2).$implicit,o=s.kc();s.Cb(1),s.sc("responses",i.value.questions||s.vc(11,d))("sectionOfView",i.key)("section",o.section)("sectionType",o.sectionType)("indicateMissingResponses",o.indicateMissingResponses)("groupByTeam",o.groupByTeam)("showStatistics",o.showStatistics)("isGrq",!0)("session",o.session)("isExpandAll",o.isExpandAll)("instructorCommentTableModel",o.instructorCommentTableModel)}}function m(e,t){if(1&e&&(s.Wb(0,"div"),s.Oc(1,b,2,12,"div",7),s.Vb()),2&e){var n=s.kc().$implicit;s.sc("@collapseAnim",void 0),s.Cb(1),s.sc("tmIsLoading",!n.value.hasPopulated)}}function p(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",1),s.Wb(1,"div",2),s.Wb(2,"div",3),s.ic("click",(function(){s.Fc(n);var e=t.$implicit;return s.kc().toggleAndLoadTab.emit(e.key)})),s.Qc(3),s.Wb(4,"div",4),s.Rb(5,"tm-panel-chevron",5),s.Vb(),s.Vb(),s.Oc(6,m,2,2,"div",6),s.Vb(),s.Vb()}if(2&e){var i=t.$implicit;s.Cb(3),s.Sc(" ","None"===i.key?"No specific section":i.key," "),s.Cb(2),s.sc("isExpanded",i.value.isTabExpanded),s.Cb(1),s.sc("ngIf",i.value.isTabExpanded)}}var f=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,r.a.GRQ)).loadSection=new s.n,e.responses={},e}return n}(o.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Kb({type:e,selectors:[["tm-instructor-session-result-grq-view"]],inputs:{responses:"responses"},outputs:{loadSection:"loadSection"},features:[s.zb],decls:2,vars:3,consts:[["id","section-panel",4,"ngFor","ngForOf"],["id","section-panel"],[1,"card","margin-bottom-15px","alert-success-border"],["id","section-header",1,"card-header","alert-success","cursor-pointer",3,"click"],[1,"card-header-btn-toolbar"],[3,"isExpanded"],[4,"ngIf"],["class","card-body",4,"tmIsLoading"],[1,"card-body"],[2,"margin-bottom","20px",3,"responses","sectionOfView","section","sectionType","indicateMissingResponses","groupByTeam","showStatistics","isGrq","session","isExpandAll","instructorCommentTableModel","instructorCommentTableModelChange","updateCommentEvent","deleteCommentEvent","saveNewCommentEvent"]],template:function(e,t){1&e&&(s.Oc(0,p,7,3,"div",0),s.lc(1,"keyvalue")),2&e&&s.sc("ngForOf",s.mc(1,1,t.responses))},directives:[a.t,c.a,a.u,u.a,l.a],pipes:[a.m],styles:[".card-body[_ngcontent-%COMP%]{padding:0 1rem 1rem}.margin-bottom-15px[_ngcontent-%COMP%]{margin-bottom:15px}.alert-success-border[_ngcontent-%COMP%]{border-color:#c3e6cb}"],data:{animation:[i.a]}}),e}()},"R1+E":function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var s,i,o,r=n("ofXK"),a=n("3Pt+"),c=n("tyNb"),u=n("1kSV"),l=n("KryH"),d=n("bYKa"),b=n("aSpy"),m=n("RPsU"),p=n("jtMr"),f=n("aK3w"),v=n("SEFB"),h=n("XWfC"),g=n("VZAO"),C=n("fXoL"),y=((s=function e(){_classCallCheck(this,e)}).\u0275mod=C.Ob({type:s}),s.\u0275inj=C.Nb({factory:function(e){return new(e||s)},providers:[u.a],imports:[[h.a,r.c,v.a,c.h,g.a,p.a]]}),s),E=n("r4OI"),S=((i=function e(){_classCallCheck(this,e)}).\u0275mod=C.Ob({type:i}),i.\u0275inj=C.Nb({factory:function(e){return new(e||i)},imports:[[r.c,f.a,y,p.a,E.a,v.a,u.d,m.a]]}),i),T=n("UZZV"),O=n("TOej"),R=((o=function e(){_classCallCheck(this,e)}).\u0275mod=C.Ob({type:o}),o.\u0275inj=C.Nb({factory:function(e){return new(e||o)},providers:[l.a,d.a],imports:[[r.c,a.j,u.d,u.y,c.h,f.a,y,S,T.a,E.a,b.a,m.a,O.a]]}),o)},ZbLK:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("fXoL"),i=n("R8lv"),o=n("C58a"),r=n("h3mH"),a=function(){var e=function(){function e(t){_classCallCheck(this,e),this.viewType=t,this.section="",this.sectionType=o.a.EITHER,this.groupByTeam=!0,this.showStatistics=!0,this.indicateMissingResponses=!0,this.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:i.o.AT_OPEN,responseVisibleSetting:i.n.AT_VISIBLE,submissionStatus:i.f.OPEN,publishStatus:i.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},this.instructorCommentTableModel={},this.isExpandAll=!1,this.toggleAndLoadTab=new s.n,this.instructorCommentTableModelChange=new s.n,this.saveNewCommentEvent=new s.n,this.deleteCommentEvent=new s.n,this.updateCommentEvent=new s.n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"triggerInstructorCommentTableModelChange",value:function(e){this.instructorCommentTableModelChange.emit(e)}},{key:"triggerDeleteCommentEvent",value:function(e){this.deleteCommentEvent.emit(e)}},{key:"triggerUpdateCommentEvent",value:function(e){this.updateCommentEvent.emit(e)}},{key:"triggerSaveNewCommentEvent",value:function(e){this.saveNewCommentEvent.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Qb(r.a))},e.\u0275dir=s.Lb({type:e,inputs:{section:"section",sectionType:"sectionType",groupByTeam:"groupByTeam",showStatistics:"showStatistics",indicateMissingResponses:"indicateMissingResponses",session:"session",instructorCommentTableModel:"instructorCommentTableModel",isExpandAll:"isExpandAll"},outputs:{toggleAndLoadTab:"toggleAndLoadTab",instructorCommentTableModelChange:"instructorCommentTableModelChange",saveNewCommentEvent:"saveNewCommentEvent",deleteCommentEvent:"deleteCommentEvent",updateCommentEvent:"updateCommentEvent"}}),e}()},aLv3:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var s=n("fXoL"),i=n("R8lv"),o=n("p6cw"),r=n("5hkX"),a=n("JUCI"),c=n("1kSV"),u=n("I8MS"),l=n("zAMY"),d=n("ofXK"),b=n("W872");function m(e,t){1&e&&s.Rb(0,"i",14)}function p(e,t){1&e&&s.Rb(0,"i",15)}function f(e,t){1&e&&s.Rb(0,"i",14)}function v(e,t){1&e&&s.Rb(0,"i",15)}var h=function(e,t,n){return{courseid:e,fsname:t,moderatedperson:n}};function g(e,t){if(1&e&&(s.Wb(0,"a",18),s.Qc(1," Submit responses "),s.Vb()),2&e){var n=s.kc().$implicit,i=s.kc(3);s.sc("queryParams",s.yc(1,h,i.session.courseId,i.session.feedbackSessionName,n.email))}}function C(e,t){1&e&&(s.Wb(0,"a",19),s.Qc(1,"Submit response"),s.Vb())}function y(e,t){if(1&e&&(s.Wb(0,"tr"),s.Wb(1,"td"),s.Qc(2),s.Vb(),s.Wb(3,"td"),s.Qc(4),s.Vb(),s.Wb(5,"td"),s.Oc(6,g,2,5,"a",16),s.Oc(7,C,2,0,"ng-template",null,17,s.Pc),s.Vb(),s.Vb()),2&e){var n=t.$implicit,i=s.Cc(8),o=s.kc(3);s.Cb(2),s.Rc(n.teamName),s.Cb(2),s.Rc(n.name),s.Cb(2),s.sc("ngIf",!o.isDisplayOnly)("ngIfElse",i)}}function E(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div"),s.Wb(1,"table",6),s.Wb(2,"thead"),s.Wb(3,"tr"),s.Wb(4,"th",7),s.ic("click",(function(){s.Fc(n);var e=s.kc(2);return e.sortParticipantsBy(e.SortBy.TEAM_NAME)})),s.Qc(5," Team "),s.Wb(6,"span",8),s.Rb(7,"i",9),s.Oc(8,m,1,0,"i",10),s.Oc(9,p,1,0,"i",11),s.Vb(),s.Vb(),s.Wb(10,"th",12),s.ic("click",(function(){s.Fc(n);var e=s.kc(2);return e.sortParticipantsBy(e.SortBy.RESPONDENT_NAME)})),s.Qc(11," Name "),s.Wb(12,"span",8),s.Rb(13,"i",9),s.Oc(14,f,1,0,"i",10),s.Oc(15,v,1,0,"i",11),s.Vb(),s.Vb(),s.Wb(16,"th"),s.Qc(17,"Actions"),s.Vb(),s.Vb(),s.Vb(),s.Wb(18,"tbody"),s.Oc(19,y,9,4,"tr",13),s.Vb(),s.Vb(),s.Vb()}if(2&e){var i=s.kc(2);s.Cb(8),s.sc("ngIf",i.sortBy===i.SortBy.TEAM_NAME&&i.sortOrder===i.SortOrder.DESC),s.Cb(1),s.sc("ngIf",i.sortBy===i.SortBy.TEAM_NAME&&i.sortOrder===i.SortOrder.ASC),s.Cb(5),s.sc("ngIf",i.sortBy===i.SortBy.RESPONDENT_NAME&&i.sortOrder===i.SortOrder.DESC),s.Cb(1),s.sc("ngIf",i.sortBy===i.SortBy.RESPONDENT_NAME&&i.sortOrder===i.SortOrder.ASC),s.Cb(4),s.sc("ngForOf",i.noResponseStudentsInSection)}}function S(e,t){1&e&&(s.Wb(0,"div"),s.Wb(1,"i"),s.Qc(2,"All students have responded to some questions in this session."),s.Vb(),s.Vb())}function T(e,t){if(1&e&&(s.Wb(0,"div"),s.Wb(1,"div",5),s.Oc(2,E,20,5,"div",4),s.Oc(3,S,3,0,"div",4),s.Vb(),s.Vb()),2&e){var n=s.kc();s.sc("@collapseAnim",void 0),s.Cb(2),s.sc("ngIf",n.noResponseStudentsInSection.length),s.Cb(1),s.sc("ngIf",!n.noResponseStudentsInSection.length)}}var O=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.ngbModal=t,this.tableComparatorService=n,this.FeedbackSessionSubmissionStatus=i.f,this.SortBy=o.a,this.SortOrder=o.b,this.isDisplayOnly=!1,this.allStudents=[],this.noResponseStudents=[],this.section="",this.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:i.o.AT_OPEN,responseVisibleSetting:i.n.AT_VISIBLE,submissionStatus:i.f.OPEN,publishStatus:i.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},this.isTabExpanded=!1,this.sortBy=o.a.NONE,this.sortOrder=o.b.ASC,this.noResponseStudentsInSection=[],this.studentsToRemindEvent=new s.n}return _createClass(e,[{key:"ngOnInit",value:function(){this.filterStudentsBySection()}},{key:"ngOnChanges",value:function(){this.filterStudentsBySection()}},{key:"filterStudentsBySection",value:function(){var e=this;this.noResponseStudentsInSection=this.section?this.noResponseStudents.filter((function(t){return t.sectionName===e.section})):this.noResponseStudents}},{key:"openSendReminderModal",value:function(e){var t=this;e.stopPropagation();var n=this.session.courseId,s=this.session.feedbackSessionName,i=this.noResponseStudents.map((function(e){return e.email})),o=new Set(i),a=this.ngbModal.open(r.a);a.componentInstance.courseId=n,a.componentInstance.feedbackSessionName=s,a.componentInstance.studentListInfoTableRowModels=this.allStudents.map((function(e){return{email:e.email,name:e.name,teamName:e.teamName,sectionName:e.sectionName,hasSubmittedSession:!o.has(e.email),isSelected:o.has(e.email)}})),a.result.then((function(e){t.studentsToRemindEvent.emit(e)}),(function(){}))}},{key:"toggleTab",value:function(){this.isTabExpanded=!this.isTabExpanded}},{key:"expandTab",value:function(){this.isTabExpanded=!0}},{key:"collapseTab",value:function(){this.isTabExpanded=!1}},{key:"sortParticipantsBy",value:function(e){var t=this;this.sortBy=e,this.sortOrder=this.sortOrder===o.b.ASC?o.b.DESC:o.b.ASC,this.noResponseStudentsInSection.sort((function(e,n){var s,i;switch(t.sortBy){case o.a.TEAM_NAME:s=e.teamName,i=n.teamName;break;case o.a.RESPONDENT_NAME:s=e.name,i=n.name;break;default:s="",i=""}return t.tableComparatorService.compare(t.sortBy,t.sortOrder,s,i)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Qb(c.m),s.Qb(u.a))},e.\u0275cmp=s.Kb({type:e,selectors:[["tm-instructor-session-no-response-panel"]],inputs:{isDisplayOnly:"isDisplayOnly",allStudents:"allStudents",noResponseStudents:"noResponseStudents",section:"section",session:"session"},outputs:{studentsToRemindEvent:"studentsToRemindEvent"},features:[s.Ab],decls:7,vars:3,consts:[["id","no-response-panel",1,"card-header","bg-secondary","text-white","cursor-pointer",3,"click"],[1,"card-header-btn-toolbar"],["id","btn-remind-all","type","button",1,"btn","btn-secondary","btn-sm","button",3,"disabled","click"],[3,"isExpanded"],[4,"ngIf"],[1,"card-body","p-0"],["id","no-response-table",1,"table","table-striped"],[1,"cursor-pointer",3,"click"],[1,"fa-stack"],[1,"fas","fa-sort"],["class","fas fa-sort-down",4,"ngIf"],["class","fas fa-sort-up",4,"ngIf"],["id","sort-by-name",1,"cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[1,"fas","fa-sort-down"],[1,"fas","fa-sort-up"],["tmRouterLink","/web/sessions/submission","rel","noopener noreferrer","target","_blank","class","btn btn-light btn-sm button",3,"queryParams",4,"ngIf","ngIfElse"],["displayOnlySubmitResponseButton",""],["tmRouterLink","/web/sessions/submission","rel","noopener noreferrer","target","_blank",1,"btn","btn-light","btn-sm","button",3,"queryParams"],[1,"btn","btn-light","btn-sm","button"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.ic("click",(function(){return t.toggleTab()})),s.Qc(1," Participants who have not responded to any question "),s.Wb(2,"div",1),s.Wb(3,"button",2),s.ic("click",(function(e){return!t.isDisplayOnly&&t.openSendReminderModal(e),e.stopPropagation()})),s.Qc(4," Remind All "),s.Vb(),s.Rb(5,"tm-panel-chevron",3),s.Vb(),s.Vb(),s.Oc(6,T,4,3,"div",4)),2&e&&(s.Cb(3),s.sc("disabled",t.session.submissionStatus!==t.FeedbackSessionSubmissionStatus.OPEN),s.Cb(2),s.sc("isExpanded",t.isTabExpanded),s.Cb(1),s.sc("ngIf",t.isTabExpanded))},directives:[l.a,d.u,d.t,b.a],styles:[""],data:{animation:[a.a]}}),e}()},bEAN:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n("fXoL"),i=n("JUCI"),o=n("ZbLK"),r=n("h3mH"),a=n("ofXK"),c=n("CdkP"),u=n("zAMY"),l=n("Lcal"),d=n("xZXz"),b=n("uWR1");function m(e,t){if(1&e&&s.Rb(0,"tm-single-statistics",12),2&e){var n=s.kc(3).$implicit,i=s.kc();s.sc("question",n.question.questionDetails)("statistics",n.statistics)("responses",n.responses)("recipientType",n.question.recipientType)("section",i.section)("sectionType",i.sectionType)}}function p(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",8),s.Wb(1,"div",9),s.Oc(2,m,1,6,"tm-single-statistics",10),s.Vb(),s.Wb(3,"div",9),s.Wb(4,"tm-per-question-view-responses",11),s.ic("instructorCommentTableModelChange",(function(e){return s.Fc(n),s.kc(3).triggerInstructorCommentTableModelChange(e)}))("updateCommentEvent",(function(e){return s.Fc(n),s.kc(3).triggerUpdateCommentEvent(e)}))("deleteCommentEvent",(function(e){return s.Fc(n),s.kc(3).triggerDeleteCommentEvent(e)}))("saveNewCommentEvent",(function(e){return s.Fc(n),s.kc(3).triggerSaveNewCommentEvent(e)})),s.Vb(),s.Vb(),s.Vb()}if(2&e){var i=s.kc(2).$implicit,o=s.kc();s.Cb(2),s.sc("ngIf",o.showStatistics),s.Cb(2),s.sc("responses",i.responses)("section",o.section)("sectionType",o.sectionType)("session",o.session)("statistics",i.statistics)("indicateMissingResponses",o.indicateMissingResponses)("question",i.question)("isDisplayOnly",o.isDisplayOnly)("instructorCommentTableModel",o.instructorCommentTableModel)}}function f(e,t){if(1&e&&(s.Wb(0,"div"),s.Oc(1,p,5,10,"div",7),s.Vb()),2&e){var n=s.kc().$implicit;s.sc("@collapseAnim",void 0),s.Cb(1),s.sc("tmIsLoading",!n.hasPopulated)}}function v(e,t){if(1&e){var n=s.Xb();s.Wb(0,"div",1),s.Wb(1,"div",2),s.ic("click",(function(){s.Fc(n);var e=t.$implicit;return s.kc().toggleAndLoadTab.emit(e.question.feedbackQuestionId)})),s.Wb(2,"tm-question-text-with-info",3),s.ic("downloadQuestionResultEvent",(function(){s.Fc(n);var e=t.$implicit;return s.kc().triggerDownloadQuestionResult({questionNumber:e.question.questionNumber,questionId:e.question.feedbackQuestionId})})),s.Vb(),s.Wb(3,"div",4),s.Rb(4,"tm-panel-chevron",5),s.Vb(),s.Vb(),s.Oc(5,f,2,2,"div",6),s.Vb()}if(2&e){var i=t.$implicit;s.Cb(2),s.sc("questionNumber",i.question.questionNumber)("questionDetails",i.question.questionDetails)("shouldShowDownloadQuestionResult",!0),s.Cb(2),s.sc("isExpanded",i.isTabExpanded),s.Cb(1),s.sc("ngIf",i.isTabExpanded)}}var h=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,r.a.QUESTION)).loadQuestion=new s.n,e.questions={},e.isDisplayOnly=!1,e.downloadQuestionResult=new s.n,e.questionsOrder=[],e}return _createClass(n,[{key:"ngOnInit",value:function(){this.sortQuestion()}},{key:"ngOnChanges",value:function(){this.sortQuestion()}},{key:"sortQuestion",value:function(){this.questionsOrder=Object.values(this.questions).sort((function(e,t){return e.question.questionNumber-t.question.questionNumber}))}},{key:"triggerDownloadQuestionResult",value:function(e){this.downloadQuestionResult.emit(e)}}]),n}(o.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Kb({type:e,selectors:[["tm-instructor-session-result-question-view"]],inputs:{questions:"questions",isDisplayOnly:"isDisplayOnly"},outputs:{loadQuestion:"loadQuestion",downloadQuestionResult:"downloadQuestionResult"},features:[s.zb,s.Ab],decls:1,vars:1,consts:[["id","question-panel","class","card margin-bottom-15px",4,"ngFor","ngForOf"],["id","question-panel",1,"card","margin-bottom-15px"],["id","question-header",1,"card-header","bg-info","text-white","cursor-pointer",3,"click"],[3,"questionNumber","questionDetails","shouldShowDownloadQuestionResult","downloadQuestionResultEvent"],[1,"card-header-btn-toolbar"],[3,"isExpanded"],[4,"ngIf"],["class","card-body",4,"tmIsLoading"],[1,"card-body"],[1,"stats-table"],[3,"question","statistics","responses","recipientType","section","sectionType",4,"ngIf"],[3,"responses","section","sectionType","session","statistics","indicateMissingResponses","question","isDisplayOnly","instructorCommentTableModel","instructorCommentTableModelChange","updateCommentEvent","deleteCommentEvent","saveNewCommentEvent"],[3,"question","statistics","responses","recipientType","section","sectionType"]],template:function(e,t){1&e&&s.Oc(0,v,6,5,"div",0),2&e&&s.sc("ngForOf",t.questionsOrder)},directives:[a.t,c.a,u.a,a.u,l.a,d.a,b.a],styles:[".margin-bottom-15px[_ngcontent-%COMP%]{margin-bottom:15px}.card-header[_ngcontent-%COMP%]{cursor:pointer}.card-body[_ngcontent-%COMP%]{width:inherit;display:block;overflow-x:auto;padding:1rem}.stats-table[_ngcontent-%COMP%]{min-width:800px}"],data:{animation:[i.a]}}),e}()},h3mH:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var s=function(e){return e.QUESTION="QUESTION",e.GRQ="GRQ",e.RGQ="RGQ",e.GQR="GQR",e.RQG="RQG",e}({})},xZXz:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var s=n("R8lv"),i=n("p6cw"),o=n("C58a"),r=n("YlBL"),a=n("fXoL"),c=n("I8MS"),u=n("YxrJ"),l=n("eoFM"),d=n("1kSV"),b=n("ofXK"),m=n("/SeH"),p=n("yHMj"),f=n("ZOO3"),v=n("EUNV"),h=n("OxLm");function g(e,t){1&e&&a.Rb(0,"i",13)}function C(e,t){1&e&&a.Rb(0,"i",14)}function y(e,t){if(1&e){var n=a.Xb();a.Wb(0,"th",8),a.ic("click",(function(){a.Fc(n);var e=a.kc(2);return e.sortResponses(e.SortBy.GIVER_TEAM)})),a.Qc(1," Team "),a.Wb(2,"span",9),a.Rb(3,"i",10),a.Oc(4,g,1,0,"i",11),a.Oc(5,C,1,0,"i",12),a.Vb(),a.Vb()}if(2&e){var s=a.kc(2);a.Cb(4),a.sc("ngIf",s.sortBy===s.SortBy.GIVER_TEAM&&s.sortOrder===s.SortOrder.DESC),a.Cb(1),a.sc("ngIf",s.sortBy===s.SortBy.GIVER_TEAM&&s.sortOrder===s.SortOrder.ASC)}}function E(e,t){1&e&&a.Rb(0,"i",13)}function S(e,t){1&e&&a.Rb(0,"i",14)}function T(e,t){if(1&e){var n=a.Xb();a.Wb(0,"th",8),a.ic("click",(function(){a.Fc(n);var e=a.kc(2);return e.sortResponses(e.SortBy.GIVER_NAME)})),a.Qc(1," Giver "),a.Wb(2,"span",9),a.Rb(3,"i",10),a.Oc(4,E,1,0,"i",11),a.Oc(5,S,1,0,"i",12),a.Vb(),a.Vb()}if(2&e){var s=a.kc(2);a.Cb(4),a.sc("ngIf",s.sortBy===s.SortBy.GIVER_NAME&&s.sortOrder===s.SortOrder.DESC),a.Cb(1),a.sc("ngIf",s.sortBy===s.SortBy.GIVER_NAME&&s.sortOrder===s.SortOrder.ASC)}}function O(e,t){1&e&&a.Rb(0,"i",13)}function R(e,t){1&e&&a.Rb(0,"i",14)}function I(e,t){if(1&e){var n=a.Xb();a.Wb(0,"th",8),a.ic("click",(function(){a.Fc(n);var e=a.kc(2);return e.sortResponses(e.SortBy.RECIPIENT_TEAM)})),a.Qc(1," Team "),a.Wb(2,"span",9),a.Rb(3,"i",10),a.Oc(4,O,1,0,"i",11),a.Oc(5,R,1,0,"i",12),a.Vb(),a.Vb()}if(2&e){var s=a.kc(2);a.Cb(4),a.sc("ngIf",s.sortBy===s.SortBy.RECIPIENT_TEAM&&s.sortOrder===s.SortOrder.DESC),a.Cb(1),a.sc("ngIf",s.sortBy===s.SortBy.RECIPIENT_TEAM&&s.sortOrder===s.SortOrder.ASC)}}function k(e,t){1&e&&a.Rb(0,"i",13)}function w(e,t){1&e&&a.Rb(0,"i",14)}function M(e,t){if(1&e){var n=a.Xb();a.Wb(0,"th",8),a.ic("click",(function(){a.Fc(n);var e=a.kc(2);return e.sortResponses(e.SortBy.RECIPIENT_NAME)})),a.Qc(1," Recipient "),a.Wb(2,"span",9),a.Rb(3,"i",10),a.Oc(4,k,1,0,"i",11),a.Oc(5,w,1,0,"i",12),a.Vb(),a.Vb()}if(2&e){var s=a.kc(2);a.Cb(4),a.sc("ngIf",s.sortBy===s.SortBy.RECIPIENT_NAME&&s.sortOrder===s.SortOrder.DESC),a.Cb(1),a.sc("ngIf",s.sortBy===s.SortBy.RECIPIENT_NAME&&s.sortOrder===s.SortOrder.ASC)}}function N(e,t){1&e&&(a.Wb(0,"th"),a.Qc(1,"Comment for Response"),a.Vb())}function _(e,t){if(1&e&&(a.Wb(0,"td"),a.Qc(1),a.Vb()),2&e){var n=a.kc().$implicit;a.Cb(1),a.Rc(n.giverTeam)}}function A(e,t){if(1&e&&(a.Wb(0,"td"),a.Rb(1,"tm-student-name-with-photo",19),a.Vb()),2&e){var n=a.kc().$implicit,s=a.kc(2);a.Cb(1),a.sc("name",n.giver)("email",n.giverEmail)("courseId",s.session.courseId)}}function V(e,t){if(1&e&&(a.Wb(0,"td"),a.Qc(1),a.Vb()),2&e){var n=a.kc().$implicit;a.Cb(1),a.Sc(" ","-"===n.recipientTeam?"No Specific Team":n.recipientTeam," ")}}function P(e,t){if(1&e&&(a.Wb(0,"td"),a.Rb(1,"tm-student-name-with-photo",19),a.Vb()),2&e){var n=a.kc().$implicit,s=a.kc(2);a.Cb(1),a.sc("name",n.recipient)("email",n.recipientEmail)("courseId",s.session.courseId)}}function q(e,t){if(1&e&&(a.Rb(0,"div",21),a.lc(1,"safeHtml")),2&e){var n=a.kc(2).$implicit;a.sc("innerHTML",a.mc(1,1,n.participantComment.commentText),a.Gc)}}function W(e,t){if(1&e&&(a.Wb(0,"td"),a.Oc(1,q,2,3,"div",20),a.Vb()),2&e){var n=a.kc().$implicit;a.Cb(1),a.sc("ngIf",n.participantComment)}}function B(e,t){if(1&e&&a.Rb(0,"tm-response-moderation-button",22),2&e){var n=a.kc().$implicit,s=a.kc(2);a.sc("session",s.session)("relatedGiverEmail",n.relatedGiverEmail)("moderatedQuestionId",s.question.feedbackQuestionId)("isGiverInstructor","INSTRUCTORS"===s.question.giverType)}}function Q(e,t){if(1&e&&(a.Wb(0,"span",25),a.Qc(1),a.Vb()),2&e){var n=a.kc(2).$implicit,s=a.kc(2);a.Cb(1),a.Rc(s.instructorCommentTableModel[n.responseId].commentRows.length)}}function x(e,t){if(1&e){var n=a.Xb();a.Wb(0,"button",23),a.ic("click",(function(){a.Fc(n);var e=a.kc().$implicit,t=a.kc(2),s=a.Cc(3);return t.showCommentTableModel(e,s)})),a.Qc(1,"Add Comment "),a.Oc(2,Q,2,1,"span",24),a.Vb()}if(2&e){var s=a.kc().$implicit,i=a.kc(2);a.sc("disabled",i.isDisplayOnly),a.Cb(2),a.sc("ngIf",i.instructorCommentTableModel[s.responseId].commentRows.length)}}function D(e,t){if(1&e&&(a.Wb(0,"tr"),a.Oc(1,_,2,1,"td",0),a.Oc(2,A,2,3,"td",0),a.Oc(3,V,2,1,"td",0),a.Oc(4,P,2,3,"td",0),a.Wb(5,"td"),a.Rb(6,"tm-single-response",15),a.Vb(),a.Oc(7,W,2,1,"td",0),a.Wb(8,"td",16),a.Oc(9,B,1,4,"tm-response-moderation-button",17),a.Oc(10,x,3,2,"button",18),a.Vb(),a.Vb()),2&e){var n=t.$implicit,s=a.kc(2);a.Hb("color-neutral",n.isMissingResponse),a.Cb(1),a.sc("ngIf",s.showGiver),a.Cb(1),a.sc("ngIf",s.showGiver),a.Cb(1),a.sc("ngIf",s.showRecipient),a.Cb(1),a.sc("ngIf",s.showRecipient),a.Cb(2),a.sc("responseDetails",n.responseDetails)("questionDetails",s.question.questionDetails)("giverEmail",n.giverEmail)("recipientEmail",n.recipientEmail)("statistics",s.statistics),a.Cb(1),a.sc("ngIf",s.canResponseHasComment),a.Cb(2),a.sc("ngIf",n.relatedGiverEmail),a.Cb(1),a.sc("ngIf",!n.isMissingResponse&&"CONTRIB"!==s.question.questionType)}}var F=function(e){return{"actions-cell-narrow":e}};function L(e,t){if(1&e&&(a.Wb(0,"div"),a.Wb(1,"table",3),a.Wb(2,"thead"),a.Wb(3,"tr",4),a.Oc(4,y,6,2,"th",5),a.Oc(5,T,6,2,"th",5),a.Oc(6,I,6,2,"th",5),a.Oc(7,M,6,2,"th",5),a.Wb(8,"th"),a.Qc(9,"Response"),a.Vb(),a.Oc(10,N,2,0,"th",0),a.Wb(11,"th",6),a.Qc(12,"Actions"),a.Vb(),a.Vb(),a.Vb(),a.Wb(13,"tbody"),a.Oc(14,D,11,14,"tr",7),a.Vb(),a.Vb(),a.Vb()),2&e){var n=a.kc();a.Cb(4),a.sc("ngIf",n.showGiver),a.Cb(1),a.sc("ngIf",n.showGiver),a.Cb(1),a.sc("ngIf",n.showRecipient),a.Cb(1),a.sc("ngIf",n.showRecipient),a.Cb(3),a.sc("ngIf",n.canResponseHasComment),a.Cb(1),a.sc("ngClass",a.wc(7,F,"CONTRIB"===n.question.questionType)),a.Cb(3),a.sc("ngForOf",n.responsesToShow)}}function G(e,t){1&e&&(a.Wb(0,"div",26),a.Wb(1,"i"),a.Qc(2,"There are no responses for this question or you may not have the permission to see the response."),a.Vb(),a.Vb())}function X(e,t){if(1&e){var n=a.Xb();a.Wb(0,"tm-comment-table-modal",28),a.ic("modelChange",(function(e){a.Fc(n);var t=a.kc(2);return t.triggerModelChangeForSingleResponse(t.currResponseToAdd.responseId,e)}))("saveNewCommentEvent",(function(){a.Fc(n);var e=a.kc(2);return e.triggerSaveNewCommentEvent(e.currResponseToAdd.responseId)}))("updateCommentEvent",(function(e){a.Fc(n);var t=a.kc(2);return t.triggerUpdateCommentEvent(t.currResponseToAdd.responseId,e)}))("deleteCommentEvent",(function(e){a.Fc(n);var t=a.kc(2);return t.triggerDeleteCommentEvent(t.currResponseToAdd.responseId,e)})),a.Vb()}if(2&e){var s=a.kc().$implicit,i=a.kc();a.sc("questionShowResponsesTo",i.question.showResponsesTo)("activeModal",s)("model",i.instructorCommentTableModel[i.currResponseToAdd.responseId])("response",i.currResponseToAdd)}}function H(e,t){if(1&e&&a.Oc(0,X,1,4,"tm-comment-table-modal",27),2&e){var n=a.kc();a.sc("ngIf",n.currResponseToAdd)}}var $=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,a,c){var u;return _classCallCheck(this,n),(u=t.call(this)).tableComparatorService=e,u.questionsService=r,u.feedbackResponsesService=a,u.ngbModal=c,u.SortBy=i.a,u.SortOrder=i.b,u.responses=[],u.section="",u.sectionType=o.a.EITHER,u.groupByTeam=!0,u.indicateMissingResponses=!0,u.showGiver=!0,u.showRecipient=!0,u.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:s.o.AT_OPEN,responseVisibleSetting:s.n.AT_VISIBLE,submissionStatus:s.f.OPEN,publishStatus:s.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},u.isDisplayOnly=!1,u.statistics="",u.responsesToShow=[],u.sortBy=i.a.NONE,u.sortOrder=i.b.ASC,u}return _createClass(n,[{key:"ngOnInit",value:function(){this.filterResponses()}},{key:"ngOnChanges",value:function(){this.filterResponses()}},{key:"filterResponses",value:function(){var e,t=[],n=_createForOfIteratorHelper(this.responses);try{for(n.s();!(e=n.n()).done;){var s=e.value;!this.indicateMissingResponses&&s.isMissingResponse||this.feedbackResponsesService.isFeedbackResponsesDisplayedOnSection(s,this.section,this.sectionType)&&t.push(s)}}catch(i){n.e(i)}finally{n.f()}t.some((function(e){return!e.isMissingResponse}))?(this.responsesToShow=t,this.sortResponses(this.sortBy)):this.responsesToShow=[]}},{key:"sortResponses",value:function(e){e!==i.a.NONE&&this.sortBy===e?this.sortOrder=this.sortOrder===i.b.ASC?i.b.DESC:i.b.ASC:(this.sortBy=e,this.sortOrder=i.b.ASC),this.responsesToShow.sort(this.sortResponsesBy(e,this.sortOrder))}},{key:"sortResponsesBy",value:function(e,t){var n=this;return e===i.a.NONE?function(e,s){return n.tableComparatorService.compare(i.a.GIVER_TEAM,t,e.giverTeam,s.giverTeam)||n.tableComparatorService.compare(i.a.GIVER_NAME,t,e.giver,s.giver)||n.tableComparatorService.compare(i.a.RECIPIENT_TEAM,t,e.recipientTeam,s.recipientTeam)||n.tableComparatorService.compare(i.a.RECIPIENT_NAME,t,e.recipient,s.recipient)}:function(s,o){var r,a;switch(e){case i.a.GIVER_TEAM:r=s.giverTeam,a=o.giverTeam;break;case i.a.GIVER_NAME:r=s.giver,a=o.giver;break;case i.a.RECIPIENT_TEAM:r=s.recipientTeam,a=o.recipientTeam;break;case i.a.RECIPIENT_NAME:r=s.recipient,a=o.recipient;break;default:r="",a=""}return n.tableComparatorService.compare(e,t,r,a)}}},{key:"showCommentTableModel",value:function(e,t){var n=this,s=this.ngbModal.open(t);this.currResponseToAdd=e,s.result.then((function(){}),(function(){n.currResponseToAdd=void 0}))}},{key:"canResponseHasComment",get:function(){return this.questionsService.isAllowedToHaveParticipantComment(this.question.questionType)}}]),n}(r.a);return e.\u0275fac=function(t){return new(t||e)(a.Qb(c.a),a.Qb(u.a),a.Qb(l.a),a.Qb(d.m))},e.\u0275cmp=a.Kb({type:e,selectors:[["tm-per-question-view-responses"]],inputs:{responses:"responses",section:"section",sectionType:"sectionType",groupByTeam:"groupByTeam",indicateMissingResponses:"indicateMissingResponses",showGiver:"showGiver",showRecipient:"showRecipient",session:"session",isDisplayOnly:"isDisplayOnly",statistics:"statistics"},features:[a.zb,a.Ab],decls:4,vars:2,consts:[[4,"ngIf"],["id","no-responses",4,"ngIf"],["commentTableModal",""],["id","response-table",1,"table","table-bordered"],[1,"header"],["class","sortable-header",3,"click",4,"ngIf"],[1,"text-center","no-print","actions-cell",3,"ngClass"],[3,"color-neutral",4,"ngFor","ngForOf"],[1,"sortable-header",3,"click"],[1,"fa-stack"],[1,"fas","fa-sort"],["class","fas fa-sort-down",4,"ngIf"],["class","fas fa-sort-up",4,"ngIf"],[1,"fas","fa-sort-down"],[1,"fas","fa-sort-up"],[3,"responseDetails","questionDetails","giverEmail","recipientEmail","statistics"],[1,"text-center","no-print"],["btnStyle","LIGHT",3,"session","relatedGiverEmail","moderatedQuestionId","isGiverInstructor",4,"ngIf"],["id","btn-add-comment","class","btn btn-light btn-sm btn-margin-left",3,"disabled","click",4,"ngIf"],[3,"name","email","courseId"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],["btnStyle","LIGHT",3,"session","relatedGiverEmail","moderatedQuestionId","isGiverInstructor"],["id","btn-add-comment",1,"btn","btn-light","btn-sm","btn-margin-left",3,"disabled","click"],["class","badge badge-secondary",4,"ngIf"],[1,"badge","badge-secondary"],["id","no-responses"],[3,"questionShowResponsesTo","activeModal","model","response","modelChange","saveNewCommentEvent","updateCommentEvent","deleteCommentEvent",4,"ngIf"],[3,"questionShowResponsesTo","activeModal","model","response","modelChange","saveNewCommentEvent","updateCommentEvent","deleteCommentEvent"]],template:function(e,t){1&e&&(a.Oc(0,L,15,9,"div",0),a.Oc(1,G,3,0,"div",1),a.Oc(2,H,1,1,"ng-template",null,2,a.Pc)),2&e&&(a.sc("ngIf",t.responsesToShow.length),a.Cb(1),a.sc("ngIf",!t.responsesToShow.length))},directives:[b.u,b.r,b.t,m.a,p.a,f.a,v.a],pipes:[h.a],styles:[".sortable-header[_ngcontent-%COMP%]{cursor:pointer;min-width:120px}.color-neutral[_ngcontent-%COMP%]{color:grey}.actions-cell[_ngcontent-%COMP%], .actions-cell-narrow[_ngcontent-%COMP%]{min-width:160px}@media (min-width:1000px){.actions-cell[_ngcontent-%COMP%]{min-width:300px}.actions-cell-narrow[_ngcontent-%COMP%]{min-width:160px}}"]}),e}()}}]);