function _createForOfIteratorHelper(e,s){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||s&&e&&"number"==typeof e.length){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,a=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return r=e.done,e},e:function(e){a=!0,o=e},f:function(){try{r||null==t.return||t.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(e,s){if(e){if("string"==typeof e)return _arrayLikeToArray(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,s):void 0}}function _arrayLikeToArray(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=new Array(s);t<s;t++)n[t]=e[t];return n}function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),e}function _inherits(e,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),s&&_setPrototypeOf(e,s)}function _setPrototypeOf(e,s){return(_setPrototypeOf=Object.setPrototypeOf||function(e,s){return e.__proto__=s,e})(e,s)}function _createSuper(e){var s=_isNativeReflectConstruct();return function(){var t,n=_getPrototypeOf(e);if(s){var i=_getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,s){return!s||"object"!=typeof s&&"function"!=typeof s?_assertThisInitialized(e):s}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Cg8i:function(e,s,t){"use strict";t.d(s,"a",(function(){return B}));var n=t("R8lv"),i=t("C58a"),o=t("JUCI"),r=t("YlBL"),a=t("fXoL"),c=t("eoFM"),l=t("ofXK"),u=t("zAMY"),m=t("yHMj"),p=t("ZOO3"),d=t("mL+/"),b=t("CdkP"),f=t("/SeH"),v=t("1kSV"),g=t("HQg1"),h=t("KryH");function T(e,s){if(1&e&&a.Rb(0,"tm-response-moderation-button",8),2&e){var t=a.kc(2);a.sc("session",t.session)("relatedGiverEmail",t.responses[0].allResponses[0].relatedGiverEmail)("isGiverInstructor","INSTRUCTORS"===t.responses[0].feedbackQuestion.giverType)}}function C(e,s){if(1&e){var t=a.Xb();a.Wb(0,"button",19),a.ic("click",(function(){a.Fc(t);var e=a.kc().$implicit;return a.kc(2).toggleAddComment(e.allResponses[0].responseId)})),a.Rb(1,"i",20),a.Vb()}}function y(e,s){if(1&e&&(a.Rb(0,"tm-comment-row",21),a.lc(1,"commentToCommentRowModel")),2&e){var t=a.kc().$implicit,n=a.kc(2);a.sc("model",a.nc(1,8,t.allResponses[0].participantComment,n.session.timeZone))("questionShowResponsesTo",t.feedbackQuestion.showResponsesTo)("isDisabled",!0)("isVisibilityOptionEnabled",!1)("mode",n.CommentRowMode.EDIT)("isFeedbackParticipantComment",!0)("shouldHideDeleteButton",!0)("shouldHideEditButton",!0)}}function E(e,s){if(1&e){var t=a.Xb();a.Wb(0,"tm-comment-table",22),a.ic("modelChange",(function(e){a.Fc(t);var s=a.kc().$implicit;return a.kc(2).triggerModelChangeForSingleResponse(s.allResponses[0].responseId,e)}))("updateCommentEvent",(function(e){a.Fc(t);var s=a.kc().$implicit;return a.kc(2).triggerUpdateCommentEvent(s.allResponses[0].responseId,e)}))("deleteCommentEvent",(function(e){a.Fc(t);var s=a.kc().$implicit;return a.kc(2).triggerDeleteCommentEvent(s.allResponses[0].responseId,e)}))("saveNewCommentEvent",(function(){a.Fc(t);var e=a.kc().$implicit;return a.kc(2).triggerSaveNewCommentEvent(e.allResponses[0].responseId)})),a.Vb()}if(2&e){var n=a.kc().$implicit,i=a.kc(2);a.sc("model",i.instructorCommentTableModel[n.allResponses[0].responseId])("questionShowResponsesTo",n.feedbackQuestion.showResponsesTo)("response",n.allResponses[0])}}function R(e,s){if(1&e&&(a.Wb(0,"div",9),a.Wb(1,"div",10),a.Wb(2,"div",11),a.Rb(3,"tm-question-text-with-info",12),a.Vb(),a.Wb(4,"div",13),a.Wb(5,"div",14),a.Rb(6,"tm-single-response",15),a.Oc(7,C,2,0,"button",16),a.Vb(),a.Oc(8,y,2,11,"tm-comment-row",17),a.Rb(9,"br"),a.Oc(10,E,1,3,"tm-comment-table",18),a.Vb(),a.Vb(),a.Vb()),2&e){var t=s.$implicit;a.Cb(3),a.sc("questionNumber",t.feedbackQuestion.questionNumber)("questionDetails",t.feedbackQuestion.questionDetails),a.Cb(3),a.Hb("color-neutral",t.allResponses[0].isMissingResponse),a.sc("responseDetails",t.allResponses[0].responseDetails)("questionDetails",t.feedbackQuestion.questionDetails)("giverEmail",t.allResponses[0].giverEmail)("recipientEmail",t.allResponses[0].recipientEmail)("statistics",t.questionStatistics),a.Cb(1),a.sc("ngIf",!t.allResponses[0].isMissingResponse&&"CONTRIB"!==t.feedbackQuestion.questionType),a.Cb(1),a.sc("ngIf",t.allResponses[0].participantComment),a.Cb(2),a.sc("ngIf",!t.allResponses[0].isMissingResponse&&"CONTRIB"!==t.feedbackQuestion.questionType)}}function k(e,s){if(1&e&&(a.Wb(0,"div",1),a.Wb(1,"div",2),a.Wb(2,"div"),a.Qc(3),a.Rb(4,"tm-student-name-with-photo",3),a.Qc(5),a.Vb(),a.Wb(6,"div",4),a.Qc(7),a.Rb(8,"tm-student-name-with-photo",3),a.Qc(9),a.Vb(),a.Wb(10,"div",4),a.Oc(11,T,1,3,"tm-response-moderation-button",5),a.Vb(),a.Vb(),a.Wb(12,"div",6),a.Oc(13,R,11,12,"div",7),a.Vb(),a.Vb()),2&e){var t=a.kc();a.Hb("border-bottom",!t.isLastGroupedResponses),a.Cb(3),a.Sc(" ",t.isGrq?"To":"From",": "),a.Cb(1),a.sc("name",t.responses[0].allResponses[0][t.isGrq?"recipient":"giver"])("email",t.userToEmail[t.responses[0].allResponses[0][t.isGrq?"recipient":"giver"]])("courseId",t.session.courseId),a.Cb(1),a.Sc(" ",t.teamInfo[t.isGrq?"recipient":"giver"]," "),a.Cb(2),a.Sc(" ",t.isGrq?"From":"To",": "),a.Cb(1),a.sc("name",t.responses[0].allResponses[0][t.isGrq?"giver":"recipient"])("email",t.userToEmail[t.responses[0].allResponses[0][t.isGrq?"giver":"recipient"]])("courseId",t.session.courseId),a.Cb(1),a.Sc(" ",t.teamInfo[t.isGrq?"giver":"recipient"]," "),a.Cb(2),a.sc("ngIf",!t.isGrq&&t.responses[0].allResponses[0].relatedGiverEmail),a.Cb(2),a.sc("ngForOf",t.responses)}}var I,O=((I=function(e){_inherits(t,e);var s=_createSuper(t);function t(){var e;return _classCallCheck(this,t),(e=s.call(this)).CommentRowMode=d.b,e.responses=[],e.userToEmail={},e.isLastGroupedResponses=!1,e.isGrq=!0,e.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:n.o.AT_OPEN,responseVisibleSetting:n.n.AT_VISIBLE,submissionStatus:n.f.OPEN,publishStatus:n.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},e.hasRealResponses=!1,e}return _createClass(t,[{key:"ngOnInit",value:function(){this.hasRealResponses=this.responses.some((function(e){return e.allResponses.some((function(e){return!e.isMissingResponse}))}))}},{key:"toggleAddComment",value:function(e){var s=this.instructorCommentTableModel[e];s.isAddingNewComment=!s.isAddingNewComment,this.triggerModelChangeForSingleResponse(e,s)}},{key:"teamInfo",get:function(){var e={},s=this.responses[0].allResponses[0].recipientTeam;return e.recipient=""!==s?"-"===s?"(No Specific Team)":"(".concat(s,")"):"",e.giver="(".concat(this.responses[0].allResponses[0].giverTeam,")"),e}}]),t}(r.a)).\u0275fac=function(e){return new(e||I)},I.\u0275cmp=a.Kb({type:I,selectors:[["tm-grouped-responses"]],inputs:{responses:"responses",userToEmail:"userToEmail",isLastGroupedResponses:"isLastGroupedResponses",isGrq:"isGrq",session:"session"},features:[a.zb],decls:1,vars:1,consts:[["class","row",3,"border-bottom",4,"ngIf"],[1,"row"],["id","users-details",1,"col-md-3"],[3,"name","email","courseId"],[1,"top-padded"],["btnStyle","LIGHT",3,"session","relatedGiverEmail","isGiverInstructor",4,"ngIf"],[1,"col-md-9"],["id","question-panel",4,"ngFor","ngForOf"],["btnStyle","LIGHT",3,"session","relatedGiverEmail","isGiverInstructor"],["id","question-panel"],[1,"card","bottom-padded","alert-primary-border"],[1,"card-header","alert-primary"],[3,"questionNumber","questionDetails"],[1,"card-body"],["id","response",1,"row",2,"margin","0"],[3,"responseDetails","questionDetails","giverEmail","recipientEmail","statistics"],["id","btn-add-comment","ngbTooltip","Add comment","type","button","class","btn btn-outline-primary btn-sm comment-button",3,"click",4,"ngIf"],[3,"model","questionShowResponsesTo","isDisabled","isVisibilityOptionEnabled","mode","isFeedbackParticipantComment","shouldHideDeleteButton","shouldHideEditButton",4,"ngIf"],[3,"model","questionShowResponsesTo","response","modelChange","updateCommentEvent","deleteCommentEvent","saveNewCommentEvent",4,"ngIf"],["id","btn-add-comment","ngbTooltip","Add comment","type","button",1,"btn","btn-outline-primary","btn-sm","comment-button",3,"click"],[1,"fas","fa-comment"],[3,"model","questionShowResponsesTo","isDisabled","isVisibilityOptionEnabled","mode","isFeedbackParticipantComment","shouldHideDeleteButton","shouldHideEditButton"],[3,"model","questionShowResponsesTo","response","modelChange","updateCommentEvent","deleteCommentEvent","saveNewCommentEvent"]],template:function(e,s){1&e&&a.Oc(0,k,14,14,"div",0),2&e&&a.sc("ngIf",s.responses.length&&s.responses[0].allResponses.length&&s.hasRealResponses)},directives:[l.u,m.a,l.t,p.a,b.a,f.a,v.w,d.a,g.a],pipes:[h.a],styles:[".top-padded[_ngcontent-%COMP%]{margin-top:20px}.bottom-padded[_ngcontent-%COMP%]{margin-bottom:20px}.color-neutral[_ngcontent-%COMP%]{color:grey}.comment-button[_ngcontent-%COMP%]{margin-left:auto;height:-webkit-max-content;height:-moz-max-content;height:max-content}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.alert-primary-border[_ngcontent-%COMP%]{border-color:#b8daff}"]}),I),S=function(e){return{userInfo:e}};function w(e,s){if(1&e&&(a.Wb(0,"div"),a.Sb(1,12),a.Vb()),2&e){var t=s.$implicit;a.kc(4);var n=a.Cc(6);a.Cb(1),a.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",a.wc(2,S,t))}}function _(e,s){if(1&e&&(a.Wb(0,"div",9),a.Wb(1,"div",10),a.Oc(2,w,2,4,"div",11),a.Vb(),a.Vb()),2&e){var t=a.kc().$implicit;a.sc("@collapseAnim",void 0),a.Cb(2),a.sc("ngForOf",t.value)}}function q(e,s){if(1&e){var t=a.Xb();a.Wb(0,"div",3),a.Wb(1,"div",4),a.Wb(2,"div",5),a.ic("click",(function(){a.Fc(t);var e=s.$implicit,n=a.kc(2);return n.teamExpanded[e.key]=!n.teamExpanded[e.key]})),a.Qc(3),a.Wb(4,"div",6),a.Rb(5,"tm-panel-chevron",7),a.Vb(),a.Vb(),a.Oc(6,_,3,2,"div",8),a.Vb(),a.Vb()}if(2&e){var n=s.$implicit,i=a.kc(2);a.Cb(3),a.Sc(" ","-"==n.key?"No Specific Team":n.key," "),a.Cb(2),a.sc("isExpanded",i.teamExpanded[n.key]),a.Cb(1),a.sc("ngIf",i.teamExpanded[n.key])}}function G(e,s){if(1&e&&(a.Wb(0,"div"),a.Oc(1,q,7,3,"div",2),a.lc(2,"keyvalue"),a.Vb()),2&e){var t=a.kc();a.Cb(1),a.sc("ngForOf",a.mc(2,1,t.teamsToUsers))}}function V(e,s){if(1&e&&(a.Wb(0,"div"),a.Sb(1,12),a.Vb()),2&e){var t=s.$implicit;a.kc(2);var n=a.Cc(6);a.Cb(1),a.sc("ngTemplateOutlet",n)("ngTemplateOutletContext",a.wc(2,S,t.key))}}function x(e,s){if(1&e&&(a.Wb(0,"div"),a.Oc(1,V,2,4,"div",13),a.lc(2,"keyvalue"),a.Vb()),2&e){var t=a.kc();a.Cb(1),a.sc("ngForOf",a.mc(2,2,t.userExpanded))("ngForTrackBy",t.trackByName)}}function M(e,s){1&e&&(a.Wb(0,"div"),a.Wb(1,"i"),a.Qc(2,"There are no responses for this section or you may not have the permission to see the response."),a.Vb(),a.Vb())}function N(e,s){if(1&e){var t=a.Xb();a.Wb(0,"a",19),a.ic("click",(function(e){return a.Fc(t),e.stopPropagation()})),a.Qc(1),a.Vb()}if(2&e){var n=a.kc().userInfo,i=a.kc();a.sc("href","mailto:"+i.userToEmail[n],a.Ic),a.Cb(1),a.Sc(" [",i.userToEmail[n],"] ")}}function P(e,s){if(1&e&&a.Rb(0,"tm-response-moderation-button",20),2&e){var t=a.kc().userInfo,n=a.kc();a.sc("relatedGiverEmail",n.userToRelatedEmail[t])("session",n.session)("isGiverInstructor",n.userIsInstructor[t])}}function F(e,s){if(1&e){var t=a.Xb();a.Wb(0,"div",23),a.Wb(1,"tm-grouped-responses",24),a.ic("instructorCommentTableModelChange",(function(e){return a.Fc(t),a.kc(4).triggerModelChange(e)}))("updateCommentEvent",(function(e){return a.Fc(t),a.kc(4).triggerUpdateCommentEvent(e.responseId,e.index)}))("deleteCommentEvent",(function(e){return a.Fc(t),a.kc(4).triggerDeleteCommentEvent(e.responseId,e.index)}))("saveNewCommentEvent",(function(e){return a.Fc(t),a.kc(4).triggerSaveNewCommentEvent(e)})),a.Vb(),a.Vb()}if(2&e){var n=s.last,i=s.$implicit,o=a.kc(4);a.Cb(1),a.sc("responses",i.value)("isGrq",o.isGrq)("session",o.session)("instructorCommentTableModel",o.instructorCommentTableModel)("userToEmail",o.userToEmail)("isLastGroupedResponses",n)}}function A(e,s){if(1&e&&(a.Ub(0),a.Oc(1,F,2,6,"div",22),a.lc(2,"keyvalue"),a.Tb()),2&e){var t=a.kc(2).userInfo,n=a.kc();a.Cb(1),a.sc("ngForOf",a.mc(2,1,n.responsesToShow[t]))}}function W(e,s){if(1&e&&(a.Wb(0,"div",25),a.Wb(1,"i"),a.Qc(2),a.Vb(),a.Vb()),2&e){var t=a.kc(3);a.Cb(2),a.Sc(" There are no responses ",t.isGrq?"given":"received"," by this user or you may not have the permission to see the responses. ")}}function U(e,s){if(1&e&&(a.Wb(0,"div"),a.Wb(1,"div",10),a.Oc(2,A,3,3,"ng-container",0),a.Oc(3,W,3,1,"div",21),a.Vb(),a.Vb()),2&e){var t=a.kc().userInfo,n=a.kc();a.sc("@collapseAnim",void 0),a.Cb(2),a.sc("ngIf",n.userHasRealResponses[t]),a.Cb(1),a.sc("ngIf",!n.userHasRealResponses[t])}}function D(e,s){if(1&e){var t=a.Xb();a.Wb(0,"div",14),a.Wb(1,"div",15),a.ic("click",(function(){a.Fc(t);var e=s.userInfo,n=a.kc();return n.userExpanded[e]=!n.userExpanded[e]})),a.Wb(2,"div"),a.Qc(3),a.Rb(4,"tm-student-name-with-photo",16),a.Qc(5),a.Oc(6,N,2,2,"a",17),a.Vb(),a.Wb(7,"div",6),a.Oc(8,P,1,3,"tm-response-moderation-button",18),a.Rb(9,"tm-panel-chevron",7),a.Vb(),a.Vb(),a.Oc(10,U,4,3,"div",0),a.Vb()}if(2&e){var n=s.userInfo,i=a.kc();a.Cb(3),a.Sc(" ",i.isGrq?"From":"To",": "),a.Cb(1),a.sc("name",n)("email",i.userToEmail[n])("courseId",i.session.courseId),a.Cb(1),a.Sc(" ",""!==i.usersToTeams[n]?"("+("-"===i.usersToTeams[n]?"No Specific Team":i.usersToTeams[n])+")":""," "),a.Cb(1),a.sc("ngIf",i.userToEmail[n]),a.Cb(2),a.sc("ngIf",i.isGrq&&i.userToRelatedEmail[n]),a.Cb(1),a.sc("isExpanded",i.userExpanded[n]),a.Cb(1),a.sc("ngIf",i.userExpanded[n])}}var H,B=((H=function(e){_inherits(t,e);var s=_createSuper(t);function t(e){var o;return _classCallCheck(this,t),(o=s.call(this)).feedbackResponsesService=e,o.responses=[],o.sectionOfView="",o.section="",o.sectionType=i.a.EITHER,o.groupByTeam=!0,o.showStatistics=!0,o.indicateMissingResponses=!0,o.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:n.o.AT_OPEN,responseVisibleSetting:n.n.AT_VISIBLE,submissionStatus:n.f.OPEN,publishStatus:n.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},o.isGrq=!0,o.teamsToUsers={},o.usersToTeams={},o.userToEmail={},o.userToRelatedEmail={},o.teamExpanded={},o.userExpanded={},o.userIsInstructor={},o.responsesToShow={},o.userHasRealResponses={},o}return _createClass(t,[{key:"ngOnInit",value:function(){this.filterResponses()}},{key:"ngOnChanges",value:function(){this.filterResponses()}},{key:"trackByName",value:function(e,s){return s.key}},{key:"filterResponses",value:function(){var e=this;this.responsesToShow={},this.userHasRealResponses={},this.teamsToUsers={},this.usersToTeams={},this.userToEmail={},this.userToRelatedEmail={},this.teamExpanded={},this.userExpanded={};var s,t=_createForOfIteratorHelper(this.responses);try{for(t.s();!(s=t.n()).done;){var i,o=s.value,r=_createForOfIteratorHelper(o.allResponses);try{for(r.s();!(i=r.n()).done;){var a=i.value;!this.indicateMissingResponses&&a.isMissingResponse||this.sectionOfView&&(this.isGrq&&a.giverSection!==this.sectionOfView||!this.isGrq&&a.recipientSection!==this.sectionOfView)||this.feedbackResponsesService.isFeedbackResponsesDisplayedOnSection(a,this.section,this.sectionType)&&(a.giverEmail&&(this.userToEmail[a.giver]=a.giverEmail),a.recipientEmail&&(this.userToEmail[a.recipient]=a.recipientEmail),this.isGrq?(this.teamsToUsers[a.giverTeam]=this.teamsToUsers[a.giverTeam]||[],this.usersToTeams[a.giver]=this.usersToTeams[a.giver]||"",-1===this.teamsToUsers[a.giverTeam].indexOf(a.giver)&&(this.teamsToUsers[a.giverTeam].push(a.giver),this.usersToTeams[a.giver]=a.giverTeam,this.teamExpanded[a.giverTeam]=this.isExpandAll),a.relatedGiverEmail&&(this.userToRelatedEmail[a.giver]=a.relatedGiverEmail),this.userExpanded[a.giver]=this.isExpandAll,this.userIsInstructor[a.giver]=o.feedbackQuestion.giverType===n.c.INSTRUCTORS):(this.usersToTeams[a.recipient]=this.usersToTeams[a.recipient]||"",this.userExpanded[a.recipient]=this.isExpandAll,a.recipientTeam?(this.teamsToUsers[a.recipientTeam]=this.teamsToUsers[a.recipientTeam]||[],-1===this.teamsToUsers[a.recipientTeam].indexOf(a.recipient)&&(this.teamsToUsers[a.recipientTeam].push(a.recipient),this.usersToTeams[a.recipient]=a.recipientTeam,this.teamExpanded[a.recipientTeam]=this.isExpandAll)):(this.teamsToUsers[a.recipient]=this.teamsToUsers[a.recipient]||[],-1===this.teamsToUsers[a.recipient].indexOf(a.recipient)&&(this.teamsToUsers[a.recipient].push(a.recipient),this.teamExpanded[a.recipient]=this.isExpandAll))))}}catch(m){r.e(m)}finally{r.f()}}}catch(m){t.e(m)}finally{t.f()}for(var c=function(){var s=u[l];e.userHasRealResponses[s]=!1;var t,n=_createForOfIteratorHelper(e.responses);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=JSON.parse(JSON.stringify(i));if(o.allResponses=o.allResponses.filter((function(t){return!(!e.indicateMissingResponses&&t.isMissingResponse||e.isGrq&&s!==t.giver||!e.isGrq&&s!==t.recipient||!e.feedbackResponsesService.isFeedbackResponsesDisplayedOnSection(t,e.section,e.sectionType))})),o.allResponses.length){var r,a=_createForOfIteratorHelper(o.allResponses.map((function(s){return e.isGrq?s.recipient:s.giver})));try{var c=function(){var t=r.value,n=JSON.parse(JSON.stringify(o));n.allResponses=n.allResponses.filter((function(s){return e.isGrq?s.recipient===t:s.giver===t})),e.responsesToShow[s]=e.responsesToShow[s]||{},e.responsesToShow[s][t]=e.responsesToShow[s][t]||[],e.responsesToShow[s][t].push(n),e.userHasRealResponses[s]||(e.userHasRealResponses[s]=n.allResponses.some((function(e){return!e.isMissingResponse})))};for(a.s();!(r=a.n()).done;)c()}catch(m){a.e(m)}finally{a.f()}}}}catch(m){n.e(m)}finally{n.f()}},l=0,u=Object.keys(this.userExpanded);l<u.length;l++)c()}}]),t}(r.a)).\u0275fac=function(e){return new(e||H)(a.Qb(c.a))},H.\u0275cmp=a.Kb({type:H,selectors:[["tm-grq-rgq-view-responses"]],inputs:{responses:"responses",sectionOfView:"sectionOfView",section:"section",sectionType:"sectionType",groupByTeam:"groupByTeam",showStatistics:"showStatistics",indicateMissingResponses:"indicateMissingResponses",session:"session",isGrq:"isGrq"},features:[a.zb,a.Ab],decls:7,vars:7,consts:[[4,"ngIf"],["userTab",""],["id","team-panel",4,"ngFor","ngForOf"],["id","team-panel"],[1,"card","top-padded"],["id","team-header",1,"card-header","alert-warning","cursor-pointer",3,"click"],[1,"card-header-btn-toolbar"],[3,"isExpanded"],["class","background-color-warning",4,"ngIf"],[1,"background-color-warning"],[1,"card-body"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf","ngForTrackBy"],["id","user-panel",1,"card","top-padded","border-primary"],["id","user-header",1,"card-header","bg-primary","text-white","cursor-pointer",3,"click"],[3,"name","email","courseId"],["class","text-white",3,"href","click",4,"ngIf"],["class","btn-margin-right","btnStyle","PRIMARY",3,"relatedGiverEmail","session","isGiverInstructor",4,"ngIf"],[1,"text-white",3,"href","click"],["btnStyle","PRIMARY",1,"btn-margin-right",3,"relatedGiverEmail","session","isGiverInstructor"],["id","no-responses","class","top-padded",4,"ngIf"],["id","grouped-responses","class","top-padded",4,"ngFor","ngForOf"],["id","grouped-responses",1,"top-padded"],[3,"responses","isGrq","session","instructorCommentTableModel","userToEmail","isLastGroupedResponses","instructorCommentTableModelChange","updateCommentEvent","deleteCommentEvent","saveNewCommentEvent"],["id","no-responses",1,"top-padded"]],template:function(e,s){if(1&e&&(a.Oc(0,G,3,3,"div",0),a.Oc(1,x,3,4,"div",0),a.Oc(2,M,3,0,"div",0),a.lc(3,"keyvalue"),a.lc(4,"keyvalue"),a.Oc(5,D,11,9,"ng-template",null,1,a.Pc)),2&e){var t=null,n=s.groupByTeam&&!(null!=(t=a.mc(3,3,s.teamsToUsers))&&t.length)||!s.groupByTeam&&!(null!=(t=a.mc(4,5,s.userExpanded))&&t.length);a.sc("ngIf",s.groupByTeam),a.Cb(1),a.sc("ngIf",!s.groupByTeam),a.Cb(1),a.sc("ngIf",n)}},directives:[l.u,l.t,u.a,l.B,m.a,p.a,O],pipes:[l.m],styles:[".top-padded[_ngcontent-%COMP%]{margin-top:20px}.card-body[_ngcontent-%COMP%]{padding:0 1rem 1rem}.margin-right-10px[_ngcontent-%COMP%]{margin-right:10px}.background-color-warning[_ngcontent-%COMP%]{background-color:#fff9e7}"],data:{animation:[o.a]}}),H)},UZZV:function(e,s,t){"use strict";t.d(s,"a",(function(){return f}));var n,i,o=t("ofXK"),r=t("1kSV"),a=t("jtMr"),c=t("RPsU"),l=t("SEFB"),u=t("XWfC"),m=t("aK3w"),p=t("VZAO"),d=t("fXoL"),b=((i=function e(){_classCallCheck(this,e)}).\u0275mod=d.Ob({type:i}),i.\u0275inj=d.Nb({factory:function(e){return new(e||i)},imports:[[o.c,m.a,p.a,a.a,u.a,l.a,r.y]]}),i),f=((n=function e(){_classCallCheck(this,e)}).\u0275mod=d.Ob({type:n}),n.\u0275inj=d.Nb({factory:function(e){return new(e||n)},imports:[[o.c,b,a.a,l.a,r.d,c.a]]}),n)},YlBL:function(e,s,t){"use strict";t.d(s,"a",(function(){return o}));var n=t("fXoL"),i=t("R8lv"),o=function(){var e=function(){function e(){_classCallCheck(this,e),this.question={feedbackQuestionId:"",questionNumber:1,questionBrief:"",questionDescription:"",questionDetails:{questionType:i.d.TEXT,questionText:""},questionType:i.d.TEXT,giverType:i.c.STUDENTS,recipientType:i.c.STUDENTS,numberOfEntitiesToGiveFeedbackToSetting:i.m.UNLIMITED,customNumberOfEntitiesToGiveFeedbackTo:0,showResponsesTo:[],showGiverNameTo:[],showRecipientNameTo:[]},this.instructorCommentTableModel={},this.isExpandAll=!1,this.instructorCommentTableModelChange=new n.n,this.saveNewCommentEvent=new n.n,this.deleteCommentEvent=new n.n,this.updateCommentEvent=new n.n}return _createClass(e,[{key:"triggerDeleteCommentEvent",value:function(e,s){this.deleteCommentEvent.emit({responseId:e,index:s})}},{key:"triggerUpdateCommentEvent",value:function(e,s){this.updateCommentEvent.emit({responseId:e,index:s})}},{key:"triggerSaveNewCommentEvent",value:function(e){this.saveNewCommentEvent.emit(e)}},{key:"triggerModelChangeForSingleResponse",value:function(e,s){this.instructorCommentTableModel[e]=s,this.instructorCommentTableModelChange.emit(this.instructorCommentTableModel)}},{key:"triggerModelChange",value:function(e){this.instructorCommentTableModelChange.emit(e)}}]),e}();return e.\u0275fac=function(s){return new(s||e)},e.\u0275dir=n.Lb({type:e,inputs:{question:"question",instructorCommentTableModel:"instructorCommentTableModel",isExpandAll:"isExpandAll"},outputs:{instructorCommentTableModelChange:"instructorCommentTableModelChange",saveNewCommentEvent:"saveNewCommentEvent",deleteCommentEvent:"deleteCommentEvent",updateCommentEvent:"updateCommentEvent"}}),e}()},ZOO3:function(e,s,t){"use strict";t.d(s,"a",(function(){return c}));var n=t("R8lv"),i=t("fXoL"),o=t("W872"),r=t("ofXK"),a=function(e,s,t,n){return{courseid:e,fsname:s,moderatedperson:t,moderatedquestionId:n}},c=function(){var e=function(){function e(){_classCallCheck(this,e),this.session={courseId:"",timeZone:"",feedbackSessionName:"",instructions:"",submissionStartTimestamp:0,submissionEndTimestamp:0,gracePeriod:0,sessionVisibleSetting:n.o.AT_OPEN,responseVisibleSetting:n.n.AT_VISIBLE,submissionStatus:n.f.OPEN,publishStatus:n.e.NOT_PUBLISHED,isClosingEmailEnabled:!0,isPublishedEmailEnabled:!0,createdAtTimestamp:0},this.relatedGiverEmail="",this.moderatedQuestionId="",this.isGiverInstructor=!1,this.btnStyle="LIGHT"}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=i.Kb({type:e,selectors:[["tm-response-moderation-button"]],inputs:{session:"session",relatedGiverEmail:"relatedGiverEmail",moderatedQuestionId:"moderatedQuestionId",isGiverInstructor:"isGiverInstructor",btnStyle:"btnStyle"},decls:2,vars:8,consts:[[1,"btn","btn-sm",3,"tmRouterLink","queryParams","ngClass"]],template:function(e,s){1&e&&(i.Wb(0,"a",0),i.Qc(1," Moderate response\n"),i.Vb()),2&e&&i.sc("tmRouterLink",s.isGiverInstructor?"/web/instructor/sessions/submission":"/web/sessions/submission")("queryParams",i.zc(3,a,s.session.courseId,s.session.feedbackSessionName,s.relatedGiverEmail,s.moderatedQuestionId))("ngClass","PRIMARY"===s.btnStyle?"btn-primary":"btn-light")},directives:[o.a,r.r],styles:[""]}),e}()},jtMr:function(e,s,t){"use strict";t.d(s,"a",(function(){return r}));var n=t("ofXK"),i=t("TOej"),o=t("fXoL"),r=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o.Ob({type:e}),e.\u0275inj=o.Nb({factory:function(s){return new(s||e)},imports:[[n.c,i.a]]}),e}()}}]);