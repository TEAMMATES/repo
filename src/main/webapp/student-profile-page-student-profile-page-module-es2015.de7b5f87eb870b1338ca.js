(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"/Tzu":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var o=function(t){return t[t.WARNING=0]="WARNING",t[t.DANGER=1]="DANGER",t[t.INFO=2]="INFO",t[t.NEUTRAL=3]="NEUTRAL",t[t.LOAD=4]="LOAD",t}({})},Babz:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var o=i("fXoL"),r=i("ofXK");function n(t,e){if(1&t){const t=o.Xb();o.Wb(0,"div",2),o.Wb(1,"p",3),o.Qc(2),o.Vb(),o.Wb(3,"button",4),o.ic("click",(function(){return o.Fc(t),o.kc().retryEvent.emit()})),o.Rb(4,"i",5),o.Qc(5,"\xa0Retry"),o.Vb(),o.Vb()}if(2&t){const t=o.kc();o.Cb(2),o.Rc(t.message)}}function s(t,e){1&t&&o.qc(0)}const a=["*"];let c=(()=>{class t{constructor(){this.message="",this.shouldShowRetry=!1,this.retryEvent=new o.n}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["tm-loading-retry"]],inputs:{message:"message",shouldShowRetry:"shouldShowRetry"},outputs:{retryEvent:"retryEvent"},ngContentSelectors:a,decls:3,vars:2,consts:[["class","text-center",4,"ngIf","ngIfElse"],["content",""],[1,"text-center"],[1,"text-muted","m-1"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fas","fa-redo"]],template:function(t,e){if(1&t&&(o.rc(),o.Oc(0,n,6,1,"div",0),o.Oc(1,s,1,0,"ng-template",null,1,o.Pc)),2&t){const t=o.Cc(2);o.sc("ngIf",e.shouldShowRetry)("ngIfElse",t)}},directives:[r.u],styles:[""]}),t})()},UGSt:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("fXoL");let r=(()=>{class t{transform(t){return Object.keys(t).map(e=>t[e])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Pb({name:"enumToArray",type:t,pure:!0}),t})()},WbH0:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var o=i("R8lv"),r=i("fXoL");let n=(()=>{class t{transform(t){switch(t){case o.h.MALE:return"Male";case o.h.FEMALE:return"Female";case o.h.OTHER:return"Not Specified";default:return"Unknown"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Pb({name:"genderFormat",type:t,pure:!0}),t})()},Wsbs:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("fXoL");let r=(()=>{class t{constructor(){this.useBlueSpinner=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["tm-ajax-loading"]],inputs:{useBlueSpinner:"useBlueSpinner"},decls:2,vars:3,consts:[[1,"loading-container"],["role","status"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Rb(1,"div",1),o.Vb()),2&t&&(o.Cb(1),o.Fb("spinner-border spinner-border-sm text-",e.useBlueSpinner?"primary":"white",""))},styles:[".loading-container[_ngcontent-%COMP%]{display:inline;margin-right:10px}"]}),t})()},a2yK:function(t,e,i){"use strict";i.r(e),i.d(e,"StudentProfilePageModule",(function(){return X}));var o=i("ofXK"),r=i("3Pt+"),n=i("tyNb"),s=i("1kSV"),a=i("fXoL"),c=i("jhN1");const p=["sourceImage"];function h(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",3),a.Wb(1,"div",4),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"move")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"move")})),a.Qc(2,"\xa0"),a.Vb(),a.Wb(3,"span",5),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","topleft")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","topleft")})),a.Rb(4,"span",6),a.Vb(),a.Wb(5,"span",7),a.Rb(6,"span",6),a.Vb(),a.Wb(7,"span",8),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","topright")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","topright")})),a.Rb(8,"span",6),a.Vb(),a.Wb(9,"span",9),a.Rb(10,"span",6),a.Vb(),a.Wb(11,"span",10),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","bottomright")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","bottomright")})),a.Rb(12,"span",6),a.Vb(),a.Wb(13,"span",11),a.Rb(14,"span",6),a.Vb(),a.Wb(15,"span",12),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","bottomleft")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","bottomleft")})),a.Rb(16,"span",6),a.Vb(),a.Wb(17,"span",13),a.Rb(18,"span",6),a.Vb(),a.Wb(19,"span",14),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","top")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","top")})),a.Vb(),a.Wb(20,"span",15),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","right")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","right")})),a.Vb(),a.Wb(21,"span",16),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","bottom")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","bottom")})),a.Vb(),a.Wb(22,"span",17),a.ic("mousedown",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","left")}))("touchstart",(function(e){return a.Fc(t),a.kc().startMove(e,"resize","left")})),a.Vb(),a.Vb()}if(2&t){const t=a.kc();a.Nc("top",t.cropper.y1,"px")("left",t.cropper.x1,"px")("width",t.cropper.x2-t.cropper.x1,"px")("height",t.cropper.y2-t.cropper.y1,"px")("margin-left","center"===t.alignImage?t.marginLeft:null)("visibility",t.imageVisible?"visible":"hidden"),a.Hb("rounded",t.roundCropper)}}function l(t,e){return new Promise((i,o)=>{const r=new Image;r.onload=function(){const t=r.width,n=r.height,s=document.createElement("canvas"),a=s.getContext("2d");a?(4<e&&e<9?(s.width=n,s.height=t):(s.width=t,s.height=n),function(t,e,i,o){switch(e){case 2:t.transform(-1,0,0,1,i,0);break;case 3:t.transform(-1,0,0,-1,i,o);break;case 4:t.transform(1,0,0,-1,0,o);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,o,0);break;case 7:t.transform(0,-1,-1,0,o,i);break;case 8:t.transform(0,-1,1,0,0,i)}}(a,e,t,n),a.drawImage(r,0,0),i(s.toDataURL())):o(new Error("No context"))},r.src=t})}let u=(()=>{let t=class{constructor(t,e,i){this.sanitizer=t,this.cd=e,this.zone=i,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.outputType="both",this.maintainAspectRatio=!0,this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.startCropImage=new a.n,this.imageCropped=new a.n,this.imageCroppedBase64=new a.n,this.imageCroppedFile=new a.n,this.imageLoaded=new a.n,this.cropperReady=new a.n,this.loadImageFailed=new a.n,this.initCropper()}set imageFileChanged(t){this.initCropper(),t&&this.loadImageFile(t)}set imageChangedEvent(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])}set imageBase64(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)}ngOnChanges(t){t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition()}initCropper(){this.imageVisible=!1,this.originalImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){const e=new FileReader;e.onload=e=>{this.isValidImageType(t.type)?this.checkExifAndLoadBase64Image(e.target.result):this.loadImageFailed.emit()},e.readAsDataURL(t)}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)}checkExifAndLoadBase64Image(t){(function(t){try{const e=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),i=e.length,o=new Uint8Array(i);for(let r=0;r<i;r++)o[r]=e.charCodeAt(r);return o.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;const i=e.byteLength;let o=2;for(;o<i;){if(e.getUint16(o+2,!1)<=8)return-1;const t=e.getUint16(o,!1);if(o+=2,65505==t){if(1165519206!=e.getUint32(o+=2,!1))return-1;const t=18761==e.getUint16(o+=6,!1);o+=e.getUint32(o+4,t);const i=e.getUint16(o,t);o+=2;for(let r=0;r<i;r++)if(274==e.getUint16(o+12*r,t))return e.getUint16(o+12*r+8,t)}else{if(65280!=(65280&t))break;o+=e.getUint16(o,!1)}}return-1}(t);return e>1?l(t,e):Promise.resolve(t)}catch(e){return Promise.reject(e)}})(t).then(t=>this.fitImageToAspectRatio(t)).then(t=>this.loadBase64Image(t)).catch(()=>this.loadImageFailed.emit())}fitImageToAspectRatio(t){return this.containWithinAspectRatio?(e=t,i=this.aspectRatio,new Promise((t,o)=>{const r=new Image;r.onload=function(){const e=document.createElement("canvas"),n=e.getContext("2d");if(n){const o=r.width/i;e.width=Math.max(r.width,r.height*i),e.height=Math.max(r.height,o),n.drawImage(r,(e.width-r.width)/2,(e.height-r.height)/2),t(e.toDataURL())}else o(new Error("No context"))},r.src=e})):Promise.resolve(t);var e,i}loadBase64Image(t){this.originalBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.originalImage=new Image,this.originalImage.onload=()=>{this.originalSize.width=this.originalImage.width,this.originalSize.height=this.originalImage.height,this.cd.markForCheck()},this.originalImage.src=t}imageLoadedInView(){null!=this.originalImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>{this.checkImageMaxSizeRecursively()},50))}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}rotateLeft(){this.transformBase64(8)}rotateRight(){this.transformBase64(6)}flipHorizontal(){this.transformBase64(2)}flipVertical(){this.transformBase64(4)}transformBase64(t){this.originalBase64&&l(this.originalBase64,t).then(t=>this.fitImageToAspectRatio(t)).then(t=>this.loadBase64Image(t))}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){const t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;const e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;const e=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-e)/2,this.cropper.x2=this.cropper.x1+e}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}startMove(t,e,i=null){t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)}moveImg(t){this.moveStart.active&&(t.stopPropagation(),t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.originalImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.originalImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.originalImage.height*this.maxSize.height):20}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}resize(t){const e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(t=this.outputType){if(this.sourceImage.nativeElement&&null!=this.originalImage){this.startCropImage.emit();const e=this.getImagePosition(),i=e.x2-e.x1,o=e.y2-e.y1,r=document.createElement("canvas");r.width=i,r.height=o;const n=r.getContext("2d");if(n){null!=this.backgroundColor&&(n.fillStyle=this.backgroundColor,n.fillRect(0,0,i,o)),n.drawImage(this.originalImage,e.x1,e.y1,i,o,0,0,i,o);const s={width:i,height:o,imagePosition:e,cropperPosition:Object.assign({},this.cropper)},a=this.getResizeRatio(i,o);return 1!==a&&(s.width=Math.round(i*a),s.height=this.maintainAspectRatio?Math.round(s.width/this.aspectRatio):Math.round(o*a),function(t,e,i,o=!0){const r=t.width,n=t.height,s=r/(e=Math.round(e)),a=n/(i=Math.round(i)),c=Math.ceil(s/2),p=Math.ceil(a/2),h=t.getContext("2d");if(h){const l=h.getImageData(0,0,r,n),u=h.createImageData(e,i),d=l.data,g=u.data;for(let t=0;t<i;t++)for(let i=0;i<e;i++){const o=4*(i+t*e),h=t*a;let l=0,u=0,m=0,f=0,b=0,y=0,M=0;const v=Math.floor(i*s),x=Math.floor(t*a);let C=Math.ceil((i+1)*s),S=Math.ceil((t+1)*a);C=Math.min(C,r),S=Math.min(S,n);for(let t=x;t<S;t++){const e=Math.abs(h-t)/p,o=i*s,n=e*e;for(let i=v;i<C;i++){const e=Math.abs(o-i)/c,s=Math.sqrt(n+e*e);if(s>=1)continue;l=2*s*s*s-3*s*s+1;const a=4*(i+t*r);M+=l*d[a+3],m+=l,d[a+3]<255&&(l=l*d[a+3]/250),f+=l*d[a],b+=l*d[a+1],y+=l*d[a+2],u+=l}}g[o]=f/u,g[o+1]=b/u,g[o+2]=y/u,g[o+3]=M/m}o?(t.width=e,t.height=i):h.clearRect(0,0,r,n),h.putImageData(u,0,0)}}(r,s.width,s.height)),this.cropToOutputType(t,r,s)}}return null}getImagePosition(){const t=this.originalSize.width/this.sourceImage.nativeElement.offsetWidth;return{x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.min(Math.round(this.cropper.x2*t),this.originalSize.width),y2:Math.min(Math.round(this.cropper.y2*t),this.originalSize.height)}}cropToOutputType(t,e,i){switch(t){case"file":return this.cropToFile(e).then(t=>(i.file=t,this.imageCropped.emit(i),i));case"both":return i.base64=this.cropToBase64(e),this.cropToFile(e).then(t=>(i.file=t,this.imageCropped.emit(i),i));default:return i.base64=this.cropToBase64(e),this.imageCropped.emit(i),i}}cropToBase64(t){const e=t.toDataURL("image/"+this.format,this.getQuality());return this.imageCroppedBase64.emit(e),e}cropToFile(t){return this.getCanvasBlob(t).then(t=>(t&&this.imageCroppedFile.emit(t),t))}getCanvasBlob(t){return new Promise(e=>{t.toBlob(t=>this.zone.run(()=>e(t)),"image/"+this.format,this.getQuality())})}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1}getClientX(t){return t.touches&&t.touches[0]&&t.touches[0].clientX||t.clientX}getClientY(t){return t.touches&&t.touches[0]&&t.touches[0].clientY||t.clientY}};return t.\u0275fac=function(e){return new(e||t)(a.Qb(c.b),a.Qb(a.h),a.Qb(a.z))},t.\u0275cmp=a.Kb({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){var i;1&t&&a.Mc(p,!0),2&t&&a.Bc(i=a.jc())&&(e.sourceImage=i.first)},hostVars:2,hostBindings:function(t,e){1&t&&a.ic("resize",(function(){return e.onResize()}),!1,a.Ec)("mousemove",(function(t){return e.moveImg(t)}),!1,a.Dc)("touchmove",(function(t){return e.moveImg(t)}),!1,a.Dc)("mouseup",(function(){return e.moveStop()}),!1,a.Dc)("touchend",(function(){return e.moveStop()}),!1,a.Dc),2&t&&a.Nc("text-align",e.alignImage)},inputs:{format:"format",outputType:"outputType",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",cropper:"cropper",alignImage:"alignImage",imageFileChanged:"imageFileChanged",imageChangedEvent:"imageChangedEvent",imageBase64:"imageBase64",backgroundColor:"backgroundColor"},outputs:{startCropImage:"startCropImage",imageCropped:"imageCropped",imageCroppedBase64:"imageCroppedBase64",imageCroppedFile:"imageCroppedFile",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[a.Ab],decls:4,vars:6,consts:[[1,"source-image",3,"src","load"],["sourceImage",""],["class","cropper",3,"rounded","top","left","width","height","margin-left","visibility",4,"ngIf"],[1,"cropper"],[1,"move",3,"mousedown","touchstart"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(a.Wb(0,"div"),a.Wb(1,"img",0,1),a.ic("load",(function(){return e.imageLoadedInView()})),a.Vb(),a.Oc(3,h,23,14,"div",2),a.Vb()),2&t&&(a.Nc("background",e.imageVisible&&e.backgroundColor,a.Jb),a.Cb(1),a.Nc("visibility",e.imageVisible?"visible":"hidden"),a.sc("src",e.safeImgDataUrl,a.Ic),a.Cb(2),a.sc("ngIf",e.imageVisible))},directives:[o.u],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;touch-action:none;outline:rgba(255,255,255,.3) solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3)}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3)}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}'],changeDetection:0}),t})(),d=(()=>{let t=class{};return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},imports:[[o.c]]}),t})();var g=i("n6pr"),m=i("mYbV"),f=i("aSpy"),b=i("SEFB"),y=i("dOUP"),M=i("R8lv"),v=i("Cfvw"),x=i("z6cu"),C=i("nYR2"),S=i("eIep"),w=i("JIr8"),P=i("/Tzu");let O=(()=>{class t{constructor(t){this.activeModal=t,this.imageChangedEvent=""}ngOnInit(){null!=this.image&&this.blobToBase64Image(this.image)}blobToBase64Image(t){const e=new FileReader;e.addEventListener("load",()=>{e.result&&(this.imageCropper.imageBase64=e.result)},!1),t&&e.readAsDataURL(t)}populateFormData(t){this.formData=new FormData,this.formData.append("studentprofilephoto",t,t.name)}uploadPicture(){this.activeModal.close(this.formData)}fileChangeEvent(t){this.imageChangedEvent=t;const e=t.target.files[0];e&&this.populateFormData(e)}imageCropped(t){this.populateFormData(t.file)}rotateLeft(){this.imageCropper.rotateLeft()}rotateRight(){this.imageCropper.rotateRight()}flipHorizontal(){this.imageCropper.flipHorizontal()}flipVertical(){this.imageCropper.flipVertical()}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(s.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["tm-upload-edit-profile-picture-modal"]],viewQuery:function(t,e){var i;1&t&&a.Wc(u,!0),2&t&&a.Bc(i=a.jc())&&(e.imageCropper=i.first)},inputs:{image:"image"},decls:30,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-hidden","true",1,"close",3,"click"],[1,"modal-body","align-center"],[1,"row"],[1,"col","sm-5"],[1,"col-md-4"],["type","file",1,"row","col","student-photo",3,"change"],[1,"col-md-8","pl-md-5"],["ngbTooltip","Flip Horizontally",1,"btn","btn-primary","btn-space",3,"click"],[1,"fas","fa-angle-double-left"],["ngbTooltip","Flip Vertically",1,"btn","btn-primary","btn-space",3,"click"],[1,"fas","fa-angle-double-up"],["ngbTooltip","Rotate Anti-clockwise",1,"btn","btn-primary","btn-space",3,"click"],[1,"fas","fa-redo-alt","fa-flip-horizontal"],["ngbTooltip","Rotate Clockwise",1,"btn","btn-primary","btn-space",3,"click"],[1,"fas","fa-redo-alt"],[3,"imageChangedEvent","maintainAspectRatio","imageCropped"],[1,"modal-footer"],[1,"btn","btn-success","btn-lg","profile-upload-picture-submit",3,"click"]],template:function(t,e){1&t&&(a.Wb(0,"div",0),a.Wb(1,"h4",1),a.Qc(2," Upload/Edit Photo "),a.Vb(),a.Wb(3,"button",2),a.ic("click",(function(){return e.activeModal.dismiss()})),a.Qc(4," \xd7 "),a.Vb(),a.Vb(),a.Wb(5,"div",3),a.Wb(6,"div",4),a.Wb(7,"div",5),a.Wb(8,"p"),a.Qc(9,"If you have no profile picture, upload one from your computer. Once a picture is uploaded, you will be able to edit it using the buttons below. Cropping is available by adjusting the box size. "),a.Vb(),a.Vb(),a.Vb(),a.Wb(10,"div",4),a.Wb(11,"div",6),a.Wb(12,"input",7),a.ic("change",(function(t){return e.fileChangeEvent(t)})),a.Vb(),a.Wb(13,"small"),a.Qc(14,"Max Size: 5MB"),a.Vb(),a.Vb(),a.Wb(15,"div",8),a.Wb(16,"button",9),a.ic("click",(function(){return e.flipHorizontal()})),a.Rb(17,"i",10),a.Vb(),a.Wb(18,"button",11),a.ic("click",(function(){return e.flipVertical()})),a.Rb(19,"i",12),a.Vb(),a.Wb(20,"button",13),a.ic("click",(function(){return e.rotateLeft()})),a.Rb(21,"i",14),a.Vb(),a.Wb(22,"button",15),a.ic("click",(function(){return e.rotateRight()})),a.Rb(23,"i",16),a.Vb(),a.Vb(),a.Vb(),a.Wb(24,"div",4),a.Wb(25,"image-cropper",17),a.ic("imageCropped",(function(t){return e.imageCropped(t)})),a.Vb(),a.Vb(),a.Vb(),a.Wb(26,"div",18),a.Wb(27,"div"),a.Wb(28,"button",19),a.ic("click",(function(){return e.uploadPicture()})),a.Qc(29,"Upload Image"),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Cb(25),a.sc("imageChangedEvent",e.imageChangedEvent)("maintainAspectRatio",!1))},directives:[s.w,u],styles:[".btn-space[_ngcontent-%COMP%]{margin-right:var(--btn-margin)}"]}),t})();var I=i("eQqG"),R=i("vMQM"),z=i("mW1j");let k=(()=>{class t{constructor(t){this.httpRequestService=t}getNationalities(){return this.httpRequestService.get(R.d.NATIONALITIES)}}return t.\u0275fac=function(e){return new(e||t)(a.ec(z.a))},t.\u0275prov=a.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var W=i("nAaM"),V=i("Uqoa"),A=i("Rjy1"),F=i("Babz"),T=i("Lcal"),_=i("Wsbs"),E=i("UGSt"),L=i("WbH0");function N(t,e){if(1&t){const t=a.Xb();a.Wb(0,"button",27),a.ic("click",(function(){return a.Fc(t),a.kc(3).onDelete()})),a.Qc(1," Delete Photo "),a.Vb()}}function D(t,e){if(1&t&&(a.Wb(0,"option",28),a.Qc(1),a.Vb()),2&t){const t=e.$implicit;a.sc("value",t),a.Cb(1),a.Sc(" ",t," ")}}function Q(t,e){if(1&t&&(a.Wb(0,"div",29),a.Rb(1,"input",30),a.Wb(2,"label",31),a.Qc(3),a.lc(4,"genderFormat"),a.Vb(),a.Vb()),2&t){const t=e.$implicit;a.Cb(1),a.sc("value",t),a.Cb(2),a.Rc(a.mc(4,2,t))}}function B(t,e){1&t&&a.Rb(0,"tm-ajax-loading")}function H(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",4),a.Wb(1,"div",5),a.Wb(2,"h1"),a.Qc(3),a.Vb(),a.Wb(4,"div",6),a.Wb(5,"div",7),a.Wb(6,"img",8),a.ic("click",(function(){return a.Fc(t),a.kc(2).onUploadEdit()}))("error",(function(){return a.Fc(t),a.kc(2).setDefaultPic()})),a.Vb(),a.Vb(),a.Vb(),a.Wb(7,"div",6),a.Wb(8,"div",9),a.Wb(9,"button",10),a.ic("click",(function(){return a.Fc(t),a.kc(2).onUploadEdit()})),a.Qc(10," Upload/Edit Photo "),a.Vb(),a.Oc(11,N,2,0,"button",11),a.Vb(),a.Vb(),a.Wb(12,"form",12),a.ic("ngSubmit",(function(){return a.Fc(t),a.kc(2).onSubmit()})),a.Wb(13,"div",13),a.Wb(14,"label"),a.Qc(15,"The name you prefer to be called by instructors"),a.Vb(),a.Rb(16,"input",14),a.Vb(),a.Wb(17,"div",13),a.Wb(18,"label"),a.Qc(19," Long-term Contact Email "),a.Wb(20,"em",15),a.Qc(21,"- only visible to your instructors"),a.Vb(),a.Vb(),a.Rb(22,"input",16),a.Vb(),a.Wb(23,"div",13),a.Wb(24,"label"),a.Qc(25,"Institute"),a.Vb(),a.Rb(26,"input",17),a.Vb(),a.Wb(27,"div",13),a.Wb(28,"label"),a.Qc(29,"Nationality"),a.Vb(),a.Wb(30,"select",18),a.Oc(31,D,2,2,"option",19),a.Vb(),a.Vb(),a.Wb(32,"label"),a.Qc(33,"Gender"),a.Vb(),a.Wb(34,"div",13),a.Oc(35,Q,5,4,"div",20),a.lc(36,"enumToArray"),a.Vb(),a.Wb(37,"div",13),a.Wb(38,"label",21),a.Qc(39," More Information about Yourself"),a.Vb(),a.Wb(40,"textarea",22),a.Qc(41,"            "),a.Vb(),a.Vb(),a.Wb(42,"div",23),a.Wb(43,"button",24),a.Oc(44,B,1,0,"tm-ajax-loading",25),a.Qc(45," Save Profile "),a.Vb(),a.Vb(),a.Wb(46,"div",26),a.Qc(47,"This profile will be visible to all your instructors and coursemates."),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&t){const t=a.kc(2);a.Cb(3),a.Rc(t.name),a.Cb(3),a.tc("src",t.profilePicLink,a.Ic),a.Cb(5),a.sc("ngIf",t.profilePicLink!=t.defaultPictureLink),a.Cb(1),a.sc("formGroup",t.editForm),a.Cb(19),a.sc("ngForOf",t.nationalities),a.Cb(4),a.sc("ngForOf",a.mc(36,8,t.Gender)),a.Cb(8),a.sc("disabled",t.isSavingProfileEdit),a.Cb(1),a.sc("ngIf",t.isSavingProfileEdit)}}function U(t,e){if(1&t&&(a.Wb(0,"div",2),a.Wb(1,"h1"),a.Qc(2,"Student Profile"),a.Vb(),a.Oc(3,H,48,10,"div",3),a.Vb()),2&t){const t=a.kc();a.Cb(3),a.sc("ngIf",t.student)}}const j=[{path:"",component:(()=>{class t{constructor(t,e,i,o,r,n){this.simpleModalService=t,this.nationalitiesService=e,this.authService=i,this.ngbModal=o,this.statusMessageService=r,this.studentProfileService=n,this.Gender=M.h,this.id="",this.defaultPictureLink="/assets/images/profile_picture_default.png",this.isLoadingStudentProfile=!1,this.hasLoadingStudentProfileFailed=!1,this.isSavingProfileEdit=!1,this.backendUrl=y.a.backendUrl}ngOnInit(){this.initNationalities(),this.loadStudentProfile()}initNationalities(){this.nationalitiesService.getNationalities().subscribe(t=>{this.nationalities=t.nationalities})}loadStudentProfile(){this.hasLoadingStudentProfileFailed=!1,this.isLoadingStudentProfile=!0,this.authService.getAuthUser().subscribe(t=>{t.user&&(this.id=t.user.id,this.profilePicLink=`${this.backendUrl}/webapi/student/profilePic?user=${this.id}`,this.studentProfileService.getStudentProfile().pipe(Object(C.a)(()=>this.isLoadingStudentProfile=!1)).subscribe(t=>{t?(this.student=t,this.name=t.name,this.initStudentProfileForm(this.student)):(this.hasLoadingStudentProfileFailed=!0,this.statusMessageService.showErrorToast("Error retrieving student profile"))},t=>{this.hasLoadingStudentProfileFailed=!0,this.statusMessageService.showErrorToast(t.error.message)}))})}initStudentProfileForm(t){this.editForm=new r.h({studentshortname:new r.f(t.shortName),studentprofileemail:new r.f(t.email),studentprofileinstitute:new r.f(t.institute),studentnationality:new r.f(t.nationality),existingNationality:new r.f(t.nationality),studentgender:new r.f(t.gender),studentprofilemoreinfo:new r.f(t.moreInfo)})}onSubmit(){this.simpleModalService.openConfirmationModal("Save Changes?",P.a.INFO,"Are you sure you want to make changes to your profile?").result.then(()=>this.submitEditForm(),()=>{})}onUploadEdit(){this.studentProfileService.getProfilePicture().pipe(Object(S.a)(t=>{const e=this.ngbModal.open(O);return e.componentInstance.image=t,Object(v.a)(e.result)}),Object(w.a)(()=>Object(x.a)({error:{message:"No image uploaded"},status:600})),Object(S.a)(t=>this.studentProfileService.postProfilePicture(t))).subscribe(()=>{this.statusMessageService.showSuccessToast("Your profile picture has been saved successfully");const t=(new Date).getTime();this.profilePicLink=`${this.backendUrl}/webapi/student/profilePic?${t}&user=${this.id}`},t=>{600!==t.status&&this.statusMessageService.showErrorToast(t.error.message)})}submitEditForm(){this.isSavingProfileEdit=!0,this.studentProfileService.updateStudentProfile(this.id,{shortName:this.editForm.controls.studentshortname.value,email:this.editForm.controls.studentprofileemail.value,institute:this.editForm.controls.studentprofileinstitute.value,nationality:this.editForm.controls.studentnationality.value,gender:this.editForm.controls.studentgender.value,moreInfo:this.editForm.controls.studentprofilemoreinfo.value,existingNationality:this.editForm.controls.existingNationality.value}).pipe(Object(C.a)(()=>this.isSavingProfileEdit=!1)).subscribe(t=>{t&&this.statusMessageService.showSuccessToast(t.message)},t=>{this.statusMessageService.showErrorToast("Could not save your profile! "+t.error.message)})}onDelete(){this.simpleModalService.openConfirmationModal("Delete profile picture?",P.a.DANGER,"Warning: Profile picture cannot be recovered.").result.then(()=>{this.deleteProfilePicture()},()=>{})}deleteProfilePicture(){this.studentProfileService.deleteProfilePicture({googleid:this.id}).subscribe(t=>{t&&(this.statusMessageService.showSuccessToast(t.message),this.profilePicLink="/assets/images/profile_picture_default.png")},t=>{this.statusMessageService.showErrorToast("Could not delete your profile picture! "+t.error.message)})}setDefaultPic(){this.profilePicLink=this.defaultPictureLink}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(I.a),a.Qb(k),a.Qb(W.a),a.Qb(s.m),a.Qb(V.a),a.Qb(A.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["tm-student-profile-page"]],decls:2,vars:3,consts:[[3,"shouldShowRetry","message","retryEvent"],["class","text-center text-sm-left",4,"tmIsLoading"],[1,"text-center","text-sm-left"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body","fill-plain"],[1,"row","profile-pic-row"],[1,"col","cursor-pointer"],[1,"profile-pic",3,"src","click","error"],[1,"col-md-12","cursor-pointer"],["ngbTooltip",".jpg or .png, max size 5 MB",1,"btn","btn-primary","upload-edit-photo","btn-margin-right",3,"click"],["id","profile-delete-photo","class","btn btn-danger",3,"click",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["id","studentshortname","formControlName","studentshortname",1,"form-control"],[1,"font-weight-normal","emphasis","text-muted","small"],["id","studentprofileemail","formControlName","studentprofileemail",1,"form-control"],["id","studentprofileinstitute","formControlName","studentprofileinstitute",1,"form-control"],["id","studentnationality","formControlName","studentnationality",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","custom-control-inline",4,"ngFor","ngForOf"],["ngbTooltip","You may specify miscellaneous info about yourself e.g. links to home page, online CV, portfolio etc",1,"ngb-tooltip-class"],["id","studentprofilemoreinfo","rows","4","formControlName","studentprofilemoreinfo","placeholder","You may specify miscellaneous info about yourself e.g. links to home page, online CV, portfolio etc.",1,"form-control"],[1,"text-center"],["type","submit",1,"btn","btn-primary","student-save-profile",3,"disabled"],[4,"ngIf"],[1,"whisper"],["id","profile-delete-photo",1,"btn","btn-danger",3,"click"],[3,"value"],[1,"custom-control-inline"],["type","radio","formControlName","studentgender",1,"student-gender-radio",3,"value"],[1,"student-gender-label","mt-1"]],template:function(t,e){1&t&&(a.Wb(0,"tm-loading-retry",0),a.ic("retryEvent",(function(){return e.loadStudentProfile()})),a.Oc(1,U,4,1,"div",1),a.Vb()),2&t&&(a.sc("shouldShowRetry",e.hasLoadingStudentProfileFailed)("message","Failed to load profile"),a.Cb(1),a.sc("tmIsLoading",e.isLoadingStudentProfile))},directives:[F.a,T.a,o.u,s.w,r.F,r.q,r.i,r.c,r.p,r.g,r.B,o.t,r.u,r.E,r.x,_.a],pipes:[E.a,L.a],styles:[".fill-plain[_ngcontent-%COMP%]{background-color:#eaeff5}label[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}select[_ngcontent-%COMP%]{width:300px}.student-gender-radio[_ngcontent-%COMP%]{margin-right:5px}.student-gender-label[_ngcontent-%COMP%]{font-weight:400}.whisper[_ngcontent-%COMP%]{margin-top:15px;font-style:italic;color:grey}.profile-pic[_ngcontent-%COMP%]{height:220px;width:220px}.profile-pic-row[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),t})()}];let X=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},imports:[[o.c,r.z,n.h.forChild(j),b.a,d,s.y,f.a,g.a,m.a]]}),t})()},ax2R:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var o=i("XNiG"),r=i("fXoL");let n=(()=>{class t{constructor(){this.progressPercentage=new o.a}updateProgress(t){this.progressPercentage.next(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},eQqG:function(t,e,i){"use strict";i.d(e,"a",(function(){return x}));var o=i("fXoL"),r=i("/Tzu"),n=i("1kSV"),s=i("ofXK"),a=i("ax2R");let c=(()=>{class t{constructor(t){this.progressBarService=t,this.progressPercentage=0}ngOnInit(){this.getProgress()}getProgress(){this.progressBarService.progressPercentage.subscribe(t=>{this.progressPercentage=t})}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(a.a))},t.\u0275cmp=o.Kb({type:t,selectors:[["tm-progress-bar"]],decls:2,vars:3,consts:[["type","info","height","26px","showValue","true",3,"value","striped","animated"]],template:function(t,e){1&t&&(o.Wb(0,"div"),o.Rb(1,"ngb-progressbar",0),o.Vb()),2&t&&(o.Cb(1),o.sc("value",e.progressPercentage)("striped",!0)("animated",!0))},directives:[n.q],encapsulation:2}),t})();function p(t,e){1&t&&o.Rb(0,"i",16)}function h(t,e){1&t&&o.Rb(0,"i",17)}function l(t,e){1&t&&o.Rb(0,"i",18)}function u(t,e){1&t&&o.Sb(0)}function d(t,e){if(1&t&&(o.Wb(0,"div"),o.Oc(1,u,1,0,"ng-container",19),o.Vb()),2&t){const t=o.kc();o.Cb(1),o.sc("ngTemplateOutlet",t.content)}}function g(t,e){if(1&t&&o.Rb(0,"div",20),2&t){const t=o.kc();o.sc("innerHTML",t.content,o.Gc)}}function m(t,e){1&t&&(o.Wb(0,"div",21),o.Rb(1,"tm-progress-bar"),o.Vb())}function f(t,e){if(1&t){const t=o.Xb();o.Wb(0,"button",22),o.ic("click",(function(){return o.Fc(t),o.kc().activeModal.dismiss()})),o.Qc(1),o.Vb()}if(2&t){const t=o.kc();o.Cb(1),o.Sc(" ",t.cancelMessage," ")}}const b=function(t){return{"display-none":t}},y=function(t,e,i,o){return{"alert-danger":t,"alert-warning":e,"alert-info":i,"bg-white":o}},M=function(t,e,i,o){return{"btn-danger":t,"btn-warning":e,"btn-info":i,"btn-primary":o}};let v=(()=>{class t{constructor(t){this.activeModal=t,this.SimpleModalType=r.a,this.header="",this.content="",this.type=r.a.NEUTRAL,this.isInformationOnly=!1,this.confirmMessage="Yes",this.cancelMessage="No, cancel the operation"}get isTemplate(){return this.content instanceof o.L}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(n.a))},t.\u0275cmp=o.Kb({type:t,selectors:[["tm-confirmation-modal"]],inputs:{header:"header",content:"content",type:"type",isInformationOnly:"isInformationOnly",confirmMessage:"confirmMessage",cancelMessage:"cancelMessage"},decls:18,vars:24,consts:[[1,"transparent-overlay",3,"ngClass"],[1,"modal-header",3,"ngClass"],[1,"modal-title"],["class","fas fa-times-circle",4,"ngIf"],["class","fas fa-exclamation-circle",4,"ngIf"],["class","fas fa-info-circle",4,"ngIf"],[1,"margin-left-5px",3,"innerHTML"],["type","button",1,"close",3,"click"],[1,"fas","fa-times"],[1,"modal-body"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["class","progress-bar-container",4,"ngIf"],[1,"modal-footer"],["type","button","class","btn btn-light modal-btn-cancel",3,"click",4,"ngIf"],["type","button",1,"btn","modal-btn-ok","z-index-1",3,"ngClass","click"],[1,"fas","fa-times-circle"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-info-circle"],[4,"ngTemplateOutlet"],[3,"innerHTML"],[1,"progress-bar-container"],["type","button",1,"btn","btn-light","modal-btn-cancel",3,"click"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div"),o.Wb(3,"h5",2),o.Oc(4,p,1,0,"i",3),o.Oc(5,h,1,0,"i",4),o.Oc(6,l,1,0,"i",5),o.Rb(7,"span",6),o.Vb(),o.Vb(),o.Wb(8,"button",7),o.ic("click",(function(){return e.type===e.SimpleModalType.LOAD?e.activeModal.close():e.activeModal.dismiss()})),o.Rb(9,"i",8),o.Vb(),o.Vb(),o.Wb(10,"div",9),o.Oc(11,d,2,1,"div",10),o.Oc(12,g,1,1,"div",11),o.Oc(13,m,2,0,"div",12),o.Vb(),o.Wb(14,"div",13),o.Oc(15,f,2,1,"button",14),o.Wb(16,"button",15),o.ic("click",(function(){return e.activeModal.close()})),o.Qc(17),o.Vb(),o.Vb()),2&t&&(o.sc("ngClass",o.wc(12,b,e.type!==e.SimpleModalType.LOAD)),o.Cb(1),o.sc("ngClass",o.zc(14,y,e.type===e.SimpleModalType.DANGER,e.type===e.SimpleModalType.WARNING,e.type===e.SimpleModalType.INFO||e.type===e.SimpleModalType.LOAD,e.type===e.SimpleModalType.NEUTRAL)),o.Cb(3),o.sc("ngIf",e.type===e.SimpleModalType.DANGER),o.Cb(1),o.sc("ngIf",e.type===e.SimpleModalType.WARNING),o.Cb(1),o.sc("ngIf",e.type===e.SimpleModalType.INFO||e.type===e.SimpleModalType.LOAD),o.Cb(1),o.sc("innerHTML",e.header,o.Gc),o.Cb(4),o.sc("ngIf",e.isTemplate),o.Cb(1),o.sc("ngIf",!e.isTemplate),o.Cb(1),o.sc("ngIf",e.type===e.SimpleModalType.LOAD),o.Cb(2),o.sc("ngIf",!e.isInformationOnly),o.Cb(1),o.sc("ngClass",o.zc(19,M,e.type===e.SimpleModalType.DANGER||e.type===e.SimpleModalType.LOAD,e.type===e.SimpleModalType.WARNING,e.type===e.SimpleModalType.INFO,e.type===e.SimpleModalType.NEUTRAL)),o.Cb(1),o.Rc(e.confirmMessage))},directives:[s.r,s.u,s.B,c],styles:[".margin-left-5px[_ngcontent-%COMP%]{margin-left:5px}.progress-bar-container[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:2px}.transparent-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;visibility:false;z-index:0}.display-none[_ngcontent-%COMP%]{display:none}.z-index-1[_ngcontent-%COMP%]{z-index:1}"]}),t})(),x=(()=>{class t{constructor(t){this.ngbModal=t}open(t,e,i,o){const r=this.ngbModal.open(v);return r.componentInstance.header=t,r.componentInstance.content=i,r.componentInstance.type=e,o&&Object.entries(o).map(([t,e])=>{r.componentInstance[t]=e}),r}openConfirmationModal(t,e,i,o){const r=Object.assign({isInformationOnly:!1,confirmMessage:"Yes",cancelMessage:"No, cancel the operation"},o);return this.open(t,e,i,r)}openInformationModal(t,e,i,o){const r=Object.assign({isInformationOnly:!0,confirmMessage:"OK"},o);return this.open(t,e,i,r)}openLoadingModal(t,e,i,o){const r=Object.assign({isInformationOnly:!0,confirmMessage:"Abort"},o);return this.open(t,e,i,r)}}return t.\u0275fac=function(e){return new(e||t)(o.ec(n.m))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},mYbV:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var o=i("ofXK"),r=i("fXoL");let n=(()=>{class t{}return t.\u0275mod=r.Ob({type:t}),t.\u0275inj=r.Nb({factory:function(e){return new(e||t)},imports:[[o.c]]}),t})()}}]);